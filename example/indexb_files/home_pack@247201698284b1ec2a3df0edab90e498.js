function trackAction(e,t,n){if(trackAction.root){e=trackAction.root+"|"+e}if(trackAction.prefix&&e.indexOf("|")>0&&e.indexOf("&")<0){e=e.replace(e.substr(0,trackAction.prefix.length),trackAction.prefix)}if(trackAction.prefix&&e.indexOf("&")>=0){e=e+"&_module="+trackAction.prefix}if(CLIENT_TIME&&SERVER_TIME){var r=(new Date).getTime()-CLIENT_TIME.getTime()+SERVER_TIME.getTime()}else{var r=(new Date).getTime()}var i="/site/track.htm?action="+e+"&t="+r;if(t){i+="&rId="+t}else{if(trackAction.rid){i+="&rId="+trackAction.rid}}if(n)i=i.replace("track.htm","timetrack.htm");if(i.length>=1024){return}setTimeout(function(){try{(new Image).src=i}catch(e){}},0)}function UIObject(){this._XGUI_=true;this._content_=[];this._childrens_=[];this._GID_="XI"+$jex.globalID();this._tplsreg=/\{\#([^\}]*?)\}/}function ActionDelay(e){this.delay=e;this.timer=null}function ActionFlow(e){this.actions={};this.logs=[];this.interval=e;this.tid=null}function ScriptRequest(e){if(e.funcName)this.funcName=e.funcName;this.callbackName=e.callbackName||"__jscallback";this.doc=e.doc||document;this.win=$jex.getDocumentWindow(this.doc);if(e.onerror)$jex.event.add(this,"error",e.onerror);if(e.ontimeout)$jex.event.add(this,"timeout",e.ontimeout);if(e.oncancel)$jex.event.add(this,"cancel",e.oncancel);if(e.oncomplete)$jex.event.add(this,"complete",e.oncomplete)}function CACTI_monitoring(e){this.timerList=e.timerList||["t_done"];this._timersEnded=0;this._url=e.url;this._pageId=e.pageId;this._init()}function adsAutoSlide(){function r(){var e=parseInt($(".ad_container").css("left"));if(e==(1-n)*t){if($(".ad_container").is(":animated")){return}$(".ad_container").css("left",(1-n/2)*t)}else{var r=e-t;i(r)}}function i(e){if($(".ad_container").is(":animated")){return}$(".ad_container").animate({left:e},500,function(){if(e==0){$(this).css("left",-n*t/2)}else if(e==(1-n)*t){$(".ad_container").css("left",(1-n/2)*t)}})}var e=setInterval(r,4e3);var t=$(".ad_item").width();var n=$(".ad_item").length;$(".ad_container").css({width:n*912+"px"});$(".ad_container").css({left:-n*t/2});$(".ad_item").hover(function(){clearInterval(e)},function(){e=setInterval(r,4e3)});$(".prev").click(function(){var e=parseInt($(".ad_container").css("left"));if(e===0){if($(".ad_container").is(":animated")){return}$(".ad_container").css("left",-n*t/2)}else{var r=e+t;i(r)}});$(".next").click(r);$("#airlineList_content").hover(function(){$(".arrow").show()},function(){$(".arrow").hide()})}function setIfrmHeight(e,t){var n=QadAdUnits.$E(e);if(n){n.style.height=t+"px"}}function ControlVersion(){var e;var t;var n;try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");e=t.GetVariable("$version")}catch(n){}if(!e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");e="WIN 6,0,21,0";t.AllowScriptAccess="always";e=t.GetVariable("$version")}catch(n){}}if(!e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");e=t.GetVariable("$version")}catch(n){}}if(!e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");e="WIN 3,0,18,0"}catch(n){}}if(!e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");e="WIN 2,0,0,11"}catch(n){e=-1}}return e}function GetSwfVer(){var e=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var t=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var n=navigator.plugins["Shockwave Flash"+t].description;var r=n.split(" ");var i=r[2].split(".");var s=i[0];var o=i[1];var u=r[3];if(u==""){u=r[4]}if(u[0]=="d"){u=u.substring(1)}else if(u[0]=="r"){u=u.substring(1);if(u.indexOf("d")>0){u=u.substring(0,u.indexOf("d"))}}var e=s+"."+o+"."+u}}else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1)e=4;else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1)e=3;else if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1)e=2;else if(isIE&&isWin&&!isOpera){e=ControlVersion()}return e}function DetectFlashVer(e,t,n){versionStr=GetSwfVer();if(versionStr==-1){return false}else if(versionStr!=0){if(isIE&&isWin&&!isOpera){tempArray=versionStr.split(" ");tempString=tempArray[1];versionArray=tempString.split(",")}else{versionArray=versionStr.split(".")}var r=versionArray[0];var i=versionArray[1];var s=versionArray[2];if(r>parseFloat(e)){return true}else if(r==parseFloat(e)){if(i>parseFloat(t))return true;else if(i==parseFloat(t)){if(s>=parseFloat(n))return true}}return false}}function AC_AddExtension(e,t){if(e.indexOf("?")!=-1)return e.replace(/\?/,t+"?");else return e+t}function AC_Generateobj(e,t,n){var r="";if(isIE&&isWin&&!isOpera){r+="<object ";for(var i in e){r+=i+'="'+e[i]+'" '}r+=">";for(var i in t){r+='<param name="'+i+'" value="'+t[i]+'" /> '}r+="</object>"}else{r+="<embed ";for(var i in n){r+=i+'="'+n[i]+'" '}r+="> </embed>"}return r}function AC_FL_RunContent(){var e=AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");return AC_Generateobj(e.objAttrs,e.params,e.embedAttrs)}function AC_SW_RunContent(){var e=AC_GetArgs(arguments,".dcr","src","clsid:166B1BCA-3F9C-11CF-8075-444553540000",null);return AC_Generateobj(e.objAttrs,e.params,e.embedAttrs)}function AC_GetArgs(e,t,n,r,i){var s=new Object;s.embedAttrs=new Object;s.params=new Object;s.objAttrs=new Object;for(var o=0;o<e.length;o=o+2){var u=e[o].toLowerCase();switch(u){case"classid":break;case"pluginspage":s.embedAttrs[e[o]]=e[o+1];break;case"src":case"movie":e[o+1]=AC_AddExtension(e[o+1],t)+"?"+qunarflashver;s.embedAttrs["src"]=e[o+1];s.params[n]=e[o+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblclick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":s.objAttrs[e[o]]=e[o+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":s.embedAttrs[e[o]]=s.objAttrs[e[o]]=e[o+1];break;default:s.embedAttrs[e[o]]=s.params[e[o]]=e[o+1]}}s.objAttrs["classid"]=r;if(i)s.embedAttrs["type"]=i;return s}function thisMovie(e){if(navigator.appName.indexOf("Microsoft")!=-1){return window[e]}else{return document[e]}}function initTrendCityInput(){$jex.array.each(trendCityInputList,function(e){});var e={fromtype:"domesticfromtj",totype:"domesticto-tj",fromDefaultTab:"热门",toDefaultTab:"热门"};$fromCity=$("#"+trendCityInputList[0].id);$toCity=$("#"+trendCityInputList[1].id);var t=$fromCity.nextAll(".js-suggestcontainer");var n=$toCity.nextAll(".js-suggestcontainer");var r=new FlightHotCity;var i=new FlightHotCity;var s=new FlightSuggest;var o=new FlightSuggest;$fromCity.data("qcbox-placeholder",$fromCity.data("qcbox-placeholder"));$toCity.data("qcbox-placeholder",$toCity.data("qcbox-placeholder"));$(r).bind("hotcity-show",function(){try{$fromCity.data("q-suggest").hide()}catch(e){}});$(i).bind("hotcity-show",function(){try{$toCity.data("q-suggest").hide()}catch(e){}});r.init({type:e.fromtype,cityType:"from",defaultTab:e.fromDefaultTab});s.init({name:"flight-fromcity",container:t,allPlace:false,tiptext:$fromCity.data("qcbox-placeholder")});$fromCity.qcbox();trendCityInputList[0].obj=$fromCity;i.init({type:e.totype,cityType:"to",defaultTab:e.toDefaultTab});o.init({name:"flight-tocity",container:n,allPlace:false,tiptext:$toCity.data("qcbox-placeholder")});$toCity.qcbox();trendCityInputList[1].obj=$toCity;$jex.event.bind($jex.$("hbtn1Search"),"click",checkTrendSearch)}function checkTrendSearch(){if($jex.$("hbtn1Search").disabled){return}if($jex.$("filterLine").getElementsByTagName("li").length===3){try{$jex.$("tipsTrend").getElementsByTagName("p")[0].innerHTML="最多支持3条航线，请删除不必要的航线。";$jex.element.show($jex.$("tipsTrend"))}catch(e){}return}var t=/\([A-Z]{3}\)$/;var n=$("#"+trendCityInputList[0].id).val();var r=$("#"+trendCityInputList[1].id).val();if(t.test(n)){n=n.replace(t,"")}if(t.test(r)){r=r.replace(t,"")}if(n=="城市名"||r=="城市名")return;if(n==r||!n||!r){try{$jex.$("tipsTrend").getElementsByTagName("p")[0].innerHTML="无效航线，请重新输入";$jex.element.show($jex.$("tipsTrend"))}catch(e){}return}var i=getAllTrendCities();lockSearch();if($jex.array.inArray(n+"|"+r,i)>=0){try{$jex.$("tipsTrend").getElementsByTagName("p")[0].innerHTML="重复航线，请重新输入";$jex.element.show($jex.$("tipsTrend"))}catch(e){}unlockSearch();return}var s=true;var o=new Array;$jex.array.each(trendCityInputList,function(e){if(s){s=!!e.obj}});if(s){doTrendsSearch();var u=$jex.$("filterLine").getElementsByTagName("li").length;if(u>=4){return}$jex.$("filterLine").innerHTML+="<li><input onclick='showorhide(this);' type='checkbox' id='line"+(u+1)+"' checked='checked' value='' /><label for='line"+(u+1)+"'>"+n+"-"+r+'</label><i class="ico_close" onclick=\'delLine('+'this,"'+n+'","'+r+"\")' class='ico_close_ct'></i></li>";setColor()}else{$jex.event.add(Trend,"allvalidationpassed",doTrendsSearch);$jex.event.add(Trend,"notallvalidationpassed",unlockSearch)}}function initTrendFunc(){initTrendCityInput();var e=Cookie_YQ.get("flight.trends");if(!e){var t="北京-上海;北京-广州".split(";")}else{if(e.indexOf("undefined")>-1){Cookie_YQ.set("flight.trends",e=e.replace(/\s*undefined\s*-\s*undefined\s*;?/g,""),Trends_Search_EXPIRES)}var t=e.split(";")}var n=[];for(var r=0;r<t.length;r++){var i=t[r].split("-")[0];var s=t[r].split("-")[1];var o="<li><input onclick='showorhide(this);' type='checkbox' checked='checked' id='line"+(r+1)+"' value='' /><label for='line"+(r+1)+"'>"+i+"-"+s+"</label><i class='ico_close' onclick='delLine("+'this,"'+i+'","'+s+"\")'></i></li>";n.push(o)}$jex.$("filterLine").innerHTML=n.join("\n");setColor();$jex.event.bind($jex.$("btnTipsTrend"),"click",function(){$jex.element.hide($jex.$("tipsTrend"))})}function genQueryURL(){var e="";var t=Cookie_YQ.get("flight.trends");if(t!=null&&t!=""){e="lane="+encodeURIComponent(t)}else{e="count="+CONSTANT.DEFAULT_TRENDS_COUNT}return CONSTANT.TRENDS_URL+"?"+e}function checkTrendValidateResult(e){var t=true;$jex.array.each(trendCityInputList,function(e){if(t){t=!e.obj.invalid()}});if(t){trendCities.status.allValidationPassed=true;$jex.event.trigger(Trend,"allvalidationpassed")}else{$jex.event.trigger(Trend,"allvalidationpassed")}}function doTrendsSearch(){var e=trendCityInputList[0].obj.val();var t=trendCityInputList[1].obj.val();var n=/\([A-Z]{3}\)$/;if(n.test(e)){e=e.replace(n,"")}if(n.test(t)){t=t.replace(n,"")}trendQueryURL=CONSTANT.TRENDS_URL+"?lane="+encodeURIComponent(e)+"-"+encodeURIComponent(t);thisMovie("main").add();trackAction(CONSTANT.pageAddr+"|TR|"+encodeURIComponent(e)+"-"+encodeURIComponent(t));GodEye.log({r:"prc_trend"})}function lockSearch(){$jex.$("hbtn1Search").disabled=true;$jex.addClassName($jex.$("hbtn1Search"),"gray");setTimeout("unlockSearch()",CONSTANT.UNLOCK_TIMESPAN)}function unlockSearch(){if($jex.$("hbtn1Search").disabled){$jex.$("hbtn1Search").disabled=false;$jex.removeClassName($jex.$("hbtn1Search"),"gray");$jex.$("hinp1ArriCity").focus();$jex.$("hinp1ArriCity").blur()}}function recordTrendsSearch(){var e=getAllTrendCities();var t=e.join(";");var t=t.replace(/\|/g,"-");Cookie_YQ.set("flight.trends",t,Trends_Search_EXPIRES);var n=$jex.$("filterLine").getElementsByTagName("li");for(var r=0;r<n.length;r++){var i=n[r].getElementsByTagName("label")[0].innerHTML;if(t.indexOf(i)<0){n[r].parentNode.removeChild(n[r]);setColor();return}}}function lineData(){thisMovie("main").lineData()}function getLineData(e){arrTrendCities=e}function getAllTrendCities(){lineData();return arrTrendCities}function getData(){return genQueryURL()}function addData(){return trendQueryURL}function createUrl(e,t,n,r,i){if(e===undefined||t===undefined)return;var s=$jex.parseQueryParam().ex_track;s=s?"&ex_track="+s:"";var o="//flight.qunar.com/twell/flight/Search.jsp?";var u="";if(i){u="searchType=OnewayFlight&fromCity="+encodeURIComponent(e)+"&toCity="+encodeURIComponent(t)+"&fromDate="+encodeURIComponent(n)+"&nextNDays=0&startSearch=true&from=sr_trendflash_idx"}else{var a=new Date(r.replace("-","/","g")),f=new Date(n.replace("-","/","g"));if(a.getTime()<f.getTime()){r=addDay(f,2)}u="searchType=RoundTripFlight&fromCity="+encodeURIComponent(e)+"&toCity="+encodeURIComponent(t)+"&fromDate="+n+"&toDate="+r+"&from=sr_trendflash_idx"}window.open(o+u+s+(location.protocol==="https:"?"&ishttps=1":""))}function addDay(e,t){var n=new Date(Date.parse(e)+3600*1e3*24*t);var r=n.getMonth()+1;var i=n.getDate();if(r<10)r="0"+r;if(i<10)i="0"+i;return n.getFullYear()+"-"+r+"-"+i}function unLock(e){unlockSearch();recordTrendsSearch()}function setDays(e){day_num=e;thisMovie("main").day()}function getDays(){return day_num}function thisMovie(e){if(navigator.appName.indexOf("Microsoft")!=-1){return window[e]}else{return document[e]}}function delSuccess(e){recordTrendsSearch()}function setColor(){var e=$jex.$("filterLine").getElementsByTagName("li");if(e[0]){e[0].className="first"}if(e[1]){e[1].className="second"}if(e[2]){e[2].className="three"}if(e[3]){e[3].className="fourth"}}function delLine(e,t,n){var r=t+"-"+n;var i="";if(Cookie_YQ.get("flight.trends").indexOf(";")==-1){$jex.$("tipsTrend").getElementsByTagName("p")[0].innerHTML="至少保留一条航线";$jex.element.show($jex.$("tipsTrend"));return}var s=getNum(e);thisMovie("main").delLine({id:s,from:t,to:n})}function getNum(e){var t=e.parentNode.className;var n=0;switch(t){case"first":n=0;break;case"second":n=1;break;case"three":n=2;break;case"fourth":n=3;break}return n}function showorhide(e){var t=getNum(e);if(e.checked==true){thisMovie("main").showLine(t)}else{thisMovie("main").hideLine(t)}}function ResponsiveLayoutAdapter(){function a(a){if(o>=0){clearTimeout(o)}var f=$("."+n),l=$("."+r),c=$("."+i);o=setTimeout(function(){o=-1;var n=document.documentElement.clientWidth;var r=t.className;if(n<e){f.addClass(r);l.removeClass(t.headerMax);c?c.addClass(t.sysnoticClsName):""}else{f.removeClass(r);l.addClass(t.headerMax);c?c.removeClass(t.sysnoticClsName):""}$(s).trigger("adjustWidth",n)},a?0:u)}var e=1200;var t={className:"narrow-vs",headerMax:"q_header_max",sysnoticClsName:"q_sysnotice_flight_narrow"};var n="q_pagewrap",r="q_header",i="q_sysnotice_flight";var s=this,o=-1,u=300;a(true);$(window).resize(function(){a()});this.getWindowWidth=function(){return document.documentElement.clientWidth};this.getConfigure=function(){return t};this.isWider=function(){return this.getWindowWidth()>e};this.getDefaultWidth=function(){return e};this.adjust=function(e){a(e)};this.setConfigure=function(e){if(e){t=e;a(true)}return t}}function priceArrToJson(e){var t={};for(var n in e){var r=e[n].date;var i=e[n].price;if(i===""){continue}t[r]={price:i,total_price:i}}t=priceIsMonthMin(t);return t}function priceIsMonthMin(e){var t={};for(var n in e){var r=n.substring(0,7);var i=parseInt(e[n].price);if(!i){continue}if(!t[r]){t[r]=[];t[r].push(n);continue}var s=t[r][0];var o=parseInt(e[s]["price"]);if(i<o){t[r].length=0;t[r].push(n)}else if(i===o){t[r].push(n)}}for(var u in t){var a=t[u];for(var f=0;f<a.length;f++){var l=a[f];e[l].isLow=true;e[l].isTotalLow=true}}return e}function judgeCityType(e){var t=$.Deferred();var n=window.localStorage&&window.localStorage.getItem("citylist?type=11");var r=window.localStorage&&window.localStorage.getItem("citylist?type=12");var i;var s=specialCity.toString();var o;var u;var a=new RegExp(Unicode(e),"g");if(s.indexOf(e)!==-1){i=true}if(n&&n.indexOf("\\u")!==-1){o=n.match(a)}else{o=n&&n.indexOf('"'+e+'"')!==-1}if(!o&&r&&r.indexOf("\\u")!==-1){u=r.match(a)}else{u=r&&r.indexOf('"'+e+'"')!==-1}if(n&&o){var f=!i&&o;t.resolve(!f);return t.promise()}else if(r&&u){t.resolve(u);return t.promise()}else{$.ajax({url:"//m.flight.qunar.com/touch/api/suggest",dataType:"jsonp",data:{queryWord:e},timeout:3e3,success:function(e){if(e){if(e.ret&&e.data&&e.data.suggestData){var n=e.data.suggestData.places[0].suggestSearch&&e.data.suggestData.places[0].suggestSearch.isInter;t.resolve(n)}else{t.resolve(true)}}},error:function(e){console.log("suggest req error:",e);t.reject(e)}});return t.promise()}}function Unicode(e){var t="";for(var n=0;n<e.length;n++){t+="\\\\u"+e.charAt(n).charCodeAt(0).toString(16)}return t}!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){var n="www"===e?"wwwCalendarHolidayConfig":"touchCalendarHolidayConfig",r=f(n);if(p[e])try{return new Promise(function(e,n){e(p.value),t&&"function"==typeof t&&t(p.value)})}catch(o){return t&&"function"==typeof t&&t(p.value)}if(!r)return s(n,e,t);p[e]=r,i(r.time,e,n,t);try{return new Promise(function(e,n){e(r.value),t&&"function"==typeof t&&t(r.value)})}catch(o){return t&&"function"==typeof t&&t(r.value)}}function i(e,t,n,r){if(e){var i=(new Date).getTime(),o=i-e;o>h&&s(n,t,r)}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"touch",n=arguments[2],r=function(e){var t=u(e);"function"==typeof n&&n(t)};return o({url:c+t,success:n?r:"",method:"get",type:"jsonp",jsonpCallbackName:"getHoliday"}).then(function(t){return l(e,t),u(t)})["catch"](function(e){return{err:e}})}var o=n(1),u=n(3).parseJsonString,a=n(4),f=a.getStorageByKey,l=a.setStorageByKey,c="https://m.flight.qunar.com/flightConfig/calendar/",h=864e5,p={};window.getConfigFuns?window.getConfigFuns.getCalendarHoliday=r:window.getConfigFuns={getCalendarHoliday:r},e.exports={getCalendarHoliday:r}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void (e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t["headers"]||{};r["Accept"]=r["Accept"]||defaultHeaders["accept"][t["type"]]||defaultHeaders["accept"]["*"];var i="undefined"!=typeof FormData&&t["data"]instanceof FormData;t["crossOrigin"]||r[requestedWith]||(r[requestedWith]=defaultHeaders["requestedWith"]),r[contentType]||i||(r[contentType]=t["contentType"]||defaultHeaders["contentType"]);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){"undefined"!=typeof t["withCredentials"]&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t["withCredentials"])}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var i=uniqid++,s=e["jsonpCallback"]||"callback",o=e["jsonpCallbackName"]||reqwest.getcallbackPrefix(i),u=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),a=r.match(u),f=doc.createElement("script"),l=0,c=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return a?"?"===a[3]?r=r.replace(u,"$1="+o):o=a[3]:r=urlappend(r,s+"="+o),context[o]=generalCallback,f.type="text/javascript",f.src=r,f.async=!0,"undefined"==typeof f.onreadystatechange||c||(f.htmlFor=f.id="_reqwest_"+i),f.onload=f.onreadystatechange=function(){return!(f[readyState]&&"complete"!==f[readyState]&&"loaded"!==f[readyState]||l)&&(f.onload=f.onreadystatechange=null,f.onclick&&f.onclick(),t(lastValue),lastValue=void 0,head.removeChild(f),void (l=1))},head.appendChild(f),{abort:function(){f.onload=f.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(f),l=1}}}function getRequest(e,t){var n,r=this.o,i=(r["method"]||"GET").toUpperCase(),s="string"==typeof r?r:r["url"],o=r["processData"]!==!1&&r["data"]&&"string"!=typeof r["data"]?reqwest.toQueryString(r["data"]):r["data"]||null,u=!1;return"jsonp"!=r["type"]&&"GET"!=i||!o||(s=urlappend(s,o),o=null),"jsonp"==r["type"]?handleJsonp(r,e,t,s):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(i,s,r["async"]!==!1),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},u=!0):n.onreadystatechange=handleReadyState(this,e,t),r["before"]&&r["before"](n),u?setTimeout(function(){n.send(o)},200):n.send(o),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o["timeout"]&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o["type"]||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o["url"],this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o["timeout"]&&(this.timeout=setTimeout(function(){timedOut()},o["timeout"])),o["success"]&&(this._successHandler=function(){o["success"].apply(o,arguments)}),o["error"]&&this._errorHandlers.push(function(){o["error"].apply(o,arguments)}),o["complete"]&&this._completeHandlers.push(function(){o["complete"].apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,i,s,o=e.name,u=e.tagName.toLowerCase(),a=function(e){e&&!e["disabled"]&&t(o,normalize(e["attributes"]["value"]&&e["attributes"]["value"]["specified"]?e["value"]:e["text"]))};if(!e.disabled&&o)switch(u){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),i=e.value,(!(n||r)||e.checked)&&t(o,normalize(n&&""===i?"on":i)));break;case"textarea":t(o,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())a(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(s=0;e.length&&s<e.length;s++)e.options[s].selected&&a(e.options[s])}}function eachFormElement(){var e,t,n=this,r=function(e,t){var r,i,s;for(r=0;r<t.length;r++)for(s=e[byTag](t[r]),i=0;i<s.length;i++)serial(s[i],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var i,s,o,u=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)o=t[s],n||u.test(e)?r(e,o):buildParams(e+"["+("object"==typeof o?s:"")+"]",o,n,r);else if(t&&"[object Object]"===t.toString())for(i in t)buildParams(e+"["+i+"]",t[i],n,r);else r(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(2)}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +(new Date),lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e["crossOrigin"]===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,i=t||!1,s=[],o=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():null==t?"":t,s[s.length]=o(e)+"="+o(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)u(e[r]["name"],e[r]["value"]);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],i,u);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e["type"]&&(e["method"]=e["type"])&&delete e["type"],e["dataType"]&&(e["type"]=e["dataType"]),e["jsonpCallback"]&&(e["jsonpCallbackName"]=e["jsonpCallback"])&&delete e["jsonpCallback"],e["jsonp"]&&(e["jsonpCallback"]=e["jsonp"])),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,t){},function(module,exports){"use strict";function parseJsonString(string){return _isSupportJson()?JSON.parse(string):eval("("+string+")")}function _isSupportJson(){return!!JSON&&!!JSON.parse}module.exports={parseJsonString:parseJsonString}},function(e,t,n){"use strict";function r(e){if(!s())return null;var t=window.localStorage[e];return t?{value:o(t),time:window.localStorage[e+"UpdateTime"]}:null}function i(e,t){if(s()){t&&window.localStorage.setItem(e+"",t);var n=(new Date).getTime();window.localStorage.setItem(e+"UpdateTime",n)}}function s(){var e=window,t=e.Storage,n=e.localStorage;return!!t&&!!n&&n instanceof t}var o=n(3).parseJsonString;e.exports={getStorageByKey:r,setStorageByKey:i}}])});var $jex={ie:0,gecko:0,opera:0,safari:0,isdebug:false,testurl:window.location.search.indexOf("&testurl")>0,browser:null,mobile:null,air:null,VOIDFUNC:function(){},globalID:function(){var e=0;return function(){return e++}}(),_innerClass:{},register:function(e,t){$jex._innerClass[e]=t},getClass:function(e){return $jex._innerClass[e]},$:function(e){return typeof e=="string"?document.getElementById(e):e},_:function(e,t){var n=function(){};n.prototype=t.prototype;e.prototype=new n},compare:function(e,t,n){var r=t||{};var i=n||{};for(var s=0;s<e.length;s++){var o=e[s];if(r[o]!=i[o]){return false}}return true},$defined:function(e){return typeof e!="undefined"&&e!=null},$empty:function(e){for(var t in e){if(typeof e[t]=="function")continue;return false}return true},parseQueryParam:function(){var e={};var t=window.location.search.replace("?","").split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");e[r[0]]=decodeURIComponent(r[1])}return e},extendClass:function(){var e=Object.prototype.constructor;return function(t,n){var r=n.prototype;var i=t.prototype;var s=function(){};s.prototype=r;i=t.prototype=new s;t.superclass=r;i.constructor=t;if(r.constructor==e){r.constructor=n}t.prototype.toString=n.prototype.toString;return t}}(),body:function(e){if(!e)e=document;return e.body?e.body:e.getElementsByTagName("body")[0]},doc:function(e){return e?e.nodeType==9?e:e.ownerDocument||document:document},merge:function(e,t){for(var n in t){if(t[n]!==undefined){e[n]=t[n]}}return e},exec:function(e){return e()},toInt:function(e,t){var n;return isNaN(n=parseInt(e))?t:n},toFloat:function(e,t){var n;return isNaN(n=parseFloat(e))?t:n},toBoolean:function(e){if(!e)return false;return e==true||(e=e.toUpperCase())=="TRUE"||e=="1"},toQueryString:function(e){var t=[];$jex.foreach(e,function(e,n,r){if(n>0){t.push("&")}t.push(encodeURIComponent(r),"=",encodeURIComponent(e))});return t.join("")},text:function(e){return e.innerText||e.textContent},trim:function(e,t){switch(t){case"l":return e.replace(/(^\s*)/g,"");case"r":return e.replace(/(\s*$)/g,"");default:return e.replace(/(^\s*)|(\s*$)/g,"")}},stripTag:function(e){return e.replace(/<\/?[^>]+>/gi,"")},starsWith:function(e,t,n){if(!n)n=0;if(!e||e.length<n+t.length)return false;return e.substring(n,t.length)==t},exists:function(e,t){var n=t.split("."),r;for(r=0;r<n.length;r++){if(!e[n[r]])return false;e=e[n[r]]}return true},isNull:function(e){return typeof e=="object"&&!e},isNumber:function(e){return typeof e=="number"&&isFinite(e)?true:false},isArray:function(e){return!!e&&e.constructor==Array},removeElement:function(e){if(e&&e.parentNode)e.parentNode.removeChild(e)},isChildrenOf:function(e,t,n){if(n&&e){e=e.parentNode}while(e){if(e==t)return true;e=e.parentNode}return false},hasClassName:function(e,t){if(!e)return;return this.array.indexOf(e.className.split(/\s+/),t)!=-1},addClassName:function(e,t){if(!e)return;if(this.hasClassName(e,t))return;e.className=e.className+" "+t},removeClassName:function(e,t){if(!e)return;if(typeof t=="string")t=[t];e.className=this.array.select(e.className.split(/\s+/),function(e){return $jex.array.indexOf(t,e)==-1}).join(" ")},toggleClassName:function(e,t,n,r){if($jex.hasClassName(e,t)){$jex.removeClassName(e,t);if(r)r()}else{$jex.addClassName(e,t);if(n)n()}},createCssText:function(e,t){if(!e)return;if(!t)t=document;var n=t.createElement("style");n.setAttribute("type","text/css");var r=t.getElementsByTagName("head")[0];if(!r)return;else r.appendChild(n);if(n.styleSheet)n.styleSheet.cssText=e;else{var i=t.createTextNode(e);n.appendChild(i)}return n},createCssLink:function(e,t){if(!e)return;if(!t)t=document;if(document.createStyleSheet)document.createStyleSheet(e);else{var n=t.createElement("link");n.setAttribute("rel","stylesheet");n.setAttribute("type","text/css");n.setAttribute("href",e);var r=t.getElementsByTagName("head")[0];if(!r)return;else r.appendChild(n)}},stopPropagation:function(e){if(!e){return}if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}},preventDefault:function(e){if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopEvent:function(e){e=e||window.event;$jex.preventDefault(e);$jex.stopPropagation(e)},callback:function(e,t){return function(){return t.apply(e,arguments)}},getDocumentWindow:function(e){return e.parentWindow||window},array:{toArray:function(e){if(!e)return[];var t=[],n;for(n=0;n<e.length;n++)t.push(e[n]);return t},indexOf:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return n;return-1},each:function(e,t,n){if(!e)return;for(var r=0,i=e.length;r<i;r++){t.call(n,e[r],r)}},select:function(e,t){if(!e)return[];var n=[],r,i;for(r=0,i=e.length;r<i;r++){if(t(e[r]))n.push(e[r])}return n},copy:function(e,t,n,r){var i=n||0,s=r||e.length;for(;i<s;++i){t.push(e[i])}},remove:function(e,t,n){var r=0,i,s;for(i=0,s=e.length;i<s;i++){if(e[i]===t||n&&e[i]==t){e.splice(i--,1);r++}}return r},map:function(e,t,n){if(typeof e.map==="function"){return e.map(t,n)}var r=e.length;var i=new Array(r);for(var s=0;s<r;s++){if(s in e){i[s]=t.call(n,e[s],s,e)}}return i},some:function(e,t,n){if(typeof e.some==="function"){return e.some(t,n)}for(var r=0,i=e.length;r<i;r++){if(r in e&&callback.call(n,e[r],r,e)){return true}}return false}},hash:{each:function(e,t){for(var n in e){t(n,e[n])}}},each:function(e,t){if(e instanceof Array){this.array.each(e,t)}else{this.hash.each(e,t)}},$continue:new Object,$break:new Object,foreach:function(e,t){var n=null;if(e instanceof Array){for(var r=0;r<e.length;r++){var i=e[r];n=t(i,r);if(n==$jex.$continue){continue}if(n==$jex.$break){break}}}else{var r=0;for(var s in e){var i=e[s];n=t(i,r,s);if(n==$jex.$continue){continue}if(n==$jex.$break){break}r++}}return n},event:{doclick:function(e){var t=document.getElementById(e);if(document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",true,false);t.dispatchEvent(n)}else if(document.createEventObject){t.fireEvent("onclick")}},add:function(e,t,n){},remove:function(e){},bind:function(e,t,n){var r=e==window&&t=="unload";if(e.addEventListener){var i=false;if(t=="focusin"){t="focus";i=true}else if(t=="focusout"){t="blur";i=true}e.addEventListener(t,n,i);n=this.add(e,t,n,i?4:1,r)}else if(e.attachEvent){n=$jex.callback(e,n);e.attachEvent("on"+t,n);n=this.add(e,t,n,2,r)}else{e["on"+t]=n;n=this.add(e,t,n,3,r)}return n},bindDom:function(e,t,n,r){return this.bind(e,t,function(e){if(!e.target){e.target=e.srcElement}r.call(n,e,this)})},stop:function(e,t){this.bind(e,t,function(e){$jex.stopEvent(e);return false})},trigger:function(e,t,n){}},element:{hide:function(e){if(!e)return;e.style.display="none";return e},show:function(e){if(!e)return;e.style.display="block";return e},visible:function(e){if(!e)return false;return e.style.display!="none"},toggle:function(e){for(var e=arguments[0],t=0,n=arguments.length;t<n;t++,e=arguments[t]){e=$jex.$(e);if(!e)continue;if($jex.element.visible(e))$jex.element.hide(e);else $jex.element.show(e)}}}};$jex.createXMLHttpRequest=$jex.exec(function(){var e=0,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return function(){for(var n=e;n<t.length;n++){try{e=n;return t[n]()}catch(r){}}return $jex.VOIDFUNC}});$jex.exec(function(){var e=navigator.userAgent,t;if(/WebKit|KHTML/.test(e)){$jex.browser="safari";$jex.safari=1}t=e.match(/AppleWebKit\/([^\s]*)/);if(t&&t[1]){$jex.safari=$jex.toFloat(t[1]);if(/ Mobile\//.test(e)){$jex.mobile="Apple"}else{t=e.match(/NokiaN[^\/]*/);if(t)$jex.mobile=t[0]}t=e.match(/AdobeAIR\/([^\s]*)/);if(t)$jex.air=t[0]}else{t=e.match(/Opera[\s\/]([^\s]*)/);if(t&&t[1]){$jex.opera=$jex.toFloat(t[1]);$jex.browser="opera";t=e.match(/Opera Mini[^;]*/);if(t)$jex.mobile=t[0]}else{t=e.match(/MSIE\s([^;]*)/);if(t&&t[1]){$jex.browser="ie";$jex.ie=$jex.toFloat(t[1])}else{t=e.match(/Gecko\/([^\s]*)/);if(t){$jex.browser="gecko";$jex.gecko=1;t=e.match(/rv:([^\s\)]*)/);if(t&&t[1]){$jex.gecko=$jex.toFloat(t[1])}}}}}return false});$jex.exec(function(){var e=-1;$jex.boxModel=function(){if(e!==-1)return e;var t=document.createElement("div");t.style.width=t.style.paddingLeft="1px";document.body.appendChild(t);e=t.offsetWidth===2;document.body.removeChild(t).style.display="none";return e};if(window.location.hostname.indexOf("local")>=0||window.location.search.indexOf("debug=true")>0){$jex.isdebug=true}});$jex.exec(function(){function s(){if(e)return;var s=document.body,o=document.createElement("div"),u,a,f,l,c,h,p=s.style.marginTop,d='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';c={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(h in c)o.style[h]=c[h];o.innerHTML=d;s.insertBefore(o,s.firstChild);u=o.firstChild,a=u.firstChild,l=u.nextSibling.firstChild.firstChild;t=a.offsetTop!==5;n=l.offsetTop===5;u.style.overflow="hidden",u.style.position="relative";r=a.offsetTop===-5;s.style.marginTop="1px";i=s.offsetTop===0;s.style.marginTop=p;s.removeChild(o);e=true}var e=false,t,n,r,i;if(document.documentElement["getBoundingClientRect"])$jex.offset=function(e){if(e===e.ownerDocument.body)return $jex.bodyOffset(e);var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,u=t.top+(self.pageYOffset||$jex.boxModel&&i.scrollTop||r.scrollTop)-s,a=t.left+(self.pageXOffset||$jex.boxModel&&i.scrollLeft||r.scrollLeft)-o;return{top:u,left:a}};else $jex.offset=function(i){if(i===i.ownerDocument.body)return $jex.bodyOffset(i);e||s();var i=i,o=i.offsetParent,u=i,a=i.ownerDocument,f,l=a.documentElement,c=a.body,h=a.defaultView,p=h.getComputedStyle(i,null),d=i.offsetTop,v=i.offsetLeft;while((i=i.parentNode)&&i!==c&&i!==l){f=h.getComputedStyle(i,null);d-=i.scrollTop,v-=i.scrollLeft;if(i===o){d+=i.offsetTop,v+=i.offsetLeft;if(t&&!(n&&/^t(able|d|h)$/i.test(i.tagName)))d+=parseInt(f.borderTopWidth,10)||0,v+=parseInt(f.borderLeftWidth,10)||0;u=o,o=i.offsetParent}if(r&&f.overflow!=="visible")d+=parseInt(f.borderTopWidth,10)||0,v+=parseInt(f.borderLeftWidth,10)||0;p=f}if(p.position==="relative"||p.position==="static")d+=c.offsetTop,v+=c.offsetLeft;if(p.position==="fixed")d+=Math.max(l.scrollTop,c.scrollTop),v+=Math.max(l.scrollLeft,c.scrollLeft);return{top:d,left:v}};$jex.bodyOffset=function(){e||s();var t=body.offsetTop,n=body.offsetLeft;return{top:t,left:n}};$jex.pointerX=function(e){return e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},$jex.pointerY=function(e){return e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},$jex.getPageSize=function(){var e,t;if(window.innerHeight&&window.scrollMaxY){e=document.body.scrollWidth;t=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;t=document.body.scrollHeight}else{e=document.body.offsetWidth;t=document.body.offsetHeight}var n,r;if(self.innerHeight){n=self.innerWidth;r=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){n=document.documentElement.clientWidth;r=document.documentElement.clientHeight}else if(document.body){n=document.body.clientWidth;r=document.body.clientHeight}if(t<r){pageHeight=r}else{pageHeight=t}if(e<n){pageWidth=n}else{pageWidth=e}return{pageWidth:pageWidth,pageHeight:pageHeight,windowWidth:n,windowHeight:r}}});$jex.exec(function(){function setObjectValue(e,t,n){if(!e[t])e[t]=n;else if(e[t]instanceof Array){var r=e[t];if(n instanceof Array){for(var i=0;i<n.length;i++)r.push(n[i])}else e[t].push(n)}else e[t]=[e[t],n]}function getEventStack(e,t,n){var r,i=e.__x_;if(i){r=i[t];if(!r){r=[];if(n)i[t]=r}}else{r=[];if(n){e.__x_={};e.__x_[t]=r}}return r}function getEventStackCopy(e,t){var n=[],r=e.__x_;if(r){if(t){if(r[t])$jex.array.copy(r[t],n)}else{$jex.array.each(r,function(e,t){$jex.arraycopy(t,n)})}}return n}function EventListener(e,t,n,r){this.elem=e;this.name=t;this.handler=n;this.type=r;this.refer=-1;getEventStack(e,t,true).push(this)}var readObject=$jex.readObject=function(el,target,id){var obj,text;var childs=el.getAttribute("jxChilds")||!target;if(text=el.getAttribute("jxObject")){obj=eval("({"+text+"});")}else if(text=el.getAttribute("jxValue")){if(_Rp$(text,"%."))obj=el.getAttribute(text.substring(2));else obj=text}else if(!childs)obj=el.innerHTML;else obj={};if(childs=="1"){var els=el.childNodes;for(var i=0;i<els.length;i++){if(els[i].nodeType==1){var _id=els[i].getAttribute("jxc");if(_id)readObject(els[i],obj,_id)}}}if(id==".")asd=obj;if(target&&id){if(id==".")for(var i in obj)setObjectValue(target,i,obj[i]);else setObjectValue(target,id,obj)}return obj};var events=[];var bindingArr="blur,focus,load,resize,scroll,unload,click,"+"mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,"+"change,select,submit,keydown,keypress,keyup,error";var bindingEvent={keypress:function(e,t,n,r){return $jex.event.bindDom(e,$jex.ie||$jex.safari?"keydown":"keypress",t,r)}};$jex.event.binding=function(e,t,n,r){if(!e){return}if(arguments.length==3){r=n;n=t;t=e}if(bindingArr.indexOf(n.toLowerCase())<0){return $jex.event.add(t,n,r)}else{if(!bindingEvent[n]){return $jex.event.bindDom(e,n,t,r)}else{return bindingEvent[n](e,t,n,r)}}};$jex.event.addEx=function(e,t,n,r,i){for(var s=0,o=e.length;s<o;s++){var u=e[s];$jex.event.add(u,t,n,r,i)}};$jex.event.add=function(e,t,n,r,i){e=new EventListener(e,t,n,r);if(!i){events.push(e);e.refer=events.length-1}return e};$jex.event.remove=function(e){e.remove();var t=e.refer;if(!(t<0)){var n=events.pop();if(t<events.length){events[t]=n;n.refer=t}e.refer=-1}};$jex.event.clear=function(e,t){$jex.array.each(getEventStackCopy(e,t),$jex.event.remove)};$jex.event.trigger=function(e,t,n){$jex.console.info("[事件触发] name:",t,", elem:",e,"  , arg:",n);var r=[];$jex.array.copy(arguments,r,2);this.triggerParam(e,t,r)};$jex.event.triggerParam=function(e,t,n){$jex.array.each(getEventStackCopy(e,t),function(t){t.apply(e,n)})};$jex.event.click=function(e,t){$jex.event.binding($jex.$(e),"click",function(e){t(e);$jex.stopEvent(e)})};$jex.event.within=function(e,t){var n=typeof event!="undefined"?event.srcElement:t.target;var r=false;while(n){r=n==e;if(r)break;n=n.parentNode}return r};$jex.errorStack=[];window.onerror=function(e){var t=arguments[0]||"";var n=arguments[1]||"";var r=arguments[2]||"";var i=new Image;i.src="//log.flight.qunar.com/e.gif?emuniquemik="+t+"|"+n+"|"+r;i.onload=function(){i=null};e.toString=$jex.errToString;$jex.console.error(e)};EventListener.prototype.remove=function(){if(this.elem){switch(this.type){case 1:this.elem.removeEventListener(this.name,this.handler,false);break;case 4:this.elem.removeEventListener(this.name,this.handler,true);break;case 2:this.elem.detachEvent("on"+this.name,this.handler);break;case 3:this.elem["on"+this.name]=null;break}$jex.array.remove(getEventStack(this.elem,this.name),this);this.elem=this.handler=null}};EventListener.prototype.apply=function(e,t){return this.handler.apply(e,t)}});$jex.exec(function(){function ScriptRequest(e){if(e.funcName)this.funcName=e.funcName;this.callbackName=e.callbackName||"callback";this.doc=e.doc||document;this.win=$jex.getDocumentWindow(this.doc);if(e.onerror)$jex.event.add(this,"error",e.onerror);if(e.ontimeout)$jex.event.add(this,"timeout",e.ontimeout);if(e.oncancel)$jex.event.add(this,"cancel",e.oncancel);if(e.oncomplete)$jex.event.add(this,"complete",e.oncomplete)}ScriptRequest.loadScript=function(e,t){t=t||document;var n=t.createElement("script");n.type="text/javascript";n.src=e;t.getElementsByTagName("head")[0].appendChild(n);return n};ScriptRequest.prototype.send=function(e,t){var n=this.callID=this.funcName?this.funcName:"XQScript_"+$jex.globalID();if(e.indexOf("?")==-1)e=e+"?";e+="&"+this.callbackName+"="+n;var r=this;var i=this.win;var s;i[n]=function(){if(s){window.clearTimeout(s);s=null}r.release();i[n]=null;$jex.event.triggerParam(r,"complete",$jex.array.toArray(arguments))};if(t&&t>0){s=window.setTimeout(function(){r.release();$jex.event.trigger(r,"timeout")},t)}this.searchPort=ScriptRequest.loadScript(e,this.doc)};ScriptRequest.prototype.release=function(){if(this.searchPort){$jex.removeElement(this.searchPort);this.searchPort=null;this.win[this.callID]=$jex.VOIDFUNC;return true}return false};ScriptRequest.prototype.cancel=function(){if(this.release())$jex.event.trigger(this,"cancel")};$jex.scriptRequest=ScriptRequest;$jex.jsonp=function(e,t,n,r){if(arguments.length==2&&typeof t=="function"){n=t;t={}}r=r||{};r.oncomplete=n;var i=r.timeout||{};if(e.indexOf("?")==-1)e=e+"?";for(var s in t){e+="&"+s+"="+encodeURIComponent(t[s])}var o=new ScriptRequest(r);o.send(e);if(i.time&&i.time>0){window.setTimeout(function(){o.cancel();i.func()},i.time)}return o};$jex.ajax=function(url,data,successhandler,options){options=options||{};if($jex.isdebug&&$jex.gecko){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}catch(e){alert("Permission UniversalBrowserRead denied.")}}var request=$jex.createXMLHttpRequest();request.onreadystatechange=function(){if(request.readyState==4){if(request.status>=200&&request.status<300||request.status==304){var _result={result:{}};try{var str=request.responseText;if(str){str=$jex.trim(str);if(str.charAt(0,1)=="{"){str="("+str+")"}_result=eval(str);successhandler(_result)}else{if(options.onerror){options.onerror(request)}$jex.console.error(url,"返回值为空")}}catch(e){if(options.onerror){options.onerror(e)}e.toString=$jex.errToString;$jex.console.error(url,e)}}else{if(options.onerror){options.onerror()}}}};var token=Math.floor(Math.random()*1e5);data._token=token;if(url.indexOf("?")==-1)url=url+"?";var method=options.method||"GET";if(method==="GET"){request.open("GET",url+"&"+$jex.toQueryString(data),true);if(options&&options.beforeSend&&typeof options.beforeSend=="function"){options.beforeSend(request)}request.send(null)}else if(method==="POST"){request.open("POST",url,true);request.setRequestHeader("Content-type",options.contentType||"applacation/json");if(options&&options.beforeSend&&typeof options.beforeSend=="function"){options.beforeSend(request)}request.send(JSON?JSON.stringify(data):"")}$jex.console.info("[接口调用 token=",token,"]"," url:",url,data,successhandler,options,request);return request};var timeMap={};var _consoleStack=[];var _filter={INFO:1,WARN:1};$jex.errToString=function(){var e=["[ERROR]"];for(var t in this){if(typeof this[t]=="function")continue;e.push(t,":",this[t],"<br/>")}return e.join(" ")};var _pushToStack=function(e){if(!_filter[e]){return function(){_consoleStack.push(arguments)}}else{return $jex.VOIDFUNC}};$jex.console={info:new _pushToStack("INFO"),error:new _pushToStack("ERROR"),warn:new _pushToStack("WARN"),time:new _pushToStack("TIME"),trace:new _pushToStack("TRACE")};if($jex.isdebug){}$jex.console.start=function(e){timeMap[e]=new Date};$jex.console.end=function(e){if(timeMap[e]){$jex.console.time("[TIME]",e,":",new Date-timeMap[e]);delete timeMap[e]}};$jex.console.output=function(){var e=[];for(var t=0;t<_consoleStack.length;t++){var n=[];var r=_consoleStack[t];for(var i=0;i<r.length;i++){n.push(r[i])}e.push(n.join(""))}var s=$jex.$("divDebugConsole");if(s){s.innerHTML=e.join("<br/>");$jex.element.show(s)}else{alert(e.join("\r\n"))}};$jex.event.binding(document,"keydown",function(e){if(e.keyCode==121&&e.ctrlKey&&e.altKey||e.keyCode==77&&e.ctrlKey&&e.altKey){$jex.console.output()}})});UIObject.prototype.isempty=function(){return this._content_.length==0};UIObject.prototype.clear=function(){this._content_=[];this._childrens_=[]};UIObject.prototype.newid=function(e){return e+this._GID_};UIObject.prototype.tpls=function(e){var t=this._content_;var n=this._childrens_;var r=this._GID_;for(var i=0;i<arguments.length;i++){var s=arguments[i];if(s!=null){if(s.indexOf("{#")<0)t.push(s);else{if(s._XGUI_==true){n.push(s);t.push(s)}else{t.push(s.replace(this._tplsreg,"$1"+r))}}}}return this};UIObject.prototype.append=function(e){var t=this._content_;var n=this._childrens_;var r=this._GID_;for(var i=0;i<arguments.length;i++){var s=arguments[i];if(s!=null){if(i%2==0)t.push(s);else{if(s._XGUI_==true){n.push(s);t.push(s)}else t.push(' id="',s,r,'"')}}}return this};UIObject.prototype.text=function(e){var t=this._content_;for(var n=0;n<arguments.length;n++)t.push(arguments[n]);return this};UIObject.prototype.getDomNode=function(e){return $jex.$(e+this._GID_,this._document_)};UIObject.prototype.initDocument=function(e){this._document_=e;var t=this._childrens_;for(var n=0;n<t.length;n++)t[n].initDocument(e);this.initialize()};UIObject.prototype.write=function(e){var t=this.toString();if(t){e.innerHTML=t;this.initDocument($jex.doc(e))}else{e.innerHTML=""}};UIObject.prototype.toString=function(){return this._content_.join("")};UIObject.prototype.initialize=$jex.VOIDFUNC;$jex.List=function(e){this._map={};this._size=0;this.addRange(e)};$jex.exec(function(){var e=new Object;$jex.List.prototype.addRange=function(t){var n=this._size;if(t){var r=this._map;for(var i in t){var s=t[i];r[i]=s==null?e:s;n++}}this._size=n};$jex.List.prototype.firstkey=function(){var e=this.keys();if(e.length==0)return null;return e[0]};$jex.List.prototype.first=function(){var e=this.keys();if(e.length==0)return null;return this.get(e[0])};$jex.List.prototype.get=function(t){var n=this._map[t];return n===e?null:n};$jex.List.prototype.put=function(t,n){var r=this._map[t];if(typeof r==="undefined")this._size++;if(n==null)n=e;this._map[t]=n;return r};$jex.List.prototype.keys=function(){var e=[];var t=this._map;for(var n in t)e.push(n);return e};$jex.List.prototype.contains=function(e){return this._map[e]!=null};$jex.List.prototype.remove=function(t){var n=this._map[t];if(n!=null)this._size--;if(n===e)n=null;delete this._map[t];return n};$jex.List.prototype.size=function(){return this._size};$jex.List.prototype.clear=function(){this._map={};this._size=0};$jex.List.prototype.toArray=function(){var t=this._map;var n=[];for(var r in t){v=t[r];if(v===e)v=null;n.push([r,v])}return n};$jex.List.prototype.toString=function(){var e=[];var t=this._map;for(var n in t){e.push(n+": "+t[n])}return e.join("\n")}});ActionDelay.prototype.reset=function(e){this.cancel();this.timer=setTimeout(e,this.delay)};ActionDelay.prototype.cancel=function(){if(this.timer)clearTimeout(this.timer)};ActionFlow.prototype.add=function(e,t,n){var r=this.actions[t];if(r&&r.order<e)return;this.actions[t]={order:e,key:t,func:n};return this};ActionFlow.prototype.remove=function(e){delete this.actions[e]};ActionFlow.prototype.start=function(){if(this.tid!==null)return;var e=false;for(var t in this.actions){e=true;break}if(!e)return;this.tid=setTimeout($jex.callback(this,this.run),this.interval)};ActionFlow.prototype.run=function(){clearTimeout(this.tid);this.tid=null;var e=this.actions,t=null;for(var n in e){var r=e[n];if(!t||r.order<t.order){t=r;delete e[n]}}if(t==null)return;var i=(new Date).getTime();var s;try{t.func();s="done"}catch(o){s="error:"+o}this.logs.push([i,s,(new Date).getTime()-i,t.key]);this.start()};if($jex.ie>5&&$jex.ie<7){try{(function(){document.execCommand("BackgroundImageCache",false,true);$jex.addClassName(document.getElementsByTagName("html")[0],"jx-ie"+$jex.ie*10)})()}catch(e){}}(function(){var e=null;$jex.scrollTo=function(t,n){if(!t)return;if(e){clearInterval(e)}n=n||0;var r=$jex.offset(t);var i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;var s=Math.floor(r.left);var o=Math.floor(r.top);window.scrollTo(s,o)};$jex.define=function(e){return typeof e!="undefined"&&e!=null};$jex.extend=function(){for(var e=1,t=arguments.length;e<t;e++)$jex.merge(arguments[0],arguments[e]);return arguments[0]};$jex.element.compareDocumentPosition=function(e,t){return e.compareDocumentPosition?e.compareDocumentPosition(t):e.contains?(e!=t&&e.contains(t)&&16)+(e!=t&&t.contains(e)&&8)+(e.sourceIndex>=0&&t.sourceIndex>=0?(e.sourceIndex<t.sourceIndex&&4)+(e.sourceIndex>t.sourceIndex&&2):1):0};$jex.array.inArray=function(e,t){return $jex.array.indexOf(t,e)};$jex.array.xcopy=function(){var e=-1,t=arguments.length,n,r=arguments[t-1];if(typeof arguments[t-1]=="number"){var i=[r,0];r=arguments[--t-1];while(++e<t-1)arguments.callee(arguments[e],i);Array.prototype.splice.apply(r,i)}else while(++e<t-1)for(var s=0,o=arguments[e].length;s<o;s++)r.push(arguments[e][s]);return r};$jex.hash.size=function(e){var t=0;$jex.hash.each(e,function(){t++});return t};$jex.hash.first=function(e){for(var t in e){return e[t]}return null};$jex.logHelp={};$jex.log=function(e){try{var t=Math.floor(Math.random()*1e4);var n="http://log.flight.qunar.com/l.gif?_token="+t+"&";var r=new Image;if(e){for(var i in e){n+=encodeURIComponent(i)+"="+e[i]+"&"}n=n.substr(0,n.length-1);r.src=n}}catch(s){}};var t=null;$jex.cookie={reset:function(){t=$jex.cookie._getCookieHash()},_getCookieHash:function(){var e=document.cookie.split(";");var t={};for(var n=0;n<e.length;n++){if(e[n].indexOf("=")!=-1)t[$jex.trim(e[n].split("=")[0])]=$jex.trim(unescape(e[n].split("=")[1]))}return t},get:function(e){if(!t){t=$jex.cookie._getCookieHash()}return t[e]}};$jex.merge($jex.event,{_readyList:[],_isReady:false,_bindReady:function(){if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);$jex.event._ready()},false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);$jex.event._ready()}});if(document.documentElement.doScroll&&window==window.top)(function(){if($jex.event._isReady)return;try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}$jex.event._ready()})()}$jex.event.bind(window,"load",$jex.event._ready)},ready:function(e){if($jex.event._isReady){e()}else{$jex.event._readyList.push(e)}},_ready:function(){if(!$jex.event._isReady){$jex.event._isReady=true;for(var e=0,t=$jex.event._readyList.length;e<t;e++)$jex.event._readyList[e].call(document)}}});$jex.event._bindReady();$jex.merge($jex.date={},{_prefix:function(e,t){t=t||2;e=e+"";while(e.length<t){e="0"+e}return e},_format:{yyyy:function(e){return e.getFullYear().toString()},MM:function(e){return $jex.date._prefix(e.getMonth()+1)},M:function(e){return e.getMonth()+1+""},HH:function(e){return $jex.date._prefix(e.getHours())},H:function(e){return e.getHours()},dd:function(e){return $jex.date._prefix(e.getDate())},d:function(e){return e.getDate()},mm:function(e){return $jex.date._prefix(e.getMinutes())},m:function(e){return e.getMinutes()},m:function(e){return e.getMinutes()},ss:function(e){return $jex.date._prefix(e.getSeconds())},s:function(e){return e.getSeconds()}},format:function(e,t){switch(t){case"yyyy.M.d":return[$jex.date._format["yyyy"](e),$jex.date._format["M"](e),$jex.date._format["d"](e)].join(".");case"M月d日":return[$jex.date._format["M"](e)+"月",$jex.date._format["d"](e)+"日"].join("");case"MM月dd日":return[$jex.date._format["MM"](e)+"月",$jex.date._format["dd"](e)+"日"].join("-");case"yyyy-MM-dd HH:mm:ss":return[$jex.date._format["yyyy"](e),$jex.date._format["MM"](e),$jex.date._format["dd"](e)].join("-")+" "+[$jex.date._format["HH"](e),$jex.date._format["mm"](e),$jex.date._format["ss"](e)].join(":")}return[$jex.date._format["yyyy"](e),$jex.date._format["MM"](e),$jex.date._format["dd"](e)].join("-")},parse:function(e){if(!e||typeof e!="string")return e;return new Date(e.replace(/-/g,"/"))},add:function(e,t,n){var r=e;if(n==null){n=typeof e=="string"}if(typeof e=="string"){r=new Date(e.replace(/-/g,"/"))}var i=new Date(r.getTime()+t*864e5);if(n){return $jex.date.format(i)}else{return i}},getMinute:function(e){var t=e.split(":");var n=parseInt(t[0],10);n=n==0?24:n;var r=parseInt(t[1],10);return n*60+r},getTime:function(e){return parseInt(e.replace(":",""),10)},distance:function(e,t){if(!(e instanceof Date)){e=new Date(e)}e=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(!(t instanceof Date)){t=new Date(t)}t=new Date(t.getFullYear(),t.getMonth(),t.getDate());return(t.getTime()-e.getTime())/(24*60*60*1e3)}});$jex.template=function(e,t,n){var r={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var i=/\\|'|\r|\n|\u2028|\u2029/g;var s=function(e){return"\\"+escapes[e]};if(!t&&n)t=n;t=$jex.extend({},t,r);var o=RegExp([(t.escape||noMatch).source,(t.interpolate||noMatch).source,(t.evaluate||noMatch).source].join("|")+"|$","g");var u=0;var a="__p+='";e.replace(o,function(t,n,r,o,f){a+=e.slice(u,f).replace(i,s);u=f+t.length;if(n){a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}else if(r){a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}else if(o){a+="';\n"+o+"\n__p+='"}return t});a+="';\n";if(!t.variable)a="with(obj||{}){\n"+a+"}\n";a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var f=new Function(t.variable||"obj","$jex",a)}catch(l){l.source=a;throw l}var c=function(e){return f.call(this,e,$jex)};var h=t.variable||"obj";c.source="function("+h+"){\n"+a+"}";return c};$jex.merge($jex.web={},{parseQueryString:function(e){var t=/([^\?|\&]\w+)=([^\?|\&]+)/ig;var n={};if(e){if(e.charAt(0)=="?")e=e.substr(1);while(true){if(r=t.exec(e)){n[r[1]]=r[2]}else{break}}}return n}});$jex.web.parameters=$jex.web.parseQueryString(window.location.search)})();(function(){$jex.lightbox={overlay:null,content:null,a:{display:"none",left:"0"},b:{display:"none"},c:{display:"block",left:"50%"},d:{display:"block"},binded:false,toBind:function(){$jex.lightbox.show(null,null,1)},cache:{},gid:1,expand:"lightbox_temp",removeData:function(e){var t=e[this.expand];if(!t)return;try{delete e[this.expand]}catch(n){if(e.removeAttribute)e.removeAttribute(this.expand)}delete this.cache[t]},data:function(e,t){var n=e[this.expand]?e[this.expand]:e[this.expand]=""+this.gid++;if(t!=undefined)this.cache[n]=t;return this.cache[n]},_place:function(e){var t=document.compatMode&&document.compatMode.toLowerCase()=="css1compat"?document.documentElement:document.body;if(e&2){var n=(t.clientHeight-this.content.offsetHeight)/2;var r=Math.floor(this.content.offsetWidth/2);$jex.hash.each($jex.extend({},this.c,{top:(n>0?n:0)+(window.pageYOffset||t.scrollTop)+"px",marginLeft:0-r+"px"}),function(e,t){$jex.lightbox.content.style[e]=t})}if(e&1){$jex.hash.each($jex.extend({},this.d,{height:Math.max(t.scrollHeight,t.clientHeight)+"px",width:Math.max(t.scrollWidth,t.clientWidth)+"px"}),function(e,t){$jex.lightbox.overlay.style[e]=t})}},show:function(e,t,n){if(!this.overlay){this.overlay=document.body.appendChild(document.createElement("div"));this.content=document.body.appendChild(document.createElement("div"));this.overlay.className="lb_overlay";this.content.className="lb_content"}if(e){this.content.innerHTML=e}if(!this.binded){this.binded=true;var r=$jex.array.xcopy(document.getElementsByTagName("object"),document.getElementsByTagName("select"),document.getElementsByTagName("embed"),[]);$jex.array.each(r,function(e){$jex.lightbox.data(e,e.style.visibility);e.style.visibility="hidden"});if(window.attachEvent)window.attachEvent("onresize",this.toBind);else if(window.addEventListener)window.addEventListener("resize",this.toBind,false)}this.content.style.visibility="hidden";this.content.style.display="block";if(typeof t=="function")t.call(this);this._place(n==null?3:n);this.content.style.visibility="visible";var i=this;if(n==null){setTimeout(function(){$jex.hash.each(i.c,function(e,t){i.content.style[e]=t});$jex.hash.each(i.d,function(e,t){i.overlay.style[e]=t})},50)}var s=$jex.$("msgButton");if(s){$jex.event.click(s,function(){$jex.lightbox.hide()})}},hide:function(){var e=$jex.array.xcopy(document.getElementsByTagName("object"),document.getElementsByTagName("select"),document.getElementsByTagName("embed"),[]);$jex.array.each(e,function(e){e.style.visibility=$jex.lightbox.data(e)||"inherit";$jex.lightbox.removeData(e)});for(var t in this.a)this.content.style[t]=this.a[t];for(var t in this.b)this.overlay.style[t]=this.b[t];if(window.detachEvent)window.detachEvent("onresize",this.toBind);else if(window.removeEventListener)window.removeEventListener("resize",this.toBind,false);this.binded=false}};var e=document.createElement("style");e.type="text/css";var t=".lb_content {display : none ; position : absolute ; z-index:10000 ; left:0 ;}.lb_overlay {display : none ; position : fixed ; *position : absolute ; z-index:10000 ; background-color : #000 ; left : 0px ; top : 0px ; opacity : 0.2 ; filter: Alpha(opacity=20) ;}";if(e.styleSheet)e.styleSheet.cssText=t;else e.appendChild(document.createTextNode(t));document.getElementsByTagName("head")[0].appendChild(e);window.$jex=$jex})();if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();ScriptRequest.loadScript=function(e,t){t=t||document;var n=t.createElement("script");n.type="text/javascript";n.src=e;t.getElementsByTagName("head")[0].appendChild(n);return n};ScriptRequest.prototype.send=function(e,t){var n=this.callID=this.funcName?this.funcName:"XQScript_"+$jex.globalID();if(e.indexOf("?")==-1)e=e+"?";e+="&"+this.callbackName+"="+n;var r=this;var i=this.win;var s;i[n]=function(){if(s){window.clearTimeout(s);s=null}r.release();i[n]=null;$jex.event.triggerParam(r,"complete",$jex.array.toArray(arguments))};if(t&&t>0){s=window.setTimeout(function(){r.release();$jex.event.trigger(r,"timeout")},t)}this.searchPort=ScriptRequest.loadScript(e,this.doc)};ScriptRequest.prototype.release=function(){if(this.searchPort){$jex.removeElement(this.searchPort);this.searchPort=null;this.win[this.callID]=$jex.VOIDFUNC;return true}return false};ScriptRequest.prototype.cancel=function(){if(this.release())$jex.event.trigger(this,"cancel")};(function(e){var t,n,r,i=e.document;if(typeof BOOMR==="undefined"){BOOMR={}}if(BOOMR.version){return}BOOMR.version="0.9";t={beacon_url:"",site_domain:e.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",events:{page_ready:[],page_unload:[],visibility_changed:[],before_beacon:[]},vars:{},disabled_plugins:{},fireEvent:function(e,t){var n,r,i;if(!this.events.hasOwnProperty(e)){return false}i=this.events[e];for(n=0;n<i.length;n++){r=i[n];r[0].call(r[2],t,r[1])}return true},addListener:function(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r)}else if(e.attachEvent){e.attachEvent("on"+t,n)}}};n={utils:{getCookie:function(e){if(!e){return null}e=" "+e+"=";var t,n;n=" "+i.cookie+";";if((t=n.indexOf(e))>=0){t+=e.length;n=n.substring(t,n.indexOf(";",t));return n}return null},setCookie:function(e,n,r,s,o,u){var a="",f,l,c,h="";if(!e){return false}for(f in n){if(n.hasOwnProperty(f)){a+="&"+encodeURIComponent(f)+"="+encodeURIComponent(n[f])}}a=a.replace(/^&/,"");if(r){h=new Date;h.setTime(h.getTime()+r*1e3);h=h.toGMTString()}l=e+"="+a;c=l+(r?"; expires="+h:"")+(s?"; path="+s:"")+(typeof o!=="undefined"?"; domain="+(o!==null?o:t.site_domain):"")+(u?"; secure":"");if(l.length<4e3){i.cookie=c;return a===this.getCookie(e)}return false},getSubCookies:function(e){var t,n,r,i,s={};if(!e){return null}t=e.split("&");if(t.length===0){return null}for(n=0,r=t.length;n<r;n++){i=t[n].split("=");i.push("");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s},removeCookie:function(e){return this.setCookie(e,{},0,"/",null)},pluginConfig:function(e,t,n,r){var i,s=0;if(!t||!t[n]){return false}for(i=0;i<r.length;i++){if(typeof t[n][r[i]]!=="undefined"){e[r[i]]=t[n][r[i]];s++}}return s>0}},init:function(n){var r,s,o=["beacon_url","site_domain","user_ip"];if(!n){n={}}for(r=0;r<o.length;r++){if(typeof n[o[r]]!=="undefined"){t[o[r]]=n[o[r]]}}if(typeof n.log!=="undefined"){this.log=n.log}if(!this.log){this.log=function(e,t,n){}}for(s in this.plugins){if(n[s]&&typeof n[s].enabled!=="undefined"&&n[s].enabled===false){t.disabled_plugins[s]=1;continue}else if(t.disabled_plugins[s]){delete t.disabled_plugins[s]}if(this.plugins.hasOwnProperty(s)&&typeof this.plugins[s].init==="function"){this.plugins[s].init(n)}}if(typeof n.autorun==="undefined"||n.autorun!==false){t.addListener(e,"load",function(){t.fireEvent("page_ready")})}t.addListener(i,"webkitvisibilitychange",function(){t.fireEvent("visibility_changed")});t.addListener(e,"unload",function(){e=null});return this},page_ready:function(){t.fireEvent("page_ready");return this},subscribe:function(n,r,i,s){var o,u,a;if(!t.events.hasOwnProperty(n)){return this}a=t.events[n];for(o=0;o<a.length;o++){u=a[o];if(u[0]===r&&u[1]===i&&u[2]===s){return this}}a.push([r,i||{},s||null]);if(n==="page_unload"){t.addListener(e,"unload",function(){if(r){r.call(s,null,i)}r=s=i=null});t.addListener(e,"beforeunload",function(){if(r){r.call(s,null,i)}r=s=i=null})}return this},addVar:function(e,n){if(typeof e==="string"){t.vars[e]=n}else if(typeof e==="object"){var r=e,i;for(i in r){if(r.hasOwnProperty(i)){t.vars[i]=r[i]}}}return this},removeVar:function(){var e,n;if(!arguments.length){return this}if(arguments.length===1&&Object.prototype.toString.apply(arguments[0])==="[object Array]"){n=arguments[0]}else{n=arguments}for(e=0;e<n.length;e++){if(t.vars.hasOwnProperty(n[e])){delete t.vars[n[e]]}}return this},sendBeacon:function(){var e,n,r,s=0;for(e in this.plugins){if(this.plugins.hasOwnProperty(e)){if(t.disabled_plugins[e]){continue}if(!this.plugins[e].is_complete()){return this}}}t.fireEvent("before_beacon",t.vars);if(!t.beacon_url){return this}n=t.beacon_url+"?v="+encodeURIComponent(BOOMR.version)+"&u="+encodeURIComponent(i.URL.replace(/#.*/,""));for(e in t.vars){if(t.vars.hasOwnProperty(e)){s++;n+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t.vars[e])}}if(s){r=new Image;r.src=n}return this}};var s=function(e){return function(t,n){this.log(t,e,"boomerang"+(n?"."+n:""));return this}};n.debug=s("debug");n.info=s("info");n.warn=s("warn");n.error=s("error");if(e.YAHOO&&e.YAHOO.widget&&e.YAHOO.widget.Logger){n.log=e.YAHOO.log}else if(typeof e.Y!=="undefined"&&typeof e.Y.log!=="undefined"){n.log=e.Y.log}else if(typeof console!=="undefined"&&typeof console.log!=="undefined"){n.log=function(e,t,n){console.log(n+": ["+t+"] ",e)}}for(r in n){if(n.hasOwnProperty(r)){BOOMR[r]=n[r]}}BOOMR.plugins=BOOMR.plugins||{}})(window);(function(e){var t=e.document;BOOMR=BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};var n={complete:false,timers:{},cookie:"RT",cookie_exp:600,strict_referrer:true,navigationStart:undefined,responseStart:undefined,start:function(){var e,n=(new Date).getTime();if(!this.cookie){return this}if(!BOOMR.utils.setCookie(this.cookie,{s:n,r:t.URL.replace(/#.*/,"")},this.cookie_exp,"/",null)){BOOMR.error("cannot set start cookie","rt");return this}e=(new Date).getTime();if(e-n>50){BOOMR.utils.removeCookie(this.cookie);BOOMR.error("took more than 50ms to set cookie... aborting: "+n+" -> "+e,"rt")}return this},initNavTiming:function(){var t,n;if(this.navigationStart){return}n=e.performance||e.msPerformance||e.webkitPerformance||e.mozPerformance;if(n&&n.timing){t=n.timing}else if(e.chrome&&e.chrome.csi){t={navigationStart:e.chrome.csi().startE,responseStart:undefined};BOOMR.addVar("rt.start","csi")}else if(e.gtbExternal){t={navigationStart:e.gtbExternal.startE(),responseStart:undefined};BOOMR.addVar("rt.start","gtb")}if(t){BOOMR.addVar("rt.start","navigation");this.navigationStart=t.navigationStart||undefined;this.responseStart=t.responseStart||undefined}else{BOOMR.warn("This browser doesn't support the WebTiming API","rt")}return}};BOOMR.plugins.RT={init:function(e){n.complete=false;n.timers={};BOOMR.utils.pluginConfig(n,e,"RT",["cookie","cookie_exp","strict_referrer"]);BOOMR.subscribe("page_ready",this.done,null,this);BOOMR.subscribe("page_unload",n.start,null,n);return this},startTimer:function(e,t){if(e){if(e==="t_page"){this.endTimer("t_resp",t)}n.timers[e]={start:typeof t==="number"?t:(new Date).getTime()};n.complete=false}return this},endTimer:function(e,t){if(e){n.timers[e]=n.timers[e]||{};if(typeof n.timers[e].end==="undefined"){n.timers[e].end=typeof t==="number"?t:(new Date).getTime()}}return this},setTimer:function(e,t){if(e){n.timers[e]={delta:t}}return this},done:function(){var e,r,i,s,o={t_done:1,t_resp:1,t_page:1},u=0,a,f,l=[];if(n.complete){return this}n.initNavTiming();if(document.webkitVisibilityState&&document.webkitVisibilityState==="prerender"){this.startTimer("t_load",n.navigationStart);this.endTimer("t_load");this.startTimer("t_prerender",n.navigationStart);this.startTimer("t_postrender");BOOMR.subscribe("visibility_changed",this.done,null,this);return this}this.endTimer("t_done");if(n.responseStart){this.endTimer("t_resp",n.responseStart);if(n.timers.t_load){this.setTimer("t_page",n.timers.t_load.end-n.responseStart)}else{this.setTimer("t_page",(new Date).getTime()-n.responseStart)}}else if(n.timers.hasOwnProperty("t_page")){this.endTimer("t_page")}if(n.timers.hasOwnProperty("t_postrender")){this.endTimer("t_postrender");this.endTimer("t_prerender")}r=i=t.referrer.replace(/#.*/,"");if(n.cookie){s=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(n.cookie));BOOMR.utils.removeCookie(n.cookie);if(s!==null&&typeof s.s!=="undefined"&&typeof s.r!=="undefined"){r=s.r;if(!n.strict_referrer||r===i){e=parseInt(s.s,10)}}}if(e){BOOMR.addVar("rt.start","cookie")}else{e=n.navigationStart}BOOMR.removeVar("t_done","t_page","t_resp","r","r2");for(a in n.timers){if(!n.timers.hasOwnProperty(a)){continue}f=n.timers[a];if(typeof f.delta!=="number"){if(typeof f.start!=="number"){f.start=e}f.delta=f.end-f.start}if(isNaN(f.delta)){continue}if(o.hasOwnProperty(a)){BOOMR.addVar(a,f.delta)}else{l.push(a+"|"+f.delta)}u++}if(u){BOOMR.addVar("r",r);if(i!==r){BOOMR.addVar("r2",i)}if(l.length){BOOMR.addVar("t_other",l.join(","))}}n.timers={};n.complete=true;BOOMR.sendBeacon();return this},is_complete:function(){return n.complete}}})(window);(function(e){var t=e.document;BOOMR=BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};var n=[{name:"image-0.png",size:11483,timeout:1400},{name:"image-1.png",size:40658,timeout:1200},{name:"image-2.png",size:164897,timeout:1300},{name:"image-3.png",size:381756,timeout:1500},{name:"image-4.png",size:1234664,timeout:1200},{name:"image-5.png",size:4509613,timeout:1200},{name:"image-6.png",size:9084559,timeout:1200}];n.end=n.length;n.start=0;n.l={name:"image-l.gif",size:35,timeout:1e3};var r={base_url:"images/",timeout:15e3,nruns:5,latency_runs:10,user_ip:"",cookie_exp:7*86400,cookie:"BA",results:[],latencies:[],latency:null,runs_left:0,aborted:false,complete:false,running:false,ncmp:function(e,t){return e-t},iqr:function(e){var t=e.length-1,n,r,i,s=[],o;n=(e[Math.floor(t*.25)]+e[Math.ceil(t*.25)])/2;r=(e[Math.floor(t*.75)]+e[Math.ceil(t*.75)])/2;i=(r-n)*1.5;t++;for(o=0;o<t&&e[o]<r+i;o++){if(e[o]>n-i){s.push(e[o])}}return s},calc_latency:function(){var e,t,n=0,r=0,i,s,o,u,a;a=this.iqr(this.latencies.sort(this.ncmp));t=a.length;BOOMR.debug(a,"bw");for(e=1;e<t;e++){n+=a[e];r+=a[e]*a[e]}t--;i=Math.round(n/t);o=Math.sqrt(r/t-n*n/(t*t));u=(1.96*o/Math.sqrt(t)).toFixed(2);o=o.toFixed(2);t=a.length-1;s=Math.round((a[Math.floor(t/2)]+a[Math.ceil(t/2)])/2);return{mean:i,median:s,stddev:o,stderr:u}},calc_bw:function(){var e,t,r=0,i,s=[],o=[],u=0,a=0,f=0,l=0,c,h,p,d,v,m,g,y,b,w,E;for(e=0;e<this.nruns;e++){if(!this.results[e]||!this.results[e].r){continue}i=this.results[e].r;b=0;for(t=i.length-1;t>=0&&b<3;t--){if(typeof i[t]==="undefined"){break}if(i[t].t===null){continue}r++;b++;w=n[t].size*1e3/i[t].t;s.push(w);E=n[t].size*1e3/(i[t].t-this.latency.mean);o.push(E)}}BOOMR.debug("got "+r+" readings","bw");BOOMR.debug("bandwidths: "+s,"bw");BOOMR.debug("corrected: "+o,"bw");if(s.length>3){s=this.iqr(s.sort(this.ncmp));o=this.iqr(o.sort(this.ncmp))}else{s=s.sort(this.ncmp);o=o.sort(this.ncmp)}BOOMR.debug("after iqr: "+s,"bw");BOOMR.debug("corrected: "+o,"bw");r=Math.max(s.length,o.length);for(e=0;e<r;e++){if(e<s.length){u+=s[e];a+=Math.pow(s[e],2)}if(e<o.length){f+=o[e];l+=Math.pow(o[e],2)}}r=s.length;c=Math.round(u/r);h=Math.sqrt(a/r-Math.pow(u/r,2));p=Math.round(1.96*h/Math.sqrt(r));h=Math.round(h);r=s.length-1;d=Math.round((s[Math.floor(r/2)]+s[Math.ceil(r/2)])/2);r=o.length;v=Math.round(f/r);m=Math.sqrt(l/r-Math.pow(f/r,2));g=(1.96*m/Math.sqrt(r)).toFixed(2);m=m.toFixed(2);r=o.length-1;y=Math.round((o[Math.floor(r/2)]+o[Math.ceil(r/2)])/2);BOOMR.debug("amean: "+c+", median: "+d,"bw");BOOMR.debug("corrected amean: "+v+", "+"median: "+y,"bw");return{mean:c,stddev:h,stderr:p,median:d,mean_corrected:v,stddev_corrected:m,stderr_corrected:g,median_corrected:y}},defer:function(e){var t=this;return setTimeout(function(){e.call(t);t=null},10)},load_img:function(e,t,r){var i=this.base_url+n[e].name+"?t="+(new Date).getTime()+Math.random(),s=0,o=0,u=new Image,a=this;u.onload=function(){u.onload=u.onerror=null;u=null;clearTimeout(s);if(r){r.call(a,e,o,t,true)}a=r=null};u.onerror=function(){u.onload=u.onerror=null;u=null;clearTimeout(s);if(r){r.call(a,e,o,t,false)}a=r=null};s=setTimeout(function(){if(r){r.call(a,e,o,t,null)}},n[e].timeout+Math.min(400,this.latency?this.latency.mean:400));o=(new Date).getTime();u.src=i},lat_loaded:function(e,t,n,r){if(n!==this.latency_runs+1){return}if(r!==null){var i=(new Date).getTime()-t;this.latencies.push(i)}if(this.latency_runs===0){this.latency=this.calc_latency()}this.defer(this.iterate)},img_loaded:function(e,t,r,i){if(r!==this.runs_left+1){return}if(this.results[this.nruns-r].r[e]){return}if(i===null){this.results[this.nruns-r].r[e+1]={t:null,state:null,run:r};return}var s={start:t,end:(new Date).getTime(),t:null,state:i,run:r};if(i){s.t=s.end-s.start}this.results[this.nruns-r].r[e]=s;if(e>=n.end-1||typeof this.results[this.nruns-r].r[e+1]!=="undefined"){BOOMR.debug(this.results[this.nruns-r],"bw");if(r===this.nruns){n.start=e}this.defer(this.iterate)}else{this.load_img(e+1,r,this.img_loaded)}},finish:function(){if(!this.latency){this.latency=this.calc_latency()}var e=this.calc_bw(),t={bw:e.median_corrected,bw_err:parseFloat(e.stderr_corrected,10),lat:this.latency.mean,lat_err:parseFloat(this.latency.stderr,10),bw_time:Math.round((new Date).getTime()/1e3)};BOOMR.addVar(t);if(!isNaN(t.bw)){BOOMR.utils.setCookie(this.cookie,{ba:Math.round(t.bw),be:t.bw_err,l:t.lat,le:t.lat_err,ip:this.user_ip,t:t.bw_time},this.user_ip?this.cookie_exp:0,"/",null)}this.complete=true;BOOMR.sendBeacon();this.running=false},iterate:function(){if(this.aborted){return false}if(!this.runs_left){this.finish()}else if(this.latency_runs){this.load_img("l",this.latency_runs--,this.lat_loaded)}else{this.results.push({r:[]});this.load_img(n.start,this.runs_left--,this.img_loaded)}},setVarsFromCookie:function(e){var t=parseInt(e.ba,10),n=parseFloat(e.be,10),r=parseInt(e.l,10)||0,i=parseFloat(e.le,10)||0,s=e.ip.replace(/\.\d+$/,"0"),o=parseInt(e.t,10),u=this.user_ip.replace(/\.\d+$/,"0"),a=Math.round((new Date).getTime()/1e3);if(s===u&&o>=a-this.cookie_exp){this.complete=true;BOOMR.addVar({bw:t,lat:r,bw_err:n,lat_err:i});return true}return false}};BOOMR.plugins.BW={init:function(e){var t;BOOMR.utils.pluginConfig(r,e,"BW",["base_url","timeout","nruns","cookie","cookie_exp"]);if(e&&e.user_ip){r.user_ip=e.user_ip}n.start=0;r.runs_left=r.nruns;r.latency_runs=10;r.results=[];r.latencies=[];r.latency=null;r.complete=false;r.aborted=false;BOOMR.removeVar("ba","ba_err","lat","lat_err");t=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(r.cookie));if(!t||!t.ba||!r.setVarsFromCookie(t)){BOOMR.subscribe("page_ready",this.run,null,this)}return this},run:function(){if(r.running||r.complete){return this}if(e.location.protocol==="https:"){BOOMR.info("HTTPS detected, skipping bandwidth test","bw");r.complete=true;return this}r.running=true;setTimeout(this.abort,r.timeout);r.defer(r.iterate);return this},abort:function(){r.aborted=true;if(r.running){r.finish()}return this},is_complete:function(){return r.complete}}})(window);CACTI_monitoring.prototype._init=function(){if(typeof BOOMR=="undefined"){$jex.console.error("未引用BOOMR!");return}if(!this._url||!this._pageId){$jex.console.error("CACTI_monitoring 缺少配置，初始化失败!");return}var e=this;this.isStart=true;BOOMR.init({beacon_url:this._url,autorun:false,RT:{enabled:true,strict_referrer:true},BW:{enabled:false}}).addVar("page_id",this._pageId).subscribe("before_beacon",function(e){var t=[],n;if("t_done"in e)return;for(n in e){if(e.hasOwnProperty(n)){t.push(n)}}BOOMR.removeVar(t)});$jex.event.bind(window,"load",function(){e.end("t_done")})};CACTI_monitoring.prototype._inList=function(e){if($jex.array.indexOf(this.timerList,e)>-1)return true;return false};CACTI_monitoring.prototype.start=function(e){if(!this.isStart||!this._inList(e))return;BOOMR.plugins.RT.startTimer(e)};CACTI_monitoring.prototype.end=function(e){if(!this.isStart||!this._inList(e))return;BOOMR.plugins.RT.endTimer(e)};CACTI_monitoring.prototype.send=function(){BOOMR.page_ready()};var CONSTANT={SEARCH_URL:"/twell/flight/Search.jsp",ONEWAY_SEARCH_URL:"/site/oneway_list.htm"};(function(e){"$doc:nomunge, $head:nomunge";function y(e,t,n,r){var i,s=t.document,o=s.getElementById(e);if(o){n.id=e;if(/MSIE/i.test(navigator.appVersion)){var u=[];u.push('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"');for(var a in n){if(n.hasOwnProperty(a)){a=a.toLowerCase();if(a==="data"){r.movie=n[a]}else if(a==="styleclass"){u.push(' class="',n[a],'"')}else if(a!=="classid"){u.push(" ",a,'="',n[a],'"')}}}u.push(">");for(var f in r){if(r.hasOwnProperty(f)){u.push('<param name="',f,'" value="',r[f],'" />')}}u.push("</object>");o.outerHTML=u.join("");i=s.getElementById(n.id)}else{var l=s.createElement("object");l.style.outline="none";l.setAttribute("type","application/x-shockwave-flash");for(var c in n){if(n.hasOwnProperty(c)){c=c.toLowerCase();if(c==="styleclass"){l.setAttribute("class",n[c])}else if(c!=="classid"){l.setAttribute(c,n[c])}}}for(var h in r){if(r.hasOwnProperty(h)&&h.toLowerCase()!=="movie"){var p=s.createElement("param");p.setAttribute("name",h);p.setAttribute("value",r[h]);l.appendChild(p)}}o.parentNode.replaceChild(l,o);i=l}}return i}function b(e,t,n,r){if(!g())return null;return y(e,t,n,r)}function w(e){return r.getElementById(e)}function E(e,t){return e.getAttribute("data-"+t)}function C(e){var t=[];for(var n in e){t.push(n+"="+encodeURIComponent(e[n]))}return t.join("&")}function k(e){var t=x,n="/js.ng/";if(e.type==="qde_text"){n=e.adurl?"http://"+e.adurl+"?":"/qadjs12_css.nghtml?"}var r=N;if(e.id===QNR.AD.__cur_qde_ad){N=String(+(new Date))+parseInt(Math.random()*1e7,10)}var i=["http://",t,n,"framId=",e.id,"&",e.query,"&tile=",r];if(d){i.push("&city=",d)}if(u){i.push("&adtest=beta")}if(h){i.push(h)}return i.join("")}function L(e){return ft(e.id).urlPath(e)}function A(e){var t="";switch(e.type){case"qde":case"qde_text":case"qde_auto":t=k(e);break;case"qad":t=L(e);break;default:break}return t}function O(){return r.createElement("div")}function M(){var e=r.createElement("iframe");e.setAttribute("height",0);e.setAttribute("frameBorder",0);e.setAttribute("scrolling","no");e.style.display="none";return e}function _(e,t){if(t&&t.parentNode){t.parentNode.insertBefore(e,t)}}function D(e,t){var n=e==="div"?O():M();if(t&&t.style){n.style.cssText=t.style}if(e==="iframe"){n.style.display="none"}return n}function P(e,t){t=t||"div";var n=S(e),r=D(t,n);return r}function H(e){var t=P(e,"div"),n=w(e);if(n&&n.parentNode){n.parentNode.insertBefore(t,n)}return t}function B(e){var t=r.createElement("script");t.charset="utf-8";t.async=true;t.src=e;s.insertBefore(t,s.lastChild)}function F(e){if(!j){j=O();j.style.display="none";document.body.appendChild(j)}j.appendChild(e)}function I(){var e=r[t]("abbr"),n=[];for(var i=0,s=e.length;i<s;i++){if(E(e[i],"type")&&E(e[i],"lazyAD")!=="1"){n.push(e[i])}}return n}function q(e,t){e=e||[];t=t||{};var n={},r,i,s,u=/chan=([a-z_]+)/,a;for(var f=0,c=e.length;f<c;f++){r=e[f];i=S(r);if(i.type==="qad"){i.callback=QNR.AD.getCallbackName(i.id,true)}s=A(i);if(!l&&i.type==="qde"){a=u.exec(s);if(a&&a[1])l=a[1]}if(s){n[i.id]=s}}return{ads:n,domain:o}}function U(){if(R){setTimeout(function(){if(R){R.parentNode.removeChild(R);R=null}},0)}}function z(e){var t=r.createElement("div");t.style.display="none";var n=[];f="//vata.qunar.com/vata?chan="+(l||"");n.push('<form name="vata_main_form" target="vata_main_frame" action="'+f+'" method="POST">');e.ads=e.ads||{};for(var i in e.ads){if(e.ads.hasOwnProperty(i)){n.push('<input type="text" name="',i,'" value="',e.ads[i],'" />')}}n.push("</form>");n.push("<iframe src='' name='vata_main_frame' id='vata_main_frame'></iframe>");t.innerHTML=n.join("");R=t;F(t);if(/MSIE/i.test(navigator.appVersion)){w("vata_main_frame").src="javascript:'<script>window.onload=function(){document.write(\\'<script>document.domain=\\\""+o+"\\\";parent.document.vata_main_form.submit();<\\\\/script>\\');document.close();};</script>'"}else{r.vata_main_form.submit()}}function W(e){var t=I();var n=[],r,i=function(t){r=E(t,"type");if(r==="qde_auto"){rt(t)}else if(a===1||r==="qde_text"){it(t,e||{})}else{n.push(t)}};for(var s=0,o=t.length;s<o;s++){i(t[s])}var u=n.length;if(u==1){it(n[0],e||{})}else if(u>1){z(q(n,e))}}function X(e,t){if(e.attachEvent){e.attachEvent("onload",t)}else{e.onload=t}}function V(e,t){if(e==null||e!=e.window){return false}var n=e.frameElement;var r=e.document.body;var i=function(s){n.style.display="";var o=r.offsetHeight;if(!s){X(e,function(){i(true)})}if(o==0){n.style.display="none"}else{n.style.height=o+"px";t&&t()}};i()}function K(e,t){var n=$[t];var r=n&&n.join("")||"";if(r){n.length=0;e.write(r)}else{ot(t,false)}}function G(e,t){var n=Q[t]||0;Q[t]="";n&&e.write(n)}function Y(e,t){e=e||"ad_queue_all";if(!$[e]){$[e]=[]}$[e].push(t)}function Z(e){return c+(J?"&rnd="+e:"")+"#"+e}function et(e,t,n,r){var i=[];if(e){i[i.length]="<style>"+e+"</style>"}if(t){i[i.length]=t.replace(/(scr)_(ipt)/gi,"$1$2")}if(n){i[i.length]='<script type="text/javascript">'+n+"</script>"}if(r){i[i.length]='<script type="text/javascript" src="'+r+'"></script>'}return i.join("")}function tt(e,t){var n=Z(e),r=P(e,"iframe");r.src=n;if(t==1){F(r)}else{var i=w(e);_(r,i)}}function nt(e,t,n){var r=w(e),i=P(e,"iframe");i.style.display="";i.src=t;i.id=n||e;r.parentNode.replaceChild(i,r)}function rt(e){var t=e.getAttribute("data-src");if(t){nt(e.id,t)}}function it(e){var t=S(e),n=t.id,r,i,s="";if(!n){return}if(t.type==="qde_auto"){rt(e)}else if(t.type==="qad"){t.callback=QNR.AD.getCallbackName(n);i=A(t);if(i)B(i)}else{i=A(t);if(!i)return;if(t.type==="qde_text"){s="call_show=1;";r=et("","",s,i);Y(n,r)}else{r='<script type="text/javascript" src="'+i+'"></script>';Q[n]=r}tt(n,0)}}function st(e,t,n,r,i,s){if(n==='<div style="display:none"></div>'){ot(e,false);return}var o=w(e),u="",f;if(!o)return;ot(e,true);f=n&&/top.QNR.AD.run_in_content/.test(n);if(!f)f=r&&/top.QNR.AD.run_in_content/.test(r);if(f)s=1;if(n.indexOf("q_header|qn_header")>-1||r.indexOf("q_header|qn_header")>-1){w("j-pagecontainer")&&(w("j-pagecontainer").style.background="none")}else{if(f&&/ad_type="([a-z_]+)"/.test(n)){if(RegExp.$1=="static_shading"){w("j-pagecontainer")&&(w("j-pagecontainer").style.background="none")}}}if(a===1){if(s!=1){r=r||"";r="call_show = 1;"+r}u=et(t,n,r,i);if(f){u=u+"<script>writeContent(document,Current_ad_id);</script>"}Y(e,u);return}if(s==1){u=et(t,n,r,i);if(u){u='<script type="text/javascript">Current_ad_id = "'+e+'";</script>'+u}}else{r="call_show=1;"+r;u=et(t,n,r,i);s=0}Y(e,u);tt(e,s)}function ot(e,t){var n=QNR.AD._DE;if(e){if(n[e]){n[e](t);delete n[e]}return}for(var r in n){n[r](false)}QNR.AD._DE={}}function ut(e){this.$aid=e;this.params={}}function ft(e,t){if(!at[e]){at[e]=new ut(e)}t&&t(at[e]);return at[e]}if(typeof e.QNR==="undefined"){e.QNR={}}QNR._AD={};var t="getElementsByTagName";var n=e,r=n.document,i=r.body,s=r[t]("head")[0],o="qunar.com",u=false,a=0,f,l,c,h,p,d,v;try{r.domain=o}catch(m){}var g=function(){var e=n.navigator,t="application/x-shockwave-flash";var r=false,i,s;var o=e.mimeTypes&&e.mimeTypes[t]?e.mimeTypes[t].enabledPlugin:0;if(o){s=o.description;if(parseInt(s.substring(s.indexOf(".")-2),10)>=8){r=true}}else if(n.ActiveXObject){try{i=new n.ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(i){r=true}}catch(u){}}g=function(){return r};o=i=s=e=null;return r};var S=function(){function n(t){var n={},r;if(!t)return{};n.id=t.id;for(var i=0,s=e.length;i<s;i++){r=e[i];n[r]=E(t,r)}if(n.type==="qde_text"){n["adurl"]=E(t,"adurl")}return n}var e=["type","style","query","main","host"],t={};return function(e){var r,i;if(typeof e==="string"){r=e}else{r=e.id;i=e}if(!t[r])t[r]=n(i||w(r));return t[r]}}();var x="qde.qunar.com",T="a.qunar.com";var N=String(+(new Date))+parseInt(Math.random()*1e7,10);var j;var R;var $={};var J=/MSIE 6\.0/.test(navigator.userAgent);var Q={};ut.prototype={constructor:ut,createCall:function(e){var t=this;QNR._AD[this.$aid]=function(n){e(n,t)}},createDiv:function(){return H(this.$aid)},set:function(e,t){this.params[e]=t;return this},getId:function(){return this.$aid},run_in_iframe:function(e,t){if(typeof t=="undefined"){t=1}QNR.AD.add_AD_iframe(this.$aid,e,t)},urlPath:function(e){var t=e.host=="flightopdata"?"flightopdata.qunar.com":T;var n=["http://",t,"/vataplan?","framId=",e.id,"&",e.query,"&callback=",e.callback,"&ab=b&tile=",N];if(p){n.push(p)}var r=C(this.params);r&&n.push("&",r);if(d){n.push("&city=",d)}return n.join("")},load:function(){QNR.AD.loadOneAD(this.$aid)}};var at={};QNR.AD={version:"4.4",_AD:{},_DE:{},run_in_content:st,run_queue_list:function(){var e="ad_queue_all";var t=$[e];var n=t&&t.join("")||"";if(n){t.length=0;n+='<script type="text/javascript">writeContent(document,"ad_queue_all");</script>';Y(e,n);tt(e,1)}U();ot()},writeHeadScript:G,create_div_container:H,writeContent:K,$inject_flash:b,createAdFrame:nt,createQAd:ft,add_AD_iframe:function(e,t,n){if(!t)return;if(n)t=t+'<script type="text/javascript">call_show=1;</script>';Y(e,t);tt(e,0)},init:function(e){u=e.debug||false;a=e.type||"";if(J){a=1}d=e.ip||"";h=e.qde_plus||"";p=e.qad_plus||"";c=e.blank_html||"";v=e;if(u){x="qdebeta.qunar.com"}W(e)},show:function(e,t){V(e,function(){QNR.AD.callWinShowFun(t,e)})},getCallbackName:function(e,t){return(t?"parent.":"")+"QNR._AD."+e},callWinShowFun:function(e,t){var n=e+"_win_",r=QNR._AD[n];if(r)r(e,t)},createWinShowCall:function(e,t){var n=e+"_win_";QNR._AD[n]=t},createCallback:function(e,t){var n=ft(e);n.createCall(function(e){var r=n.createDiv();t(r,e)})},createQdeCallback:function(e,t){QNR.AD._DE[e]=function(n){t(n,e)}},callBackQDE:ot,change_one_async:function(){var e=v;e.type=1;QNR.AD.init(e);U()},loadOneAD:function(e){var t=w(e);if(t){it(t)}}}})(this);QNR.ips=function(e){function o(e,n){s.push(e);if(i){return}var o=t.createElement("script");a.callback=function(e){if(r!==null){return}r=e.city||"";u();o.parentNode.removeChild(o)};o.type="text/javascript";o.charset="utf-8";o.src="//ws.qunar.com/ips.jcp?callback=QNR.ips.callback&_="+ +(new Date);o.async=true;var f=t.getElementsByTagName("head");container=f?f[0]:document.documentElement;container.insertBefore(o,container.firstChild);i=1;setTimeout(function(){a.callback({})},n||2e3)}function u(){for(var e=0,t=s.length;e<t;e++){s[e].call(null,r)}s.length=0}function a(e,t){e=e||function(){};if(r!==null){e.call(null,r)}else{o(e,t)}}if(typeof e.QNR==="undefined"){e.QNR={}}var t=e.document,n=location.search.match(/debug=city=([^&#]+)/),r=n?decodeURI(n[1]):null,i=0,s=[];return a}(this);var AirlineCompany=function(){function n(e){var t=[],n;for(var r=0,i=e.length;r<i;r++){n=e[r];t.push('<li class="ad_item"><a href="',n.url,'" target="_blank">','<img width="100%" height="170px" src="',n.img.replace("http://","//"),'" alt="航空公司促销">','<div class="content">','<div class="city_info">','<div class="city_mainInfo" style="','">',n.sale_price,"</div>",'<div class="city_subInfo" style="','">',"</div>","</div></div>",'<div class="ad_txt">广告</div>',"</a></li>")}t.push(t.join(""));t.unshift('<ul class="ad_container">');t.push("</ul>",'<div class="next"><img src="https://s.qunarzz.com/flight_qzz/arrow_right.png" alt="下一个" class="arrow hide"></div>','<div class="prev"><img src="https://s.qunarzz.com/flight_qzz/arrow_left.png" alt=" 上一个" class="arrow hide"></div>');$("#airlineList_content").html(t.join(""));setTimeout(adsAutoSlide,50);$("#airlineList_panel").show()}var e="airlineList";var t=QNR.AD.createQAd(e);t.createCall(function(e){var t=e&&e.key_data||[];if(t.length>0){n(t)}})};AirlineCompany();var notice=function(){function n(e){var t=[],n;var r='<div class="un_hd"><p>去哪儿网公告</p></div><ul>';for(var i=0,s=e.length;i<s;i++){n=e[i];t.push('<li><a target="_blank" href="',n.url,'">',n.txt,"</a></li>")}t=r+t.join("")+"</ul>";$("#notice").html(t)}var e="noticeList";var t=QNR.AD.createQAd(e);t.createCall(function(e){var t=e&&e.key_data||[];if(t.length>0){n(t)}})};notice();if(typeof AD_Manage==="undefined"){var AD_Manage={}}AD_Manage.isDebug=function(){var e=location.href;return e.indexOf("adtest=beta")>0&&e.indexOf("adebug")>0};var QadAdUnits=function(){function e(e){return typeof e==="string"?document.getElementById(e):e}function t(e){var t=document;var n=t.getElementsByTagName("head")[0];if(t.createStyleSheet){t.createStyleSheet().cssText=e}else{var r=t.createElement("style");r.textContent=e;n.insertBefore(r,n.firstChild)}}function r(){if(n)t(n);n=null}function i(e,t){var n=[],r=null,i="";var u=e.key_data||[];for(var a=0,f=u.length;a<f;a++){r=u[a];if(t){i=t(r)}else if(r.img){i=s(r)}else{i=o(r)}n.push(i)}return n.join("")}function s(e){var t=u(e);return['<div class="un_ct">','<dl class="hn_dl">','<dt><a target="_blank" href="',t,'">','<img src="',e.img.replace("http://","//"),'"></a>',"</dt>",'<dd><a target="_blank" href="',t,'" class="hn_d2">',e.title,"</a></dd>",'<dd><a target="_blank" href="',t,'" class="hn_d3">',e.description,"</a></dd>",'<dd><a target="_blank" href="',t,'">',e.show,"</a></dd>",'</dl><div class="clr"></div></div>'].join("")}function o(e){var t=u(e);var n=e.title||"";n=n.replace("...","");var r=e.description||"";return['<dl class="dl_spy">','<dt><a class="lnk_rut" title="',n,'" target="_blank" href="',t,'">',n,"</a></dt>",e.phone?'<dd><a class="lnk_tel" target="_blank" href="'+t+'">TEL: '+e.phone||""+"</a></dd>":"",'<dd><a title="'+r+'" class="lnk_t" href="',t,'" target="_blank">',r,"</a></dd>",'<dd><a class="lnk_h" target="_blank" href="',t,'">',e.margin?'<span class="icon_bz" title="商户服务安全双重保障"></span>':"",e.show||"","</a></dd>","</dl>"].join("")}function u(e){return["//clk.qunar.com/q?k=",e.s||"","&e=",e.e].join("")}var n="";return{$E:e,append_style:t,renderTextLinkHTML:i,appendTextCss:r,parse_clk_url:u,create_iframe_hander:function(e,t){if(typeof e==="string")e=QNR.AD.createQAd(e);e.createCall(function(n){var r=n&&n.key_data&&n.key_data.length||0;var s="",o;if(r){var o=e.getCss&&e.getCss()||"";if(o)s='<style type="text/css">'+o+"</style>";s+=i(n,e.renderHtmlItem);e.run_in_iframe(s,1)}t(r,e)})},create_text_call:function(e,t){QNR.AD.createCallback(e,function(e,n){var r=n&&n.key_data&&n.key_data.length||0;if(!r){e.style.display="none"}else{QadAdUnits.appendTextCss();e.innerHTML=QadAdUnits.renderTextLinkHTML(n)}t(r,n)})}}}();(function(){function t(e){var t=e&&e.key_data&&e.key_data.length;if(!t)return;var n=e.key_data[0].description;if(!n)return;n=n.replace(/(st)_(yle)/ig,"$1$2");n=n.replace(/(scr)_(ipt)/gi,"$1$2");return n}function n(e){return function(n,r){n.style.display="none";html=t(r);QNR.AD.add_AD_iframe(e,html,1)}}function r(){var t=e("ifmRightTextlink_title");if(t)t.style.display="block";t=e("ifmRightTextlink_footer");if(t)t.style.display="block"}function i(e,t,n){var r=n&&n.key_data&&n.key_data.length;t.style.display="none";if(!r){return}var i='<style type="text/css">'+".f_org { color: #FF6600; }"+".ul_listBticket li { display: inline-block; float: left; line-height: 20px; text-align: left; width: 27%; }"+".ul_listBticket li a { display: block; }"+".ul_listBticket li a .tit { display: block;}"+".ul_listBticket li.col_qnr { padding-top: 0; text-align: left; width: 18%; }"+".ul_listBticket li.col_qnr .txtlnk_qnr { background: none repeat scroll 0 0 #EFEFEF; color: #333; display: inline-block; height: 17px; line-height: 17px; padding: 0 6px; }"+"</style>";var s=['<div class="bannerTK_cont" id="result">'],o=n.key_data,u,a;s.push('<ul class="ul_listBticket clr_after">');s.push('<li class="col_qnr"><span class="txtlnk_qnr">去哪儿提供的链接</span></li>');for(var f=0;f<r;f++){u=o[f];a=["//clk.qunar.com/q?k=",u.s||"","&e=",u.e].join("");s.push('<li><a href="',a,'" target="_blank"><span class="tit">',u.title,'</span> <span class="f_org">',u.show,"</span> </a></li>")}s.push("</ul></div>");var s=i+s.join("");QNR.AD.add_AD_iframe(e,s,1)}function s(e,t,n){var r=n&&n.key_data&&n.key_data.length;t.style.display="none";if(r==0){return}var i="text-align:right;*padding-right:10px;";var s="padding-top:6px;*padding-top:4px;_padding-top:8px;";var o='<style type="text/css">'+".topicLink { height:24px;color:#333;"+i+"}"+".topicLink p {"+s+" }"+".topicLink p a { color:#268fc5; }"+".topicLink p .ico_vl{ margin-left:2px;vertical-align:middle;margin-top:-2px;*margin-top:2px;_margin-top:-3px;}"+"</style>";var u=['<div class="topicLink">'],n=n.key_data,a;for(var f=0;f<r;f++){a=n[f];u.push('<p><a href="',a.url,'" target="_blank" title="',a.title+'">',a.description,'<img src="',a.img.replace("http://","//"),'" alt="hot" class="ico_vl"></a></p>')}u.push("</div>");u=o+u.join("");QNR.AD.add_AD_iframe(e,u,1)}function o(e){QNR.AD.createCallback(e,function(e,t){var n=t&&t.key_data&&t.key_data.length;if(n>0){var r=[];for(var i=0;i<n;i++){var s=t.key_data[i];r.push('<a style="display:block;padding-bottom:16px;" href="',s.url,'" target="_blank">','<img style="display:block;" src="',s.img.replace("http://","//"),'" /></a>')}e.innerHTML=r.join("")}})}function a(){return"ad_dyna_"+u++}var e=QadAdUnits.$E;QNR.AD.createCallback("ifrHelperAd",n("ifrHelperAd"));QNR.AD.createCallback("ifrCataAd",n("ifrCataAd"));QadAdUnits.create_text_call("ifmRightTextlink",function(e){if(e>0){r()}});QNR.AD.createCallback("listBottomAD",function(e,t){i("listBottomAD",e,t)});QNR.AD.createCallback("ifrNTOPAD",function(e,t){i("ifrNTOPAD",e,t)});QNR.AD.createCallback("topicLinkL",function(e,t){s("topicLinkL",e,t)});QNR.AD.createCallback("topicLinkR",function(e,t){s("topicLinkR",e,t)});o("rightFlightImgGoBanner");var u=0;AD_Manage.createFlightAD=function(e){var t=QNR.AD.create_div_container(e);var n=/inter/.test(location.pathname)?"QNR_ZDM%3D_CN":"QNR_YjM%3D_CN";var r=QadAdUnits.$E(e);e=a();var s=e+"_qad",o=e+"_qde";var u='<span style="display:none;" data-query="vataposition='+n+'&tag=0&rows=3&cur_page_num=0&rep=1&f=s" data-type="qad" data-style="width:100%;" id="'+s+'"></span>'+'<div><span style="display:none;" data-style="width:100%;" data-type="qde" data-query="" id="'+o+'"></span></div>';t.innerHTML=u;var f=AD_Manage.isDebug();QNR.AD.createQdeCallback(o,function(e){if(!e||f){QNR.AD.loadOneAD(s)}});QNR.AD.createCallback(s,function(e,t){i(s,e,t)});var l=r.getAttribute("querystring");QadAdUnits.$E(o).setAttribute("data-query",l);QNR.AD.__cur_qde_ad=o;QNR.AD.loadOneAD(o)}})();(function(){function e(e){return~location.search.indexOf(e)}function t(t){function i(){r--;if(r===0)t(n)}var n={};n.type=e("debug=type=open")?1:0;n.debug=e("adtest=beta");n.blank_html="//www.qunar.com/vataframe/b.html?_=20120830";n.qde_plus="";n.qad_plus="";var r=1;if(AD_Manage.qad_query)r++;if(AD_Manage.qde_query)r++;if(AD_Manage.ip_query)r++;if(AD_Manage.qad_query){AD_Manage.qad_query(function(e){if(e){n.qad_plus="&"+e.replace(/^&/,"")}i()})}if(AD_Manage.qde_query){AD_Manage.qde_query(function(e){if(e){n.qde_plus="&"+e.replace(/^&/,"")}i()})}if(AD_Manage.ip_query){AD_Manage.ip_query(function(e){if(e)n.ip=encodeURIComponent(e);i()})}i()}AD_Manage.load=function(){t(function(t){if(e("debug=charge=true")){t.qde_plus+="&cm=charged"}setTimeout(function(){QNR.AD.init(t)},10)})}})();AlsoSearch=function(){function e(e){return document.getElementById(e)}function t(e){return["http://clk.qunar.com/q?k=",e.s||"","&e=",e.e].join("")}function n(e){var t=document.createElement("script"),n=document.getElementsByTagName("head")[0];t.charset="utf-8";t.async=true;t.src=e;n.insertBefore(t,n.lastChild)}function r(){if(!r._singleton){r._singleton=this;this.init()}return r._singleton}function i(){try{var e=window.external&&window.external.max_version;return e||/maxthon/i.test(navigator.userAgent)}catch(t){return false}}r.prototype={init:function(){this._status=0;this._calls=[];this._url="http://a.qunar.com/vataplan?f=s&cur_page_num=0&rep=1&tag=99&vataposition=QNR_OTU%3D_CN&vatacon=&rows=10&callback="},getData:function(e){if(this._status===2){e(this.$data)}else{this._calls.push(e);if(this._status===0){this._loadData()}}},_dataReady:function(){this._status=2;var e=this._calls;for(var t=0,n=e.length;t<n;t++){e[t](this.$data)}},_loadData:function(){var e=this,t="also_search_"+(new Date).valueOf();window[t]=function(n){e.$data=n&&n.key_data||[];var r="",i,s;for(var o=0,u=e.$data.length;o<u;o++){r=e.$data[o].description;i=r.split("||");s={show:i[1]||"yes",city:i[0]?i[0].split(","):[]};e.$data[o].description=s}e._dataReady();try{delete window[t]}catch(a){}};e._status=1;n(this._url+t)}};r.prototype.constructor=r;var s=i();var o=0;var u=function(e,t){this.id=e;this._cks_key="check_"+o++;this.opts=t||{};this.init()};u.prototype={init:function(){this._dc=new r},_findAD:function(e,t){var n=this;if(!e||s){t([]);return}if(e===n._nowKey)return;n._nowKey=e;this._dc.getData(function(r){if(n._nowKey!==e)return;if(n._lastKey!==e){n.$curAD=null}n._lastKey=n._nowKey;n._nowKey=null;var i,s=[],o,u;var a=n.opts.getCountry.call(n);for(var f=0,l=r.length;f<l;f++){i=r[f].description.city;for(o=0,u=i.length;o<u;o++){if(a=="中国"&&i[o]=="国内全部"||a!=="中国"&&i[o]=="国际全部"||i[o]===e){s.push(r[f]);return t(s)}}}t([])})},toggle:function(e){var t=this;var n=this.opts.getKey.call(this);t._findAD(n,function(n){t._show(n,e)})},_show:function(e,t){var n=0;if(e.length>1){n=Math.floor(Math.random()*e.length)}var r=e[n];this.$last_AD=this.$curAD;this.$curAD=r;this._render(r);this._bindEvent();this.opts.onChange&&this.opts.onChange.call(this,!!r);t&&t.call(this,!!r)},_render:function(t){var n=this.opts,r=this.id;var i=e(n.container);var s=this._cks_key;if(!i)return;if(t){if(this.$last_AD===t){t[s]=this.$last_AD[s]}else{t[s]=t.description.show==="yes"?true:false}var o=t[s]?'checked="checked"':"";var u=t.title.split("||");var a=["<strong>"+u[1]+"</strong>",'<input name="" autocomplete="off" id="alsosearchchk_',r,'" type="checkbox" ',o,' class="inp_chk" />','<label class="chk_lab" for="alsosearchchk_',r,'">',u[0],"</label>"].join("");if(i){i.innerHTML=a;i.style.display="block"}}else{i.style.display="none";i.innerHTML=""}},_bindEvent:function(){var t=e(this.opts.container),n,r=this;if(t){n=t.getElementsByTagName("input")[0];n&&(n.onclick=function(){r.$curAD[r._cks_key]=this.checked})}t=n=null},getAdUrl:function(){if(!this.$curAD||!this.$curAD[this._cks_key])return"";return t(this.$curAD)},action:function(){if(!this.$curAD||!this.$curAD[this._cks_key])return false;try{var e=window.screen.availHeight*1;var n=window.screen.availWidth*1;var r=window.open("about:blank","qunar","scrollbars=yes,location=yes,menubar=yes,resizable=yes,status=yes,titlebar=yes,toolbar=yes,width="+Math.round(n)+",height="+Math.round(e));r.blur();r.opener.focus();r.location=t(this.$curAD)}catch(i){}},isActive:function(){return!!this.$curAD}};u.prototype.constructor=u;return u}();var isIE=navigator.appVersion.indexOf("MSIE")!=-1?true:false;var isWin=navigator.appVersion.toLowerCase().indexOf("win")!=-1?true:false;var isOpera=navigator.userAgent.indexOf("Opera")!=-1?true:false;if(typeof qunarflashver=="undefined"){var qunarflashver="20090107"}var Cookie_YQ={set:function(e,t,n){var r="";if(n!=undefined){var i=new Date;i.setTime(i.getTime()+864e5*parseFloat(n));r="; expires="+i.toGMTString()}return document.cookie=escape(e)+"="+escape(t||"")+r},get:function(e){var t=document.cookie.match(new RegExp("(^|;)\\s*"+escape(e)+"=([^;\\s]*)"));return t?unescape(t[2]):null},erase:function(e){var t=Cookie_YQ.get(e)||true;Cookie_YQ.set(e,"",-1);return t},accept:function(){if(typeof navigator.cookieEnabled=="boolean"){return navigator.cookieEnabled}Cookie_YQ.set("_test","1");return Cookie_YQ.erase("_test")=="1"}};CONSTANT.TRENDS_URL="//ws.qunar.com/holidayService.jcp";CONSTANT.DEFAULT_TRENDS_COUNT=2;CONSTANT.MAX_TRENDS_COUNT=4;CONSTANT.UNLOCK_TIMESPAN=5e3;var Trend={};var day_num=45;var trend_language_resource={deptAirport:{cityList:[{name:"北京",country:"中国"},{name:"上海",country:"中国"},{name:"昆明",country:"中国"},{name:"杭州",country:"中国"},{name:"广州",country:"中国"},{name:"成都",country:"中国"},{name:"西安",country:"中国"},{name:"南京",country:"中国"},{name:"深圳",country:"中国"},{name:"重庆",country:"中国"},{name:"长沙",country:"中国"},{name:"沈阳",country:"中国"},{name:"厦门",country:"中国"},{name:"武汉",country:"中国"},{name:"海口",country:"中国"},{name:"乌鲁木齐",country:"中国"},{name:"青岛",country:"中国"},{name:"大连",country:"中国"},{name:"中国香港",country:"中国香港"},{name:"新加坡",country:"新加坡"},{name:"东京",country:"日本"},{name:"首尔",country:"韩国"},{name:"曼谷",country:"泰国"},{name:"悉尼",country:"澳大利亚"}],totalCityCount:1514,hint:["Top24 热门城市","直接输入可搜索1514个城市"]},arriAirport:{cityList:[{name:"北京",country:"中国"},{name:"上海",country:"中国"},{name:"昆明",country:"中国"},{name:"杭州",country:"中国"},{name:"广州",country:"中国"},{name:"成都",country:"中国"},{name:"西安",country:"中国"},{name:"南京",country:"中国"},{name:"深圳",country:"中国"},{name:"重庆",country:"中国"},{name:"长沙",country:"中国"},{name:"沈阳",country:"中国"},{name:"厦门",country:"中国"},{name:"武汉",country:"中国"},{name:"海口",country:"中国"},{name:"乌鲁木齐",country:"中国"},{name:"青岛",country:"中国"},{name:"大连",country:"中国"},{name:"中国香港",country:"中国香港"},{name:"新加坡",country:"新加坡"},{name:"东京",country:"日本"},{name:"首尔",country:"韩国"},{name:"曼谷",country:"泰国"},{name:"悉尼",country:"澳大利亚"}],totalCityCount:1514,hint:["Top24 热门城市","直接输入可搜索1514个城市"]}};var trendCityInputList=[{id:"hinp1DeptCity",imgId:"himg1DeptHotCity",showAirport:true,hostDiv:"dept1AirportContainer",obj:null},{id:"hinp1ArriCity",imgId:"himg1ArriHotCity",showAirport:true,hostDiv:"arri1AirportContainer",obj:null}];var trendCities={status:{}};trendCities.status.allValidationPassed=false;$(".e_trend_sel").append('<p style="color:rgb(43,99,206);text-decoration:none;float:right;margin-right:5px"><a target="_blank" href="http://mofang.qunar.com">热门机票趋势地图<img src="//simg1.qunarzz.com/site/images/new.png" alt="nice" style="position: relative; top: -10px; left: 4px;" /></a></p>');var Trends_Search_EXPIRES=30;var arrTrendCities=[];var DomesticLowPriceHome={};DomesticLowPriceHome.lpUrl="//ws.qunar.com/lowerPrice.jcp";DomesticLowPriceHome._init=function(){};DomesticLowPriceHome.dealsSearch=function(){var e=new ScriptRequest({funcName:"DomesticLowPriceHome.showLowPrice",callbackName:"callback"});e.send(DomesticLowPriceHome.lpUrl)};var _ex_track=$jex.parseQueryParam().ex_track;_ex_track=_ex_track?"&ex_track="+_ex_track:"";DomesticLowPriceHome.lpTitle=function(context,__onerror){if(context==null)context={};if(context._MODIFIERS==null)context._MODIFIERS={};if(context.defined==null)context.defined=function(e){return context[e]!=undefined};var resultArr=[];var resultOut={write:function(e){resultArr.push(e)}};try{(function(_OUT,_CONTEXT){with(_CONTEXT){_OUT.write('<div class="m_rt_tab"><ul class="ul_route_tab">');var __LIST__city=cities;if(__LIST__city!=null){var city_ct=0;var trackId=101090001;for(var city_index in __LIST__city){city_ct++;if(typeof __LIST__city[city_index]=="function"){continue}var city=__LIST__city[city_index];_OUT.write("        <li class=");if(city_index==0){_OUT.write('"cur"')}else{_OUT.write('""')}_OUT.write('><a href="#" hidefocus="on" onclick="return false;" data-track=\'key='+trackId++ +"'>");_OUT.write(city);_OUT.write("</a></li>")}}_OUT.write('    <li class="more"></li></ul></div><h3>国内低价机票</h3>')}})(resultOut,context)}catch(e){if(__onerror&&typeof __onerror=="function"){__onerror(e,resultArr.join(""))}throw e}return resultArr.join("")};DomesticLowPriceHome.lpTemplate=function(context,__onerror){if(context==null)context={};if(context._MODIFIERS==null)context._MODIFIERS={};if(context.defined==null)context.defined=function(e){return context[e]!=undefined};var resultArr=[];var resultOut={write:function(e){resultArr.push(e)}};try{(function(_OUT,_CONTEXT){with(_CONTEXT){_OUT.write('<div class="m_slide_co"> ');var dcity=encodeURIComponent(deptCity);_OUT.write('<div class="m_route_wp d_route clrfix"><ul class="ul_route_lst">');var __LIST__line=lines1;if(__LIST__line!=null){var line_ct=0;var trackId=101090012;for(var line_index in __LIST__line){if(typeof __LIST__line[line_index]=="function"){continue}if(line_ct==4||line_ct==8){_OUT.write('<li class="li_space"></li>')}line_ct++;var line=__LIST__line[line_index];_OUT.write('            <li><a title="&yen;');_OUT.write(line.price);_OUT.write(" ");_OUT.write(deptCity);_OUT.write("-");_OUT.write(line.arrCity);_OUT.write(" ");_OUT.write(line.date);_OUT.write(" ");_OUT.write(line.discount);_OUT.write('折" href="');_OUT.write(line.url);_OUT.write('" target="_blank" hidefocus="on" data-track=\'key='+trackId++ +"'>");_OUT.write('<span class="city">');_OUT.write(dcCity);_OUT.write('<i class="i_ow"></i>');_OUT.write(line.arrCity);_OUT.write('</span><span class="date">');_OUT.write(line.date);_OUT.write('</span><span class="dis">');if(line.discount==="10"){_OUT.write("全价</span>")}else{_OUT.write(line.discount+"折</span>")}_OUT.write('<span class="pr"><i class="rmb">&yen;</i>');_OUT.write(line.price);_OUT.write("</span></a></li>")}}_OUT.write('    </ul><div class="line"></div><ul class="ul_route_lst">');var __LIST__line=lines2;if(__LIST__line!=null){var line_ct=0;for(var line_index in __LIST__line){if(typeof __LIST__line[line_index]=="function"){continue}if(line_ct==4||line_ct==8){_OUT.write('<li class="li_space"></li>')}line_ct++;var line=__LIST__line[line_index];_OUT.write('            <li><a title="&yen;');_OUT.write(line.price);_OUT.write("");_OUT.write(deptCity);_OUT.write("-");_OUT.write(line.arrCity);_OUT.write(" ");_OUT.write(line.date);_OUT.write(" ");_OUT.write(line.discount);_OUT.write('折" href="');_OUT.write(line.url);_OUT.write('" target="_blank" hidefocus="on" data-track=\'key='+trackId++ +"'>");_OUT.write('<span class="city">');_OUT.write(dcCity);_OUT.write('<i class="i_ow"></i>');_OUT.write(line.arrCity);_OUT.write('</span><span class="date">');_OUT.write(line.date);_OUT.write('</span><span class="dis">');if(line.discount==="10"){_OUT.write("全价</span>")}else{_OUT.write(line.discount+"折</span>")}_OUT.write('<span class="pr"><i class="rmb">&yen;</i>');_OUT.write(line.price);_OUT.write("</span></a></li>")}}_OUT.write('    </ul></div><div class="e_route_lk"><span style="color: #888">折扣说明：经济舱折扣以标准经济舱全价为基础计算得出</span></div></div>')}})(resultOut,context)}catch(e){if(__onerror&&typeof __onerror=="function"){__onerror(e,resultArr.join(""))}throw e}return resultArr.join("")};DomesticLowPriceHome.showLowPrice=function(e){try{var t=e.ipCity||"";var n=[];$jex.hash.each(e.data,function(e,r){if(t==e){}else{n.push(e)}var i=r.records;var s=e;for(var o=0;o<i.length;o++){var u=i[o];var a=new Date(u.date.replace(/-/g,"/"));var f=new Date(a.getTime());f.setDate(f.getDate()+3);f=$jex.date.format(f,"yyyy-MM-dd");u.fromDate=u.date;u.url=CONSTANT.SEARCH_URL+"?fromCity="+encodeURIComponent(s)+"&toCity="+encodeURIComponent(u.arrCity)+"&fromDate="+u.date+"&toDate="+f+"&searchType=OnewayFlight&from=tejia_d_search"+(location.protocol==="https:"?"&ishttps=1":"")+_ex_track;u.date=u.date.replace(/-/g,".").substr(5)}});n.sort(function(t,n){return e.data[t].sort-e.data[n].sort});if(e.data[t]){n.unshift(t)}var r=DomesticLowPriceHome.lpTitle({cities:n});var i=$jex.$("dFightTitle");var s=$jex.$("dFlightContent");i.innerHTML=r;var o=function(t){var n=e.data[t].records;var r=n.slice(0,12);var i=n.slice(12,24);var s=t.substring(0,2);return{deptCity:t,lines1:r,lines2:i,dcCity:s}};var u=o(n[0]);var a=DomesticLowPriceHome.lpTemplate(u);s.innerHTML=a;var f=i.getElementsByTagName("li");$jex.array.each(f,function(e){$jex.event.bind(e,"click",function(){var t=e.innerHTML.replace(/<\/?[^>]+>/gi,"");if(t=="更多"||!t)return;var n=DomesticLowPriceHome.lpTemplate(o(t));s.innerHTML=n;setTimeout(function(){$jex.array.each(f,function(e){$jex.removeClassName(e,"cur")});$jex.addClassName(e,"cur")},0)})});$(i).on("click","a",function(e){GodEye.log({r:"inner_suggest_chg_tab"})});$(s).on("click","li",function(){GodEye.log({r:"inner_suggest"})})}catch(l){$jex.element.hide($jex.$("dFlight"))}finally{$jex.element.show($jex.$("dFlight"))}};(function(e,t,n){function r(e){this.cfg=e;var n=this;this.ipcity="";var s=new i({items:function(){var e=SERVER_TIME.getMonth()+1;var n;var r=[];r.push({label:"全部月份",value:"All"});t.each(Array(3),function(){n=(e+1)%12;n=n==0?12:n;r.push({label:e+"月&nbsp;"+n+"月",value:[e,n].join(",")});e=(e+2)%12;e=e==0?12:e});return r}(),key:"month",def:"全部月份",change:function(e,t){n.set(e).load();s.find("span.e_select_input").text(t)}});var o=new i({items:r._defaultCities,key:"from",def:"北京出发",change:function(e,t){n.set(e).load();o.updateDefValue(t)}});this.filters=[s,o];this.init();this._param={from:"",to:"Hot",month:"All",cachefrom:"",cacheto:"",type:"",source:"fhome"}}function i(e){t.extend(this,e);this.init()}r.API="//ws.qunar.com/lpisearchd?callback=?";r._defaultCities=[{label:"北京",value:"北京"},{label:"上海",value:"上海"},{label:"广州",value:"广州"},{label:"成都",value:"成都"},{label:"昆明",value:"昆明"},{label:"杭州",value:"杭州"},{label:"厦门",value:"厦门"},{label:"港澳台",value:"港澳台"},{label:"其他城市",value:"其他城市"}];r.prototype.init=function(){var e=this,n=this.cfg;this.holder=t(n.holder);window.QunarHistory&&t(QunarHistory).on("onload",function(){var r=/\([A-Z]{3}\)$/;var i=this.data.flight.interFirst;e.set({from:"",cachefrom:i?decodeURIComponent(i.fromCity.replace(r,"")):"",cacheto:i?decodeURIComponent(i.toCity.replace(r,"")):"",type:n.type}).load(function(){e.render().onAfterRender();t.each(e.filters,function(t,n){e.add(n)})})})};r.prototype.set=function(e){t.extend(this._param,e);return this};r.prototype.load=function(e){var n=this;t.getJSON(r.API,this._param,function(t){n.ipcity=t.ipcity;if(!n.filters[1].getCache){n.upDateCityCfg(t.ipcity);if(t.cachecity!=t.ipcity){n.upDateCityCfg(t.cachecity)}n.filters[1].getCache=true}e&&e();t.ret?n.onload(t):n.error(t)})};r.prototype.onload=function(e){this.insertContent(e.data)};r.prototype.error=function(e){};r.prototype.upDateCityCfg=function(e){if(this.filters[1].getCache)return;if(!e)return;var n=false;t.each(r._defaultCities,function(t,r){if(e==r.label){n=true;return false}});var i=this.filters[1];if(!n){i.insertNode(e);i.updateDefValue(e)}else{i.updateDefValue(e)}this.set({from:e})};r.prototype.render=function(e){var n=['<div class="b_sep_route m_slide">'];n.push('<div class="e_route_hd m_slide_hd">');n.push(' <div class="m_rt_tab">');n.push('	<ul class="ul_route_tab">');n.push('	 <li data-to="Hot" class="cur"><a onfocus="blur()" href="javascript:;">热门</a></li>');n.push('	 <li data-to="Asia"><em class="sl"></em><a onfocus="blur()" href="javascript:;">亚洲</a></li>');n.push('	 <li data-to="America"><em class="sl"></em><a onfocus="blur()" href="javascript:;">美洲</a></li>');n.push('	 <li data-to="Europe"><em class="sl"></em><a onfocus="blur()" href="javascript:;">欧洲</a></li>');n.push('	 <li data-to="Africa/Oceania"><em class="sl"></em><a onfocus="blur()" href="javascript:;">非洲/大洋洲</a></li>');n.push("	</ul>");n.push('	<div class="sel_panel" style="display:inline"></div>');n.push(" </div>");n.push(' <h3>国际•港澳台</h3><span class="lines">低价航线</span>');n.push(' <div class="bg_postmark"><i class="bg_',this.cfg.type=="rt"?"wf":"dc",'"></i></div>');n.push("</div>");n.push('<div class="m_slide_bd">');n.push('<div class="e_route_ct">');n.push(' <div class="m_route_wp clrfix">');n.push(" </div>");n.push(" </div></div>");n.push("</div>");this._el=t(n.join(""));var r=this.cfg.type=="ow"?1:0;this.holder.find(".b_sep_route").eq(r).replaceWith(this._el);return this};r.prototype.insertContent=function(e){var r=encodeURIComponent;var i,s=this.cfg.type,o;var u=$jex.parseQueryParam().ex_track;u=u?"&ex_track="+u:"";var a=['<ul class="ul_route_lst">'];i=s=="ow"?"/twell/flight/Search.jsp?searchType=OnewayFlight&from=tejia_inter_search&":"/twell/flight/Search.jsp?searchType=RoundTripFlight&from=tejia_inton_search&";if(location.protocol==="https:"){i+="ishttps=1&"}t.each(e,function(e,t){var f=t.totalPrice&&t.totalPrice>0?t.totalPrice:t.price;var l=i+"fromCity="+r(t.ffrom)+"&toCity="+r(t.fto)+"&fromDate="+r(t.dtime)+"&lowestPrice="+f+u;var c=t.dtime.replace(/[0-9]*-/,"").replace(/-/,".");var h;var p=t.ffrom+"-"+t.fto;var d=t.ffrom;var v=t.fto;if(s!=="ow"){l+="&toDate="+r(t.atime);c=t.dtime.replace(/[0-9]*-/,"").replace(/-/,".");h=t.atime.replace(/[0-9]*-/,"").replace(/-/,".");o="i_wf"}else{c=t.dtime.replace(/[0-9]*-/,"").replace(/-/,".");o="i_ow"}d=d.replace("（","(").replace("）",")");v=v.replace("（","(").replace("）",")");var m=n.ie&&n.ie<9?9:10;v=d.length+v.length>m?v.substring(0,m-d.length)+"..":v;a.push('<li><a target="_blank" onfocus="blur()" href="',l,'" title="',p,'"><span class="city">',d,'<i class="',o,'"></i>',v,'</span><span class="pr"><i class="rmb">¥</i>',f,'</span><span class="date">',c,s=="ow"?"":'<i class="i_wf"></i>'+h,"</span></a></li>");if(e==3||e==11)a.push('<li class="li_space"></li>');e==7&&a.push('</ul><div class="line"></div><ul class="ul_route_lst">')});a.push("</ul>");this._el.find(".m_route_wp").html(a.join(""))};r.prototype.onAfterRender=function(){var e=this;this._el.delegate("ul.ul_route_tab li","click",function(n){var r=t(this);if(r.hasClass("cur"))return;e._el.find("li.cur").removeClass("cur");r.addClass("cur");e.set({to:r.data("to")}).load();n.preventDefault()});this._el.delegate(".ul_route_tab li a","click",function(e){GodEye.log({r:"inter_suggest_chg_tab"})});this._el.delegate(".ul_route_lst li a","click",function(e){GodEye.log({r:"inter_suggest"})})};r.prototype.add=function(e){this._el.find(".sel_panel").append(e.get());e.onAfterRender()};i.classes={ON:"b_select_box_on",UP:"f-caret-up",DOWN:"f-caret-down"};i.prototype.init=function(){var e=this;this.getCache=false;this.render(this.items);t(this).bind("select",function(t,n,r){e.change(n,r)})};i.prototype.render=function(e){var n=this;var r=['<div class="b_select_box'];if(this.key=="month"){r.push(' b_select_box_month">')}else if(this.key=="from"){r.push(' b_select_box_city">')}else{r.push('">')}r.push(' <div class="e_select_hd clrfix"><span class="e_select_input">',this.def,'</span><i class="iconfont f-caret-down"></i></div>');r.push(' <div class="e_select_sug">');r.push("	<ul>");t.each(e,function(e,t){r.push("<li data-",n.key,'="',t.value,'"><a href="javascript:;">',t.label,"</a></li>")});r.push("	</ul>");r.push(" </div>");r.push("</div>");this._el=t(r.join(""));return this};i.prototype.onAfterRender=function(){var e=this;var n=i.classes.ON,r=i.classes.UP,s=i.classes.DOWN;var o=this._el;var u=o.find("i");o.on("mouseover",function(e){o.addClass(n);u.addClass(r);u.removeClass(s)}).on("mouseout",function(){o.removeClass(n);u.removeClass(r);u.addClass(s)});o.delegate("ul li","click",function(r){var i=t(this);var a={};a[e.key]=i.data(e.key);t(e).trigger("select",[a,i.first().text()]);o.removeClass(n);u.addClass(s);u.removeClass(s);r.preventDefault()})};i.prototype.insertNode=function(e){var t="<li data-"+this.key+'="'+e+'"><a href="javascript:;">'+e+"</a></li>";this._el.find("ul").prepend(t)};i.prototype.updateDefValue=function(e){var t=this._el.find("span.e_select_input");if(e.length>4&&e.length<=6){t.text(e)}else if(e.length>6){t.text(e.substring(0,6))}else{t.text(e+"出发")}};i.prototype.get=function(){return this._el};i.prototype.find=function(e){return this._el.find(e)};e.InterLowpr=r})(window,jQuery,$jex);(function(e){function t(t,n,r){var i=this,s=e(this),o="beforeSwitch",u="onSwitch";e.isFunction(n[o])&&s.bind(o,n[o]),e.isFunction(n[u])&&s.bind(u,n[u]),e.extend(i,{_initPlugins:function(){var t=e.switchable.Plugins,n=t.length,r=0;for(;r<n;r++)t[r].init&&t[r].init(i)},_init:function(){i.container=t,i.config=n,!n.panels||!n.panels.jquery&&e.type(n.panels)!=="string"?i.panels=t.children():i.panels=t.find(n.panels),i.length=Math.ceil(i.panels.length/n.steps);if(i.length<1){window.console&&console.warn("No panel in "+r);return}i.index=n.initIndex===null?undefined:n.initIndex+(n.initIndex<0?i.length:0),n.effect==="none"&&i.panels.slice(i.index*n.steps,(i.index+1)*n.steps).show();if(!!n.triggers){var s,o,u;if(n.triggers.jquery)i.triggers=n.triggers.slice(0,i.length);else{var f=e.type(n.triggers)==="string",l=[];for(o=1;o<=i.length;o++)l.push("<li>"+(f?n.triggers:o)+"</li>");i.triggers=e("<ul/>",{"class":n.triggersWrapCls,html:l.join("")})[n.putTriggers](t).find("li")}i.triggers.eq(i.index).addClass(n.currentTriggerCls);for(o=0;o<i.length;o++)s=i.triggers.eq(o),s.click({index:o},function(e){u=e.data.index;if(!i._triggerIsValid(u))return;i._cancelDelayTimer(),i.switchTo(u)}),n.triggerType==="mouse"&&s.mouseenter({index:o},function(e){u=e.data.index;if(!i._triggerIsValid(u))return;i._delayTimer=setTimeout(function(){i.switchTo(u)},n.delay*1e3)}).mouseleave(function(){i._cancelDelayTimer()})}},_triggerIsValid:function(e){return i.index!==e},_cancelDelayTimer:function(){i._delayTimer&&(clearTimeout(i._delayTimer),i._delayTimer=undefined)},_switchTrigger:function(e,t){i.triggers.eq(e).removeClass(n.currentTriggerCls).end().eq(t).addClass(n.currentTriggerCls)},_switchPanels:function(t,r,s){e.switchable.Effects[n.effect].call(i,t,r,s)},willTo:function(e){return e?i.index>0?i.index-1:n.loop?i.length-1:!1:i.index<i.length-1?i.index+1:n.loop?0:!1},switchTo:function(t,r){var l=e.Event(o);s.trigger(l,[t]);if(l.isDefaultPrevented())return;return i._switchPanels(i.index,t,r),!n.triggers||i._switchTrigger(i.index,t),i.index=t,l.type=u,s.trigger(l,[t]),i}}),i._init(),i._initPlugins()}e.switchable={Config:{triggers:!0,putTriggers:"insertAfter",triggersWrapCls:"switchable-triggers",currentTriggerCls:"current",panels:null,steps:1,triggerType:"mouse",delay:.1,initIndex:0,effect:"none",easing:"ease",duration:.5,loop:!0,beforeSwitch:null,onSwitch:null,api:!1},Effects:{none:function(e,t){var n=this,r=n.config;n.panels.slice(e*r.steps,(e+1)*r.steps).hide().end().slice(t*r.steps,(t+1)*r.steps).show()}},Plugins:[]},e.fn.switchable=function(n){var r=e(this),i=r.length,s=r.selector,o=[],u;n=e.extend({},e.switchable.Config,n),n.effect=n.effect.toLowerCase();for(u=0;u<i;u++)o[u]=new t(r.eq(u),n,s+"["+u+"]");return n.api?o[0]:r}})(jQuery),function(e){function t(){var e=document.documentElement,t=["Webkit","Moz"],n="transition",r="",i;if(e.style[n]!==undefined)r=n;else for(i=0;i<2;i++)if(e.style[n=t[i]+"Transition"]!==undefined){r=n;break}return r}e.switchable.Anim=function(n,r,i,s,o,u){var f=this,l={},c,h;e.switchable.Transition===undefined&&(e.switchable.Transition=t()),c=e.switchable.Transition,e.extend(f,{isAnimated:!1,run:function(){if(f.isAnimated)return;i=i*1e3;if(c)l[c+"Property"]=u||"all",l[c+"Duration"]=i+"ms",l[c+"TimingFunction"]=s,n.css(e.extend(r,l)),h=setTimeout(function(){f._clearCss(),f._complete()},i);else{var t=/cubic-bezier\(([\s\d.,]+)\)/,o=s.match(t),p=e.switchable.TimingFn[s];if(p||o)s=e.switchable.Easing(o?o[1]:p.match(t)[1]);n.animate(r,i,s,function(){f._complete()})}return f.isAnimated=!0,f},stop:function(e){if(!f.isAnimated)return;return c?(clearTimeout(h),h=undefined):n.stop(!1,e),f.isAnimated=!1,f},_complete:function(){o&&o()},_clearCss:function(){l[c+"Property"]="none",n.css(l)}})}}(jQuery),function(e){function t(e){return"cubic-bezier("+e+")"}function n(e){var t=[],n=101,r;for(r=0;r<=n;r++)t[r]=e.call(null,r/n);return function(e){if(e===1)return t[n];var r=n*e,i=Math.floor(r),s=t[i],o=t[i+1];return s+(o-s)*(r-i)}}function r(e,t,n,r,i,s){function o(e){return((h*e+bx)*e+cx)*e}function u(e){return((ay*e+by)*e+cy)*e}function a(e){return(3*h*e+2*bx)*e+cx}function f(e){return 1/(200*e)}function l(e,t){return u(c(e,t))}function c(e,t){function n(e){return e>=0?e:0-e}var r,i,s,u,f,l;for(s=e,l=0;l<8;l++){u=o(s)-e;if(n(u)<t)return s;f=a(s);if(n(f)<1e-6)break;s=s-u/f}r=0,i=1,s=e;if(s<r)return r;if(s>i)return i;while(r<i){u=o(s);if(n(u-e)<t)return s;e>u?r=s:i=s,s=(i-r)*.5+r}return s}var h=bx=cx=ay=by=cy=0;return cx=3*t,bx=3*(r-t)-cx,h=1-cx-bx,cy=3*n,by=3*(i-n)-cy,ay=1-cy-by,l(e,f(s))}e.switchable.TimingFn={ease:t(".25, .1, .25, 1"),linear:t("0, 0, 1, 1"),"ease-in":t(".42, 0, 1, 1"),"ease-out":t("0, 0, .58, 1"),"ease-in-out":t(".42, 0, .58, 1")},e.switchable.Easing=function(i){var s,o,u=0;i=i.split(","),o=i.length;for(;u<o;u++)i[u]=parseFloat(i[u]);if(o!==4)window.console&&console.warn(t(i.join(", "))+" missing argument.");else{s="cubic-bezier-"+i.join("-");if(!e.easing[s]){var f=n(function(e){return r(e,i[0],i[1],i[2],i[3],5)});e.easing[s]=function(e,t,n,r){return f.call(null,e)}}}return s}}(jQuery),function(e){e.extend(e.switchable.Config,{autoplay:!1,interval:3,pauseOnHover:!0}),e.switchable.Plugins.push({name:"autoplay",init:function(t){function n(){f=t.willTo(t.isBackward);if(f===!1){t._cancelTimers();return}t.switchTo(f,t.isBackward?"backward":"forward")}function r(){u=setInterval(function(){n()},(i.interval+i.duration)*1e3)}var i=t.config,s=!1,o,u,f;if(!i.autoplay||t.length<=1)return;i.pauseOnHover&&t.panels.add(t.triggers).hover(function(){t._pause()},function(){s||t._play()}),e.extend(t,{_play:function(){t._cancelTimers(),t.paused=!1,o=setTimeout(function(){n(),r()},i.interval*1e3)},_pause:function(){t._cancelTimers(),t.paused=!0},_cancelTimers:function(){o&&(clearTimeout(o),o=undefined),u&&(clearInterval(u),u=undefined)},play:function(){return t._play(),s=!1,t},pause:function(){return t._pause(),s=!0,t}}),t._play()}})}(jQuery),function(e){e.extend(e.switchable.Config,{prev:null,next:null}),e.switchable.Plugins.push({name:"carousel",init:function(t){var n=t.config,r=["backward","forward"],i=["prev","next"],s,o,u,f=0;if(!n.prev&&!n.next)return;for(;f<2;f++)s=i[f],o=n[s],o&&(u=t[s+"Btn"]=o.jquery?o:e(o),u.click({direction:r[f]},function(e){e.preventDefault();if(!t.anim){var n=e.data.direction,i=t.willTo(n===r[0]);i!==!1&&t.switchTo(i,n)}}))}})}(jQuery),function(e){e.switchable.Effects.fade=function(t,n){var r=this,i=r.config,s=r.panels,o=s.eq(t),u=s.eq(n);r.anim&&(r.anim.stop(),s.eq(r.anim.to).css({zIndex:r.length}).end().eq(r.anim.from).css({opacity:0,zIndex:1})),u.css({opacity:1}),r.anim=(new e.switchable.Anim(o,{opacity:0},i.duration,i.easing,function(){u.css({zIndex:r.length}),o.css({zIndex:1}),r.anim=undefined},"opacity")).run(),r.anim.from=t,r.anim.to=n},e.switchable.Plugins.push({name:"fade effect",init:function(e){var t=e.config,n=e.panels.eq(e.index);if(t.effect!=="fade"||t.steps!==1)return;e.panels.not(n).css({opacity:0,zIndex:1}),n.css({opacity:1,zIndex:e.length})}})}(jQuery),function(e){var t=["scrollleft","scrollright","scrollup","scrolldown"],n="position",r="absolute",i="relative";e.extend(e.switchable.Config,{end2end:!1,groupSize:[],visible:null,clonedCls:"switchable-cloned"});for(var s=0;s<4;s++)e.switchable.Effects[t[s]]=function(t,n,r){var i=this,s=i.config,o=i.length-1,u=r==="backward",f=s.end2end&&(u&&t===0&&n===o||r==="forward"&&t===o&&n===0),l={};l[i.isHoriz?"left":"top"]=f?i._adjustPosition(u):-i.groupSize[i.isHoriz?0:1]*n,i.anim&&i.anim.stop(),i.anim=(new e.switchable.Anim(i.panels.parent(),l,s.duration,s.easing,function(){f&&i._resetPosition(u),i.anim=undefined})).run()};e.switchable.Plugins.push({name:"scroll effect",init:function(s){var o=s.config,u=o.steps,f=s.panels,l=f.parent(),h=e.inArray(o.effect,t),p=h===0||h===1,v=f.eq(0).outerWidth(!0),m=f.eq(0).outerHeight(!0),g=p?0:1,y=s.length-1,w=p?"left":"top",E={};if(h===-1)return;s.groupSize=[o.groupSize[0]||v*u,o.groupSize[1]||m*u];if(o.end2end){var S=f.length,x=!p&&o.groupSize[0]?s.groupSize[g]*s.length:(p?v:m)*S,T=S-y*u,N=(p?v:m)*T,C=!p&&o.groupSize[0]?s.groupSize[g]:N,k;o.loop=!0,o.visible&&o.visible<S&&o.visible>T&&f.slice(0,o.visible).clone(!0).addClass(o.clonedCls).appendTo(l).click(function(t){t.preventDefault(),f.eq(e(this).index()-S).click()}),e.extend(s,{_adjustPosition:function(e){return k=e?y:0,E[n]=i,E[w]=(e?-1:1)*x,f.slice(k*u,(k+1)*u).css(E),e?C:-x},_resetPosition:function(e){k=e?y:0,E[n]="",E[w]="",f.slice(k*u,(k+1)*u).css(E),E[n]=undefined,E[w]=e?-s.groupSize[g]*y:0,l.css(E)}})}s.container.css(n)=="static"&&s.container.css(n,i),E[n]=r,E[w]=-s.groupSize[g]*s.index,l.css(E).css("width",p?2*s.groupSize[g]*s.length:o.groupSize[0]?o.groupSize[0]:undefined),s.isHoriz=p,s.isBackward=h===1||h===3}})}(jQuery),function(e){var t=["accordion","horizaccordion"],n=[["height","marginTop","marginBottom","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],["width","marginLeft","marginRight","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]];e.extend(e.switchable.Config,{multiple:!1,customProps:{}});for(var r=0;r<2;r++)e.switchable.Effects[t[r]]=function(t,n){var r=this,i=r.config,s=t!==n;r.anim&&r.anim.stop(s),r.anim=(new e.switchable.Anim(r.panels.eq(n),r.triggers.eq(n).hasClass(i.currentTriggerCls)?r.collapseProps:r.expandProps[n],i.duration,i.easing,function(){r.anim=undefined})).run(),!i.multiple&&t!==undefined&&s&&(r.anim2&&r.anim2.stop(s),r.anim2=(new e.switchable.Anim(r.panels.eq(t),r.collapseProps,i.duration,i.easing,function(){r.anim2=undefined})).run())};e.switchable.Plugins.push({name:"accordion effect",init:function(r){var i=r.config,s=e.inArray(i.effect,t);if(s===-1||i.steps!==1)return;window.console&&console.info("Remember to set the border-width for the accordion's panels, even without border."),e.extend(r,{_triggerIsValid:function(e){return!0},_switchTrigger:function(e,t){var n=r.triggers,s=i.currentTriggerCls;n.eq(t).toggleClass(s),!i.multiple&&e!==undefined&&e!==t&&n.eq(e).removeClass(s)}}),r.expandProps=[],r.collapseProps={};var o=n[s].length,u={},f,l,h;for(h=0;h<o;h++)r.collapseProps[n[s][h]]=0;e.extend(r.collapseProps,i.customProps);for(h=0;h<r.length;h++){f=r.panels.eq(h);for(var p=0;p<o;p++)l=n[s][p],u[l]=f.css(l);r.expandProps.push(e.extend({},u)),f.css(e.extend({overflow:"hidden"},h===r.index?u:r.collapseProps))}}})}(jQuery);(function(){var e=$(".js_topicLinkContent");var t=$(".js_topicBtn");var n=0;var r=e.children();var i=0;var s=setInterval(function(){var o=e.find("iframe");var u=o.length;if(u!==n){if(u+1===r.length){clearInterval(s)}n=u;t.show();e.switchable({onSwitch:function(){var t=i>this.index||i-this.index<-1;i=this.index;if(this.index!==0&&e.find("li:eq("+this.index+")").find("iframe").length===0){var n=this.index+1*(t?-1:1);if(n<0){n=r.length-1}n%=r.length;this.switchTo(n)}},prev:$(".a_prev"),next:$(".a_next"),api:true,autoplay:true,interval:5})}},100)})();var Hogan={};(function(e,t){function a(e){return String(e===null||e===undefined?"":e)}function f(e){e=a(e);return u.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(s,"&#39;").replace(o,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r;this.c=r;this.options=i;this.text=n||"";this.buf=t?[]:""};e.Template.prototype={r:function(e,t,n){return""},v:f,t:a,render:function(t,n,r){return this.ri([t],n||{},r)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];if(!i){return""}if(this.c&&typeof i=="string"){i=this.c.compile(i,this.options)}return i.ri(t,n,r)},rs:function(e,t,n){var r=e[e.length-1];if(!l(r)){n(e,t,this);return}for(var i=0;i<r.length;i++){e.push(r[i]);n(e,t,this);e.pop()}},s:function(e,t,n,r,i,s,o){var u;if(l(e)&&e.length===0){return false}if(typeof e=="function"){e=this.ls(e,t,n,r,i,s,o)}u=e===""||!!e;if(!r&&u&&t){t.push(typeof e=="object"?e:t[t.length-1])}return u},d:function(e,t,n,r){var i=e.split("."),s=this.f(i[0],t,n,r),o=null;if(e==="."&&l(t[t.length-2])){return t[t.length-1]}for(var u=1;u<i.length;u++){if(s&&typeof s=="object"&&i[u]in s){o=s;s=s[i[u]]}else{s=""}}if(r&&!s){return false}if(!r&&typeof s=="function"){t.push(o);s=this.lv(s,t,n);t.pop()}return s},f:function(e,t,n,r){var i=false,s=null,o=false;for(var u=t.length-1;u>=0;u--){s=t[u];if(s&&typeof s=="object"&&e in s){i=s[e];o=true;break}}if(!o){return r?false:""}if(!r&&typeof i=="function"){i=this.lv(i,t,n)}return i},ho:function(e,t,n,r,i){var s=this.c;var o=this.options;o.delimiters=i;var r=e.call(t,r);r=r==null?String(r):r.toString();this.b(s.compile(r,o).render(t,n));return false},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");this.buf=[];return e}:function(){var e=this.buf;this.buf="";return e},ls:function(e,t,n,r,i,s,o){var u=t[t.length-1],a=null;if(!r&&this.c&&e.length>0){return this.ho(e,u,n,this.text.substring(i,s),o)}a=e.call(u);if(typeof a=="function"){if(r){return true}else if(this.c){return this.ho(a,u,n,this.text.substring(i,s),o)}}return a},lv:function(e,t,n){var r=t[t.length-1];var i=e.call(r);if(typeof i=="function"){i=a(i.call(r));if(this.c&&~i.indexOf("{{")){return this.c.compile(i,this.options).render(r,n)}}return a(i)}};var n=/&/g,r=/</g,i=/>/g,s=/\'/g,o=/\"/g,u=/[&<>\"\']/;var l=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(typeof exports!=="undefined"?exports:Hogan,true);(function(e){function u(e){if(e.n.substr(e.n.length-1)==="}"){e.n=e.n.substring(0,e.n.length-1)}}function a(e){if(e.trim){return e.trim()}return e.replace(/^\s*|\s*$/g,"")}function f(e,t,n){if(t.charAt(n)!=e.charAt(0)){return false}for(var r=1,i=e.length;r<i;r++){if(t.charAt(n+r)!=e.charAt(r)){return false}}return true}function l(e,t,n,r){var i=[],s=null,o=null;while(e.length>0){o=e.shift();if(o.tag=="#"||o.tag=="^"||c(o,r)){n.push(o);o.nodes=l(e,o.tag,n,r);i.push(o)}else if(o.tag=="/"){if(n.length===0){throw new Error("Closing tag without opener: /"+o.n)}s=n.pop();if(o.n!=s.n&&!h(o.n,s.n,r)){throw new Error("Nesting error: "+s.n+" vs. "+o.n)}s.end=o.i;return i}else{i.push(o)}}if(n.length>0){throw new Error("missing closing tag: "+n.pop().n)}return i}function c(e,t){for(var n=0,r=t.length;n<r;n++){if(t[n].o==e.n){e.tag="#";return true}}}function h(e,t,n){for(var r=0,i=n.length;r<i;r++){if(n[r].c==e&&n[r].o==t){return true}}}function p(e){return e.replace(s,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function d(e){return~e.indexOf(".")?"d":"f"}function v(e){var t="";for(var n=0,r=e.length;n<r;n++){var i=e[n].tag;if(i=="#"){t+=m(e[n].nodes,e[n].n,d(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag)}else if(i=="^"){t+=g(e[n].nodes,e[n].n,d(e[n].n))}else if(i=="<"||i==">"){t+=y(e[n])}else if(i=="{"||i=="&"){t+=b(e[n].n,d(e[n].n))}else if(i=="\n"){t+=E('"\\n"'+(e.length-1==n?"":" + i"))}else if(i=="_v"){t+=w(e[n].n,d(e[n].n))}else if(i===undefined){t+=E('"'+p(e[n])+'"')}}return t}function m(e,t,n,r,i,s){return"if(_.s(_."+n+'("'+p(t)+'",c,p,1),'+"c,p,0,"+r+","+i+',"'+s+'")){'+"_.rs(c,p,"+"function(c,p,_){"+v(e)+"});c.pop();}"}function g(e,t,n){return"if(!_.s(_."+n+'("'+p(t)+'",c,p,1),c,p,1,0,0,"")){'+v(e)+"};"}function y(e){return'_.b(_.rp("'+p(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function b(e,t){return"_.b(_.t(_."+t+'("'+p(e)+'",c,p,0)));'}function w(e,t){return"_.b(_.v(_."+t+'("'+p(e)+'",c,p,0)));'}function E(e){return"_.b("+e+");"}var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,s=/\\/g,o={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(n,r){function S(){if(v.length>0){m.push(new String(v));v=""}}function x(){var e=true;for(var n=b;n<m.length;n++){e=m[n].tag&&o[m[n].tag]<o["_v"]||!m[n].tag&&m[n].match(t)===null;if(!e){return false}}return e}function T(e,t){S();if(e&&x()){for(var n=b,r;n<m.length;n++){if(!m[n].tag){if((r=m[n+1])&&r.tag==">"){r.indent=m[n].toString()}m.splice(n,1)}}}else if(!t){m.push({tag:"\n"})}g=false;b=m.length}function N(e,t){var n="="+E,r=e.indexOf(n,t),i=a(e.substring(e.indexOf("=",t)+1,r)).split(" ");w=i[0];E=i[1];return r+n.length-1}var i=n.length,s=0,l=1,c=2,h=s,p=null,d=null,v="",m=[],g=false,y=0,b=0,w="{{",E="}}";if(r){r=r.split(" ");w=r[0];E=r[1]}for(y=0;y<i;y++){if(h==s){if(f(w,n,y)){--y;S();h=l}else{if(n.charAt(y)=="\n"){T(g)}else{v+=n.charAt(y)}}}else if(h==l){y+=w.length-1;d=o[n.charAt(y+1)];p=d?n.charAt(y+1):"_v";if(p=="="){y=N(n,y);h=s}else{if(d){y++}h=c}g=y}else{if(f(E,n,y)){m.push({tag:p,n:a(v),otag:w,ctag:E,i:p=="/"?g-E.length:y+w.length});v="";y+=E.length-1;h=s;if(p=="{"){if(E=="}}"){y++}else{u(m[m.length-1])}}}else{v+=n.charAt(y)}}}T(g,true);return m};e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+v(t)+"return _.fl();";if(r.asString){return"function(c,p,i){"+i+";}"}return new e.Template(new Function("c","p","i",i),n,e,r)};e.parse=function(e,t,n){n=n||{};return l(e,"",[],n.sectionTags||[])},e.cache={};e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString;var r=this.cache[n];if(r){return r}r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t);return this.cache[n]=r}})(typeof exports!=="undefined"?exports:Hogan);if(typeof define==="function"&&define.amd){define(Hogan)}var SearchBtn_track=function(){var e=[];var t=false;var n=function(){e=[];var t=$(".ch_search_tab .cur");var n=t.find("a").text();if(n.indexOf("国际")===0){n="international"}if(n.indexOf("国内")===0){n="domestic"}if(n.indexOf("特价")===0){n="tejia"}var r=$(".ch_sch_form");var i=$(".ch_sch_form input:checked").map(function(e,t){return t.value});var s={subject:n,flightType:i[0],fromCity:r.find("input[name='fromCity']")[0].value,toCity:r.find("input[name='toCity']")[0].value,fromDate:r.find("input[name='fromDate']")[0].value,toDate:r.find("input[name='toDate']")[0].value};var o={subject:n,flightType:i[1],fromCity:r.find("input[name='fromCity']")[1].value,toCity:r.find("input[name='toCity']")[1].value,fromDate:r.find("input[name='fromDate']")[1].value,toDate:r.find("input[name='toDate']")[1].value};var u={subject:n,flightType:i[2],fromCity:r.find("input[name='fromCity']")[2].value,toCity:r.find("input[name='toCity']")[2].value,fromDate:r.find("input[name='fromDate']")[2].value};e.push(s,o,u)};var r=function(e){if(!t){var n="/site/track.htm?action="+window._ba_utm_s+"|search_BtnFlag|"+e+"|&t="+Date.parse(new Date);(new Image).src=n;t=true}};var i=function(e,t){for(var n=0;n<e.length;n++)t(e[n])};var s=function(e,t){var n=[];i(t,function(t){n.push(e(t))});return n};var o=function(e){var t=$("#moreway-ser");if(e.flightType==="OnewayFlight"){delete e.toDate}if(e.flightType==="MultiTripFlight"){e.fromCity=s(function(e,t){if(!e.value)return"noArea";return e.value},$.makeArray(t.find("input[name='fromCityMulti']")));e.toCity=s(function(e,t){if(!e.value)return"noArea";return e.value},$.makeArray(t.find("input[name='toCityMulti']")));e.fromDate=s(function(e,t){if(!e.value)return"noArea";return e.value},$.makeArray(t.find("input[name='fromDateMulti']")));delete e.toDate}};var u=function(){n();var t=$(".ch_search_tab .cur");var i=e[t.index()];o(i);var s=$.map(i,function(e){return encodeURIComponent(e)}).join("|");r(s)};var a=function(e){r(e)};return u}();var searchTrack=function(e){function s(){this.onlyOne=false;this.config={TJ:{type:"特价机票"},DMT:{type:"国内机票"},INT:{type:"国际机票"}}}window.search_btn=SearchBtn_track;var t,n,r;var i=function(e){var t="/site/track.htm?action="+window._ba_utm_s+"|"+e+"|&t="+Date.parse(new Date);(new Image).src=t};e.extend(s.prototype,{init:function(e,t,n){var r=this;var i=this.config[e];i.flt=t;if(n){i.mult=n}this.DMT=this.config["DMT"].flt;this.INT=this.config["INT"].flt;this.MULT=this.config["INT"].mult;this.TJ=this.config["TJ"].flt;this.fltType=i;this._bindEvents();window.searTrack=this},triggerMult:function(t,n,r){if(t.mults){this._type=t._type;e(this).trigger(n,r)}},_updateTime:function(t){var n=this;var r=t.activeEl.closest("form");var i=r;if(r.find("[name='searchType']:checked").val()=="MultiTripFlight"){i=t.activeEl.closest(".muti_control")}else if(r.find("[name='searchType']:checked").val()=="PriceTrend"){i=t.activeEl.closest("#pricetrend-ser")}var s=i.find("input[name*=fromCity]").val();if(!s){s=""}if(window.QNR){var o=s.indexOf("(");if(o===-1){o=s.length}e.ajax({url:"//flight.qunar.com/twell/flight/inter/localdate",data:{depCity:decodeURI(s.substr(0,o))},dataType:"jsonp",success:function(e){if(!window.QNR){window.QNR={}}window.QNR.isLocal=e.isLocal;var t=e.localDate.replace(/-/g,"/");GSERVER_TIME=new Date(t);if(e.isLocal){n.fltType.flt.$fromDate.data("q-datepicker-fly").args.minDate=GSERVER_TIME}}})}},triggerNoData:function(){i("noDatalook")},_getCurType:function(){var t=e(".ch_search_tab .cur");var n=t.find("a").text();if(n.indexOf("国际")===0){n="international"}if(n.indexOf("国内")===0){n="domestic"}if(n.indexOf("特价")===0){n="tejia"}return n},_bindEvents:function(){this._bindFocusEvent();this._bindHomeClickBtn();this._bindhotCity();this._bindSelectSuggest();this._bindnoResult();this._bindHaveResult()},_bindHaveResult:function(){var s=this;var o=function(e,r){var o=r[1];var u=r[3];s.noflag=false;i(r.join("|")+"|"+n);if(o!==t&&!s.onlyOne){i("addItem_flag|"+u+"|"+n);s.onlyOne=true}};var u=function(e,t){r=t;s.notfind=true};e.each(this.config,function(t,n){n.flt&&e(n.flt.fromCitySuggest).bind("getResultData",o);n.flt&&e(n.flt.toCitySuggest).bind("getResultData",o)});e(this).bind("getResultData",o);this.MULT&&e(this.MULT.fromCitySuggest).bind("getResultData",o);this.MULT&&e(this.MULT.toCitySuggest).bind("getResultData",o);e(this).bind("haveData",u)},_bindnoResult:function(){var t=this;var s=function(e,s){if(!t.noflag&&!t.notfind){var o="suggest-nofind-noData|"+encodeURIComponent(s)+"|"+t._type+"|"+n;i(o);t.noflag=true;t.notfind=false}if(!t.noflag&&t.notfind){var o="suggest-nofind|"+encodeURIComponent(s)+"|"+r+"|"+t._type+"|"+n;i(o);t.noflag=true}};e.each(this.config,function(t,n){n.flt&&e(n.flt.fromCitySuggest).bind("suggest-nofind",s);n.flt&&e(n.flt.toCitySuggest).bind("suggest-nofind",s)});this.MULT&&e(this.MULT.fromCitySuggest).bind("suggest-nofind",s);this.MULT&&e(this.MULT.toCitySuggest).bind("suggest-nofind",s);e(this).bind("suggest-nofind",s)},_bindSelectSuggest:function(){var t=this;var r=function(e,r){if(!t.sflag){var s="suggest-selected|"+r+"|"+t._type+"|"+n;i(s);t.sflag=true}};e(this).bind("suggest-selected",r);e.each(this.config,function(t,n){n.flt&&e(n.flt.fromCitySuggest).bind("suggest-selected",r);n.flt&&e(n.flt.toCitySuggest).bind("suggest-selected",r)});this.MULT&&e(this.MULT.fromCitySuggest).bind("suggest-selected",r);this.MULT&&e(this.MULT.toCitySuggest).bind("suggest-selected",r)},_bindFocusEvent:function(){var s=this;n=s._getCurType();var o=function(){s.sflag=false;n=s._getCurType();if(this.value!==t&&this.value===""&&!s.deleteONE){i("deleteItem_flag|"+this.name+"|"+n);s.deleteONE=true}if(this.value!==t&&!s.onlyOne&&!s.deleteONE){i("addItem_flag|"+this.name+"|"+n);s.onlyOne=true}};var u=function(){s.onlyOne=false;s.deleteONE=false;s.noflag=false;s.outflag=false;s.notfind=false;s._type=this.name;t=this.value;e(this).keyup(o)};var a=function(){var e=this.name;var t=this;if(!s.outflag&&s.noflag&&!s.sflag){n=s._getCurType();var o="suggest-nofind|"+encodeURIComponent(this.value)+"|"+r+"|"+this.name+"|"+n;s.outflag=true;i(o)}};e.each(this.config,function(t,n){n.flt&&e(n.flt["$fromCity"]).focus(u);n.flt&&e(n.flt["$toCity"]).focus(u);n.flt&&e(n.flt["$fromCity"]).focusout(a);n.flt&&e(n.flt["$toCity"]).focusout(a)});this.MULT&&e(this.MULT.$form.find('input[name="fromCityMulti"]')).focus(u);this.MULT&&e(this.MULT.$form.find('input[name="toCityMulti"]')).focus(u);this.MULT&&e(this.MULT.$form.find('input[name="fromCityMulti"]')).focusout(a);this.MULT&&e(this.MULT.$form.find('input[name="toCityMulti"]')).focusout(a)},_bindHomeClickBtn:function(){var t=this;e.each(this.config,function(n,r){e(r.flt).bind("select_btn",function(){if(!t.onlyOne){search_btn();t.onlyOne=true}})})},_bindhotCity:function(){var t=this;e.each(this.config,function(t,n){e(n.flt).bind("no_exhitbit",function(e,t){i("no_exhitbit|"+t)})});e(this.MULT).bind("no_exhitbit",function(e,t){i("no_exhitbit|"+t)})}});return new s}(jQuery);(function(e){var t={id:"922547b0066ff8b6686af4a8c74ffad6",filename:"holidayUtil.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){function o(e){if(typeof e=="number"){e=new Date(e)}return e.getFullYear()+"-"+u(e.getMonth()+1)+"-"+u(e.getDate())}function u(e){return e<10?"0"+e:e}function a(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])}function l(e){var t={};for(var n in e){var r=n;var i=e[n];t[n]=i;var u="";var a="";var f;if(i.beforeTime>0){for(var l=1;l<=i.beforeTime;l++){var c={};f=r.split("-");var h=new Date(f[0],f[1]-1,f[2]-l);var p=o(h);c.holidayName=i.holidayName+s.before+l+s.day;c.dayindex=i.dayindex;if(!t[p]){t[p]=c}else{if(i.dayindex>t[p].dayindex&&t[p].beforeTime==null){t[p]=c}}}}if(i.afterTime>0){for(var l=1;l<=i.afterTime;l++){var c={};f=r.split("-");var d=new Date(f[0],f[1]-1,parseInt(f[2])+l);var v=o(d);c.holidayName=i.holidayName+s.after+l+s.day;c.dayindex=i.dayindex;if(!t[v]){t[v]=c}else{if(i.dayindex>t[v].dayindex&&t[o(new Date(h))].afterTime==null){t[v]=c}}}}}return t}var r,i,s;window.getConfigFuns.getCalendarHoliday("www",function(e){r=e.HolidayData;i=e.WorkHoliday;s=e.TransDateEx});var f;var c={getHolidayName:function(e){if(e in r){return r[e].holidayName}return""},getDateTip:function(e){if(f===void 0){f=l(r)}if(e in f){return f[e].holidayName}return""},getAllDateTip:function(){return f},isHoliday:function(e){return r[e]},isWork:function(e){return $.inArray(e,i.work)>-1},isVacation:function(e){return $.inArray(e,i.vacation)>-1},getHolidayInfo:function(e){var t=r[e];return t}};window.holidayUtil=c}(t.exports,t,e);e.____MODULES["922547b0066ff8b6686af4a8c74ffad6"]=t.exports})(this);(function(e){var t={id:"aea55597796544b0bf76c410bb61a75f",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["922547b0066ff8b6686af4a8c74ffad6"]}(t.exports,t,e);e.____MODULES["aea55597796544b0bf76c410bb61a75f"]=t.exports})(this);var FlightSearchBoxConf={hotCity:{domesticfromtj:[{title:"国内热门",key:"domesticfrom"},{title:"ABCDE",key:"ABCDE"},{title:"FGHJ",key:"FGHJ"},{title:"KLMNP",key:"KLMNP"},{title:"QRSTW",key:"QRSTW"},{title:"XYZ",key:"XYZ"},{title:"国际·港澳台",key:"特价国际"}],domesticfrom:[{title:"国内热门",key:"domesticfrom"},{title:"ABCDE",key:"ABCDE"},{title:"FGHJ",key:"FGHJ"},{title:"KLMNP",key:"KLMNP"},{title:"QRSTW",key:"QRSTW"},{title:"XYZ",key:"XYZ"},{title:"国际·港澳台",key:"国际·港澳台"}],"domesticto-tj":[{title:"国内热门",key:"domesticfrom"},{title:"ABCDE",key:"ABCDE"},{title:"FGHJ",key:"FGHJ"},{title:"KLMNP",key:"KLMNP"},{title:"QRSTW",key:"QRSTW"},{title:"XYZ",key:"XYZ"},{title:"国际·港澳台",key:"特价国际"}],domesticto:[{title:"国内热门",key:"domesticto"},{title:"ABCDE",key:"ABCDE"},{title:"FGHJ",key:"FGHJ"},{title:"KLMNP",key:"KLMNP"},{title:"QRSTW",key:"QRSTW"},{title:"XYZ",key:"XYZ"},{title:"国际·港澳台",key:"国际·港澳台"}],interfrom:[{title:"国内热门",key:"domesticfrom"},{title:"ABCDE",key:"ABCDE"},{title:"FGHJ",key:"FGHJ"},{title:"KLMNP",key:"KLMNP"},{title:"QRSTW",key:"QRSTW"},{title:"XYZ",key:"XYZ"},{title:"国际·港澳台",key:"国际·港澳台"}],interto:[{title:"国际·港澳台",key:"国际·港澳台-to"},{title:"亚洲/大洋洲",key:"亚洲/大洋洲"},{title:"美洲",key:"美洲"},{title:"欧洲",key:"欧洲"},{title:"非洲",key:"非洲"},{title:"国内热门",key:"domesticto"}],"interfrom-tj":[{title:"国内热门",key:"domesticfrom"},{title:"ABCDE",key:"ABCDE"},{title:"FGHJ",key:"FGHJ"},{title:"KLMNP",key:"KLMNP"},{title:"QRSTW",key:"QRSTW"},{title:"XYZ",key:"XYZ"},{title:"国际·港澳台",key:"特价国际"}],"interto-tj":[{title:"国际·港澳台",key:"特价国际"},{title:"亚洲/大洋洲",key:"m亚洲/大洋洲"},{title:"美洲",key:"m美洲"},{title:"欧洲",key:"m欧洲"},{title:"非洲",key:"m非洲"},{title:"国内热门",key:"domesticfrom"}],multifrom:[{title:"国内热门",key:"domesticfrom"},{title:"ABCDE",key:"ABCDE"},{title:"FGHJ",key:"FGHJ"},{title:"KLMNP",key:"KLMNP"},{title:"QRSTW",key:"QRSTW"},{title:"XYZ",key:"XYZ"},{title:"国际·港澳台",key:"特价国际"}],multito:[{title:"国际·港澳台",key:"特价国际"},{title:"亚洲/大洋洲",key:"m亚洲/大洋洲"},{title:"美洲",key:"m美洲"},{title:"欧洲",key:"m欧洲"},{title:"非洲",key:"m非洲"},{title:"国内",key:"domesticfrom"}],data:{domesticfrom:{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"上海",country:"中国",code:"SHA"},{name:"北京",country:"中国",code:"BJS"},{name:"成都",country:"中国",code:"CTU"},{name:"昆明",country:"中国",code:"KMG"},{name:"西安",country:"中国",code:"SIA"},{name:"深圳",country:"中国",code:"SZX"},{name:"重庆",country:"中国",code:"CKG"},{name:"杭州",country:"中国",code:"HGH"},{name:"厦门",country:"中国",code:"XMN"},{name:"乌鲁木齐",country:"中国",code:"URC"},{name:"广州",country:"中国",code:"CAN"},{name:"海口",country:"中国",code:"HAK"},{name:"哈尔滨",country:"中国",code:"HRB"},{name:"南京",country:"中国",code:"NKG"},{name:"武汉",country:"中国",code:"WUH"},{name:"长沙",country:"中国",code:"CSX"},{name:"青岛",country:"中国",code:"TAO"},{name:"郑州",country:"中国",code:"CGO"},{name:"三亚",country:"中国",code:"SYX"},{name:"福州",country:"中国",code:"FOC"},{name:"贵阳",country:"中国",code:"KWE"},{name:"天津",country:"中国",code:"TSN"},{name:"南宁",country:"中国",code:"NNG"},{name:"沈阳",country:"中国",code:"SHE"},{name:"太原",country:"中国",code:"TYN"},{name:"大连",country:"中国",code:"DLC"},{name:"兰州",country:"中国",code:"LHW"},{name:"济南",country:"中国",code:"TNA"},{name:"长春",country:"中国",code:"CGQ"},{name:"温州",country:"中国",code:"WNZ"}]}],title:"热门城市",desc:"可直接输入中文名/拼音/英文名/三字码"},domesticto:{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"上海",country:"中国",code:"SHA"},{name:"北京",country:"中国",code:"BJS"},{name:"成都",country:"中国",code:"CTU"},{name:"昆明",country:"中国",code:"KMG"},{name:"西安",country:"中国",code:"SIA"},{name:"重庆",country:"中国",code:"CKG"},{name:"深圳",country:"中国",code:"SZX"},{name:"杭州",country:"中国",code:"HGH"},{name:"海口",country:"中国",code:"HAK"},{name:"乌鲁木齐",country:"中国",code:"URC"},{name:"广州",country:"中国",code:"CAN"},{name:"厦门",country:"中国",code:"XMN"},{name:"哈尔滨",country:"中国",code:"HRB"},{name:"南京",country:"中国",code:"NKG"},{name:"三亚",country:"中国",code:"SYX"},{name:"长沙",country:"中国",code:"CSX"},{name:"贵阳",country:"中国",code:"KWE"},{name:"武汉",country:"中国",code:"WUH"},{name:"郑州",country:"中国",code:"CGO"},{name:"南宁",country:"中国",code:"NNG"},{name:"青岛",country:"中国",code:"TAO"},{name:"天津",country:"中国",code:"TSN"},{name:"大连",country:"中国",code:"DLC"},{name:"沈阳",country:"中国",code:"SHE"},{name:"济南",country:"中国",code:"TNA"},{name:"福州",country:"中国",code:"FOC"},{name:"兰州",country:"中国",code:"LHW"},{name:"太原",country:"中国",code:"TYN"},{name:"温州",country:"中国",code:"WNZ"},{name:"长春",country:"中国",code:"CGQ"}]}],fuzzy:true,hotword:[{"char":"热词",clshct:true,listfuzzy:[{name:"华北",country:"中国"},{name:"华南",country:"中国"},{name:"东北",country:"中国"},{name:"华东",country:"中国"},{name:"华中",country:"中国"},{name:"西南",country:"中国"},{name:"西北",country:"中国"}]}],title:"热门城市",desc:"可直接输入中文名/拼音/英文名/三字码"},interfrom:{cityList:[{name:"上海",country:"中国",code:"SHA"},{name:"北京",country:"中国",code:"BJS"},{name:"广州",country:"中国",code:"CAN"},{name:"昆明",country:"中国",code:"KMG"},{name:"西安",country:"中国",code:"SIA"},{name:"成都",country:"中国",code:"CTU"},{name:"深圳",country:"中国",code:"SZX"},{name:"厦门",country:"中国",code:"XMN"},{name:"乌鲁木齐",country:"中国",code:"URC"},{name:"南京",country:"中国",code:"NKG"},{name:"重庆",country:"中国",code:"CKG"},{name:"杭州",country:"中国",code:"HGH"},{name:"大连",country:"中国",code:"DLC"},{name:"长沙",country:"中国",code:"CSX"},{name:"海口",country:"中国",code:"HAK"},{name:"哈尔滨",country:"中国",code:"HRB"},{name:"青岛",country:"中国",code:"TAO"},{name:"沈阳",country:"中国",code:"SHE"},{name:"三亚",country:"中国",code:"SYX"},{name:"济南",country:"中国",code:"TNA"},{name:"武汉",country:"中国",code:"WUH"},{name:"郑州",country:"中国",code:"CGO"},{name:"贵阳",country:"中国",code:"KWE"},{name:"南宁",country:"中国",code:"NNG"},{name:"福州",country:"中国",code:"FOC"},{name:"天津",country:"中国",code:"TSN"},{name:"长春",country:"中国",code:"CGQ"},{name:"太原",country:"中国",code:"TYN"},{name:"南昌",country:"中国",code:"KHN"},{name:"丽江",country:"中国",code:"LJG"}],title:"热门城市",desc:"可直接输入中文名/拼音/英文名/三字码"},ABCDE:{charSort:true,cityList:[{"char":"A",list:[{name:"阿里",country:"中国",code:"NGQ"},{name:"阿尔山",country:"中国",code:"YIE"},{name:"安庆",country:"中国",code:"AQG"},{name:"阿勒泰",country:"中国",code:"AAT"},{name:"安康",country:"中国",code:"AKA"},{name:"鞍山",country:"中国",code:"AOG"},{name:"安顺",country:"中国",code:"AVA"},{name:"阿克苏",country:"中国",code:"AKU"},{name:"阿拉善左旗",country:"中国",code:"AXF"},{name:"阿拉善右旗",country:"中国",code:"RHT"},{name:"中国澳门",country:"中国澳门",code:"MFM"}]},{"char":"B",list:[{name:"包头",country:"中国",code:"BAV"},{name:"北海",country:"中国",code:"BHY"},{name:"北京",country:"中国",code:"BJS"},{name:"百色",country:"中国",code:"AEB"},{name:"保山",country:"中国",code:"BSD"},{name:"博乐",country:"中国",code:"BPL"},{name:"毕节",country:"中国",code:"BFJ"},{name:"巴彦淖尔",country:"中国",code:"RLK"}]},{"char":"C",list:[{name:"长治",country:"中国",code:"CSX"},{name:"池州",country:"中国",code:"JUH"},{name:"长春",country:"中国",code:"CGQ"},{name:"常州",country:"中国",code:"CZX"},{name:"昌都",country:"中国",code:"BPX"},{name:"朝阳",country:"中国",code:"CHG"},{name:"常德",country:"中国",code:"CGD"},{name:"长白山",country:"中国",code:"NBS"},{name:"成都",country:"中国",code:"CTU"},{name:"重庆",country:"中国",code:"CKG"},{name:"长沙",country:"中国",code:"CSX"},{name:"赤峰",country:"中国",code:"CIF"}]},{"char":"D",list:[{name:"大同",country:"中国",code:"DAT"},{name:"大连",country:"中国",code:"DLC"},{name:"东营",country:"中国",code:"DOY"},{name:"大庆",country:"中国",code:"DQA"},{name:"丹东",country:"中国",code:"DDG"},{name:"大理",country:"中国",code:"DLU"},{name:"敦煌",country:"中国",code:"DNH"},{name:"达州",country:"中国",code:"DAX"},{name:"稻城",country:"中国",code:"DCY"}]},{"char":"E",list:[{name:"恩施",country:"中国",code:"ENH"},{name:"鄂尔多斯",country:"中国",code:"DSN"},{name:"二连浩特",country:"中国",code:"ERL"},{name:"额济纳旗",country:"中国",code:"EJN"}]}],title:"拼音A-E城市",desc:"可直接输入中文名/拼音/英文名/三字码"},FGHJ:{charSort:true,cityList:[{"char":"F",list:[{name:"佛山",country:"中国",code:"FUO"},{name:"福州",country:"中国",code:"FOC"},{name:"阜阳",country:"中国",code:"FUG"},{name:"抚远",country:"中国",code:"FYJ"}]},{"char":"G",list:[{name:"贵阳",country:"中国",code:"KWE"},{name:"桂林",country:"中国",code:"KWL"},{name:"广州",country:"中国",code:"CAN"},{name:"广元",country:"中国",code:"GYS"},{name:"格尔木",country:"中国",code:"GOQ"},{name:"赣州",country:"中国",code:"KOW"},{name:"固原",country:"中国",code:"GYU"},{name:"高雄",country:"中国台湾",code:"KHH"},{name:"格林岛",country:"中国台湾",code:"GNI"}]},{"char":"H",list:[{name:"哈密",country:"中国",code:"HMI"},{name:"呼和浩特",country:"中国",code:"HET"},{name:"黑河",country:"中国",code:"HEK"},{name:"海拉尔",country:"中国",code:"HLD"},{name:"哈尔滨",country:"中国",code:"HRB"},{name:"海口",country:"中国",code:"HAK"},{name:"黄山",country:"中国",code:"TXN"},{name:"杭州",country:"中国",code:"HGH"},{name:"邯郸",country:"中国",code:"HDG"},{name:"合肥",country:"中国",code:"HFE"},{name:"黄龙",country:"中国",code:"JZH"},{name:"汉中",country:"中国",code:"HZG"},{name:"和田",country:"中国",code:"HTN"},{name:"淮安",country:"中国",code:"HIA"},{name:"花莲",country:"中国台湾",code:"HUN"}]},{"char":"J",list:[{name:"鸡西",country:"中国",code:"JXA"},{name:"晋江",country:"中国",code:"JJN"},{name:"锦州",country:"中国",code:"JNZ"},{name:"景德镇",country:"中国",code:"JDZ"},{name:"嘉峪关",country:"中国",code:"JGN"},{name:"井冈山",country:"中国",code:"JGS"},{name:"济宁",country:"中国",code:"JNG"},{name:"九江",country:"中国",code:"JIU"},{name:"佳木斯",country:"中国",code:"JMU"},{name:"济南",country:"中国",code:"TNA"},{name:"加格达奇",country:"中国",code:"JGD"},{name:"金昌",country:"中国",code:"JIC"},{name:"揭阳",country:"中国",code:"SWA"},{name:"金门",country:"中国台湾",code:"KNH"},{name:"嘉义",country:"中国台湾",code:"CYI"}]}],title:"拼音F-J城市",desc:"可直接输入中文名/拼音/英文名/三字码"},KLMNP:{charSort:true,cityList:[{"char":"K",list:[{name:"喀什",country:"中国",code:"KHG"},{name:"昆明",country:"中国",code:"KMG"},{name:"康定",country:"中国",code:"KGT"},{name:"克拉玛依",country:"中国",code:"KRY"},{name:"库尔勒",country:"中国",code:"KRL"},{name:"库车",country:"中国",code:"KCA"},{name:"喀纳斯",country:"中国",code:"KJI"},{name:"凯里",country:"中国",code:"KJH"}]},{"char":"L",list:[{name:"兰州",country:"中国",code:"LHW"},{name:"洛阳",country:"中国",code:"LYA"},{name:"丽江",country:"中国",code:"LJG"},{name:"荔波",country:"中国",code:"LLB"},{name:"林芝",country:"中国",code:"LZY"},{name:"柳州",country:"中国",code:"LZH"},{name:"泸州",country:"中国",code:"LZO"},{name:"连云港",country:"中国",code:"LYG"},{name:"黎平",country:"中国",code:"HZH"},{name:"连城",country:"中国",code:"LCX"},{name:"拉萨",country:"中国",code:"LXA"},{name:"临沧",country:"中国",code:"LNJ"},{name:"临沂",country:"中国",code:"LYI"},{name:"吕梁",country:"中国",code:"LLV"}]},{"char":"M",list:[{name:"芒市",country:"中国",code:"LUM"},{name:"牡丹江",country:"中国",code:"MDG"},{name:"满洲里",country:"中国",code:"NZH"},{name:"绵阳",country:"中国",code:"MIG"},{name:"梅县",country:"中国",code:"MXZ"},{name:"漠河",country:"中国",code:"OHE"},{name:"马公",country:"中国台湾",code:"MZG"},{name:"马祖",country:"中国台湾",code:"MFK"}]},{"char":"N",list:[{name:"南京",country:"中国",code:"NKG"},{name:"南充",country:"中国",code:"NAO"},{name:"南宁",country:"中国",code:"NNG"},{name:"南阳",country:"中国",code:"NNY"},{name:"南通",country:"中国",code:"NTG"},{name:"南昌",country:"中国",code:"KHN"},{name:"那拉提",country:"中国",code:"NLT"},{name:"宁波",country:"中国",code:"NGB"},{name:"南竿",country:"中国台湾",code:"LZN"}]},{"char":"P",list:[{name:"攀枝花",country:"中国",code:"PZI"},{name:"普洱",country:"中国",code:"SYM"}]}],title:"拼音K-P城市",desc:"可直接输入中文名/拼音/英文名/三字码"},QRSTW:{charSort:true,cityList:[{"char":"Q",list:[{name:"衢州",country:"中国",code:"JUZ"},{name:"黔江",country:"中国",code:"JIQ"},{name:"秦皇岛",country:"中国",code:"SHP"},{name:"庆阳",country:"中国",code:"IQN"},{name:"且末",country:"中国",code:"IQM"},{name:"齐齐哈尔",country:"中国",code:"NDG"},{name:"青岛",country:"中国",code:"TAO"},{name:"七美",country:"中国台湾",code:"CMJ"},{name:"祁连",country:"中国",code:"HBQ"}]},{"char":"R",list:[{name:"日喀则",country:"中国",code:"RKZ"}]},{"char":"S",list:[{name:"深圳",country:"中国",code:"SZX"},{name:"石家庄",country:"中国",code:"SJW"},{name:"三亚",country:"中国",code:"SYX"},{name:"沈阳",country:"中国",code:"SHE"},{name:"上海",country:"中国",code:"SHA"},{name:"神农架",country:"中国",code:"HPG"}]},{"char":"T",list:[{name:"唐山",country:"中国",code:"TVS"},{name:"铜仁",country:"中国",code:"TEN"},{name:"塔城",country:"中国",code:"TCG"},{name:"腾冲",country:"中国",code:"TCZ"},{name:"台州",country:"中国",code:"HYN"},{name:"天水",country:"中国",code:"THQ"},{name:"天津",country:"中国",code:"TSN"},{name:"通辽",country:"中国",code:"TGO"},{name:"吐鲁番",country:"中国",code:"TLQ"},{name:"太原",country:"中国",code:"TYN"},{name:"泰州",country:"中国",code:"YTY"},{name:"台北",country:"中国台湾",code:"TPE"},{name:"台中",country:"中国台湾",code:"RMQ"},{name:"台南",country:"中国台湾",code:"TNN"},{name:"台东",country:"中国台湾",code:"TTT"}]},{"char":"W",list:[{name:"威海",country:"中国",code:"WEH"},{name:"武汉",country:"中国",code:"WUH"},{name:"梧州",country:"中国",code:"WUZ"},{name:"文山",country:"中国",code:"WNH"},{name:"无锡",country:"中国",code:"WUX"},{name:"潍坊",country:"中国",code:"WEF"},{name:"武夷山",country:"中国",code:"WUS"},{name:"乌兰浩特",country:"中国",code:"HLH"},{name:"温州",country:"中国",code:"WNZ"},{name:"乌鲁木齐",country:"中国",code:"URC"},{name:"万州",country:"中国",code:"WXN"},{name:"乌海",country:"中国",code:"WUA"}]}],title:"拼音Q-W城市",desc:"可直接输入中文名/拼音/英文名/三字码"},XYZ:{charSort:true,cityList:[{"char":"X",list:[{name:"兴义",country:"中国",code:"ACX"},{name:"西昌",country:"中国",code:"XIC"},{name:"厦门",country:"中国",code:"XMN"},{name:"香格里拉",country:"中国",code:"DIG"},{name:"西安",country:"中国",code:"SIA"},{name:"西宁",country:"中国",code:"XNN"},{name:"襄阳(中国)",country:"中国",code:"XFN"},{name:"锡林浩特",country:"中国",code:"XIL"},{name:"西双版纳",country:"中国",code:"JHG"},{name:"徐州",country:"中国",code:"XUZ"},{name:"中国香港",country:"中国香港",code:"HKG"}]},{"char":"Y",list:[{name:"义乌",country:"中国",code:"YIW"},{name:"永州",country:"中国",code:"LLF"},{name:"榆林",country:"中国",code:"UYN"},{name:"扬州",country:"中国",code:"YTY"},{name:"延安",country:"中国",code:"ENY"},{name:"运城",country:"中国",code:"YCU"},{name:"烟台",country:"中国",code:"YNT"},{name:"银川",country:"中国",code:"INC"},{name:"宜昌",country:"中国",code:"YIH"},{name:"宜宾",country:"中国",code:"YBP"},{name:"宜春",country:"中国",code:"YIC"},{name:"盐城",country:"中国",code:"YNZ"},{name:"延吉",country:"中国",code:"YNJ"},{name:"玉树",country:"中国",code:"YUS"},{name:"伊宁",country:"中国",code:"YIN"},{name:"伊春",country:"中国",code:"LDS"}]},{"char":"Z",list:[{name:"珠海",country:"中国",code:"ZUH"},{name:"昭通",country:"中国",code:"ZAT"},{name:"张家界",country:"中国",code:"DYG"},{name:"舟山",country:"中国",code:"HSN"},{name:"郑州",country:"中国",code:"CGO"},{name:"中卫",country:"中国",code:"ZHY"},{name:"芷江",country:"中国",code:"HJJ"},{name:"湛江",country:"中国",code:"ZHA"},{name:"遵义",country:"中国",code:"ZYI"},{name:"张掖",country:"中国",code:"YZY"},{name:"张家口",country:"中国",code:"ZQZ"}]}],title:"拼音X-Z城市",desc:"可直接输入中文名/拼音/英文名/三字码"},"国际·港澳台":{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"中国香港",country:"中国香港",code:"HKG"},{name:"曼谷",country:"泰国",code:"BKK"},{name:"首尔",country:"韩国",code:"SEL"},{name:"东京",country:"日本",code:"TYO"},{name:"普吉",country:"泰国",code:"HKT"},{name:"新加坡",country:"新加坡",code:"SIN"},{name:"台北",country:"中国台湾",code:"TPE"},{name:"清迈",country:"泰国",code:"CNX"},{name:"吉隆坡",country:"马来西亚",code:"KUL"},{name:"悉尼",country:"澳大利亚",code:"SYD"},{name:"中国澳门",country:"中国澳门",code:"MFM"},{name:"大阪",country:"日本",code:"OSA"},{name:"伦敦",country:"英国",code:"LON"},{name:"洛杉矶",country:"美国",code:"LAX"},{name:"纽约",country:"美国",code:"NYC"},{name:"马尼拉",country:"菲律宾",code:"MNL"},{name:"墨尔本",country:"澳大利亚",code:"MEL"},{name:"温哥华",country:"加拿大",code:"YVR"},{name:"巴黎",country:"法国",code:"PAR"},{name:"槟城",country:"马来西亚",code:"PEN"},{name:"多伦多",country:"加拿大",code:"YTO"},{name:"胡志明市",country:"越南",code:"SGN"},{name:"旧金山",country:"美国",code:"SFO"},{name:"金边",country:"柬埔寨",code:"PNH"},{name:"雅加达",country:"印度尼西亚",code:"JKT"},{name:"济州岛",country:"韩国",code:"CJU"},{name:"高雄",country:"中国台湾",code:"KHH"},{name:"釜山",country:"韩国",code:"PUS"},{name:"暹粒",country:"柬埔寨",code:"REP"},{name:"法兰克福",country:"德国",code:"FRA"}]}],fuzzy_c:true,fuzzy:true,countryList:[{"char":"国家",clshct:true,listCountry:[{name:"中国",country:"中国",code:"CN"},{name:"韩国",country:"韩国",code:"KR"},{name:"泰国",country:"泰国",code:"TH"},{name:"美国",country:"美国",code:"US"},{name:"加拿大",country:"加拿大",code:"CA"},{name:"日本",country:"日本",code:"JP"},{name:"澳大利亚",country:"澳大利亚",code:"AU"},{name:"英国",country:"英国",code:"GB"},{name:"法国",country:"法国",code:"FR"},{name:"马来西亚",country:"马来西亚",code:"MY"}]}],hotword:[{"char":"热词",clshct:true,listfuzzy:[{name:"东南亚",country:"东南亚"},{name:"中国港澳台",country:"港澳台"},{name:"日韩",country:"日韩"},{name:"欧洲",country:"欧洲"},{name:"所有地点",country:"所有地点"}]}],title:"热门国际城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"国际·港澳台-to":{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"中国香港",country:"中国香港",code:"HKG"},{name:"曼谷",country:"泰国",code:"BKK"},{name:"首尔",country:"韩国",code:"SEL"},{name:"东京",country:"日本",code:"TYO"},{name:"普吉",country:"泰国",code:"HKT"},{name:"新加坡",country:"新加坡",code:"SIN"},{name:"台北",country:"中国台湾",code:"TPE"},{name:"清迈",country:"泰国",code:"CNX"},{name:"吉隆坡",country:"马来西亚",code:"KUL"},{name:"悉尼",country:"澳大利亚",code:"SYD"},{name:"中国澳门",country:"中国澳门",code:"MFM"},{name:"大阪",country:"日本",code:"OSA"},{name:"伦敦",country:"英国",code:"LON"},{name:"洛杉矶",country:"美国",code:"LAX"},{name:"纽约",country:"美国",code:"NYC"},{name:"马尼拉",country:"菲律宾",code:"MNL"},{name:"墨尔本",country:"澳大利亚",code:"MEL"},{name:"温哥华",country:"加拿大",code:"YVR"},{name:"巴黎",country:"法国",code:"PAR"},{name:"槟城",country:"马来西亚",code:"PEN"},{name:"多伦多",country:"加拿大",code:"YTO"},{name:"胡志明市",country:"越南",code:"SGN"},{name:"旧金山",country:"美国",code:"SFO"},{name:"金边",country:"柬埔寨",code:"PNH"},{name:"雅加达",country:"印度尼西亚",code:"JKT"},{name:"济州岛",country:"韩国",code:"CJU"},{name:"高雄",country:"中国台湾",code:"KHH"},{name:"釜山",country:"韩国",code:"PUS"},{name:"暹粒",country:"柬埔寨",code:"REP"},{name:"法兰克福",country:"德国",code:"FRA"}]}],fuzzy_c:true,fuzzy:true,countryList:[{"char":"国家",clshct:true,listCountry:[{name:"中国",country:"中国",code:"CN"},{name:"韩国",country:"韩国",code:"KR"},{name:"泰国",country:"泰国",code:"TH"},{name:"美国",country:"美国",code:"US"},{name:"加拿大",country:"加拿大",code:"CA"},{name:"日本",country:"日本",code:"JP"},{name:"澳大利亚",country:"澳大利亚",code:"AU"},{name:"英国",country:"英国",code:"GB"},{name:"法国",country:"法国",code:"FR"},{name:"马来西亚",country:"马来西亚",code:"MY"}]}],hotword:[{"char":"热词",clshct:true,listfuzzy:[{name:"东南亚",country:"东南亚"},{name:"中国港澳台",country:"港澳台"},{name:"日韩",country:"日韩"},{name:"欧洲",country:"欧洲"},{name:"所有地点",country:"所有地点"}]}],title:"热门国际城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"特价国际":{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"中国香港",country:"中国香港",code:"HKG"},{name:"曼谷",country:"泰国",code:"BKK"},{name:"首尔",country:"韩国",code:"SEL"},{name:"东京",country:"日本",code:"TYO"},{name:"普吉",country:"泰国",code:"HKT"},{name:"新加坡",country:"新加坡",code:"SIN"},{name:"台北",country:"中国台湾",code:"TPE"},{name:"清迈",country:"泰国",code:"CNX"},{name:"吉隆坡",country:"马来西亚",code:"KUL"},{name:"悉尼",country:"澳大利亚",code:"SYD"},{name:"中国澳门",country:"中国澳门",code:"MFM"},{name:"大阪",country:"日本",code:"OSA"},{name:"伦敦",country:"英国",code:"LON"},{name:"洛杉矶",country:"美国",code:"LAX"},{name:"纽约",country:"美国",code:"NYC"},{name:"马尼拉",country:"菲律宾",code:"MNL"},{name:"墨尔本",country:"澳大利亚",code:"MEL"},{name:"温哥华",country:"加拿大",code:"YVR"},{name:"巴黎",country:"法国",code:"PAR"},{name:"槟城",country:"马来西亚",code:"PEN"},{name:"多伦多",country:"加拿大",code:"YTO"},{name:"胡志明市",country:"越南",code:"SGN"},{name:"旧金山",country:"美国",code:"SFO"},{name:"金边",country:"柬埔寨",code:"PNH"},{name:"雅加达",country:"印度尼西亚",code:"JKT"},{name:"济州岛",country:"韩国",code:"CJU"},{name:"高雄",country:"中国台湾",code:"KHH"},{name:"釜山",country:"韩国",code:"PUS"},{name:"暹粒",country:"柬埔寨",code:"REP"},{name:"法兰克福",country:"德国",code:"FRA"}]}],title:"热门国际城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"热门城市和国家":{fuzzyArea:true,cityList:[{name:"中国香港",country:"中国香港",code:"HKG"},{name:"曼谷",country:"泰国",code:"BKK"},{name:"新加坡",country:"新加坡",code:"SIN"},{name:"马尼拉",country:"菲律宾",code:"MNL"},{name:"墨尔本",country:"澳大利亚",code:"MEL"},{name:"首尔",country:"韩国",code:"SEL"},{name:"中国澳门",country:"中国澳门",code:"MFM"},{name:"吉隆坡",country:"马来西亚",code:"KUL"},{name:"旧金山",country:"美国",code:"SFO"},{name:"暹粒",country:"柬埔寨",code:"REP"},{name:"台北",country:"中国台湾",code:"TPE"},{name:"普吉",country:"泰国",code:"HKT"},{name:"大阪",country:"日本",code:"OSA"},{name:"巴厘岛",country:"印度尼西亚",code:"DPS"},{name:"伦敦",country:"英国",code:"LON"},{name:"东京",country:"日本",code:"TYO"},{name:"胡志明市",country:"越南",code:"SGN"},{name:"纽约",country:"美国",code:"NYC"},{name:"高雄",country:"中国台湾",code:"KHH"},{name:"釜山",country:"韩国",code:"PUS"},{name:"洛杉矶",country:"美国",code:"LAX"},{name:"悉尼",country:"澳大利亚",code:"SYD"},{name:"苏梅岛",country:"泰国",code:"USM"},{name:"济州岛",country:"韩国",code:"CJU"},{name:"温哥华",country:"加拿大",code:"YVR"},{name:"清迈",country:"泰国",code:"CNX"},{name:"加德满都",country:"尼泊尔",code:"KTM"},{name:"雅加达",country:"印度尼西亚",code:"JKT"},{name:"金边",country:"柬埔寨",code:"PNH"},{name:"迪拜",country:"阿拉伯联合酋长国",code:"DXB"}],countryList:[{name:"中国",country:"中国",code:"CN"},{name:"韩国",country:"韩国",code:"KR"},{name:"泰国",country:"泰国",code:"TH"},{name:"美国",country:"美国",code:"US"},{name:"加拿大",country:"加拿大",code:"CA"},{name:"日本",country:"日本",code:"JP"},{name:"澳大利亚",country:"澳大利亚",code:"AU"},{name:"英国",country:"英国",code:"GB"},{name:"法国",country:"法国",code:"FR"},{name:"马来西亚",country:"马来西亚",code:"MY"}],title:"热门城市和国家",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"亚洲/大洋洲":{charSort:true,fuzzy_c:true,fuzzy:true,cityList:[{"char":"城市",clshct:true,list:[{name:"中国香港",country:"中国香港",code:"HKG"},{name:"新加坡",country:"新加坡",code:"SIN"},{name:"首尔",country:"韩国",code:"SEL"},{name:"曼谷",country:"泰国",code:"BKK"},{name:"吉隆坡",country:"马来西亚",code:"KUL"},{name:"东京",country:"日本",code:"TYO"},{name:"台北",country:"中国台湾",code:"TPE"},{name:"悉尼",country:"澳大利亚",code:"SYD"},{name:"中国澳门",country:"中国澳门",code:"MFM"},{name:"普吉",country:"泰国",code:"HKT"},{name:"墨尔本",country:"澳大利亚",code:"MEL"},{name:"胡志明市",country:"越南",code:"SGN"},{name:"大阪",country:"日本",code:"OSA"},{name:"巴厘岛",country:"印度尼西亚",code:"DPS"},{name:"马尼拉",country:"菲律宾",code:"MNL"},{name:"河内",country:"越南",code:"HAN"},{name:"加德满都",country:"尼泊尔",code:"KTM"},{name:"金边",country:"柬埔寨",code:"PNH"},{name:"雅加达",country:"印度尼西亚",code:"JKT"},{name:"马累",country:"马尔代夫",code:"MLE"},{name:"暹粒",country:"柬埔寨",code:"REP"},{name:"迪拜",country:"阿拉伯联合酋长国",code:"DXB"},{name:"釜山",country:"韩国",code:"PUS"},{name:"名古屋",country:"日本",code:"NGO"},{name:"奥克兰",country:"新西兰",code:"AKL"},{name:"布里斯班",country:"澳大利亚",code:"BNE"},{name:"槟城",country:"马来西亚",code:"PEN"},{name:"高雄",country:"中国台湾",code:"KHH"},{name:"新德里",country:"印度",code:"DEL"},{name:"济州岛",country:"韩国",code:"CJU"}]}],countryList:[{"char":"国家",clshct:true,listCountry:[{name:"新加坡",country:"新加坡",code:"SG"},{name:"韩国",country:"韩国",code:"KR"},{name:"泰国",country:"泰国",code:"TH"},{name:"马来西亚",country:"马来西亚",code:"MY"},{name:"日本",country:"日本",code:"JP"},{name:"澳大利亚",country:"澳大利亚",code:"AU"},{name:"越南",country:"越南",code:"VN"},{name:"印度尼西亚",country:"印度尼西亚",code:"IN"},{name:"菲律宾",country:"菲律宾",code:"PH"},{name:"尼泊尔",country:"尼泊尔",code:"NP"}]}],hotword:[{"char":"热词",clshct:true,listfuzzy:[{name:"中国港澳台",country:"港澳台"},{name:"日韩",country:"日韩"},{name:"新马泰",country:"新马泰"},{name:"澳新",country:"澳新"},{name:"所有地点",country:"所有地点"}]}],title:"亚洲/大洋洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"美洲":{charSort:true,fuzzy_c:true,fuzzy:true,cityList:[{"char":"城市",clshct:true,list:[{name:"纽约",country:"美国",code:"NYC"},{name:"洛杉矶",country:"美国",code:"LAX"},{name:"多伦多",country:"加拿大",code:"YTO"},{name:"温哥华",country:"加拿大",code:"YVR"},{name:"旧金山",country:"美国",code:"SFO"},{name:"芝加哥",country:"美国",code:"CHI"},{titles:"华盛顿（华盛顿哥伦比亚特区）",name:"华盛顿",country:"美国",code:"WAS"},{name:"西雅图",country:"美国",code:"SEA"},{name:"波士顿",country:"美国",code:"BOS"},{name:"底特律",country:"美国",code:"DTT"},{name:"亚特兰大",country:"美国",code:"ATL"},{name:"蒙特利尔",country:"加拿大",code:"YMQ"},{name:"休斯敦",country:"美国",code:"HOU"},{name:"火奴鲁鲁",country:"美国",code:"HNL"},{name:"达拉斯",country:"美国",code:"DFW"},{name:"拉斯维加斯（内华达州）",country:"美国",code:"LAS"},{name:"费城",country:"美国",code:"PHI"},{titles:"圣保罗（巴西）",name:"圣保罗",country:"巴西",code:"SAO"},{name:"明尼阿波利斯",country:"美国",code:"MSP"},{name:"渥太华",country:"加拿大",code:"YOW"},{name:"凤凰城",country:"美国",code:"PHX"},{name:"墨西哥城",country:"墨西哥",code:"MEX"},{name:"迈阿密",country:"美国",code:"MIA"},{name:"丹佛",country:"美国",code:"DEN"},{name:"奥兰多",country:"美国",code:"ORL"},{name:"卡尔加里",country:"加拿大",code:"YYC"},{name:"埃德蒙顿",country:"加拿大",code:"YEA"},{name:"布宜诺斯艾利斯",country:"阿根廷",code:"BUE"},{name:"里约热内卢",country:"巴西",code:"RIO"},{name:"匹兹堡",country:"美国",code:"PIT"}]}],countryList:[{"char":"国家",clshct:true,listCountry:[{name:"美国",country:"美国",code:"US"},{name:"加拿大",country:"加拿大",code:"CA"},{name:"巴西",country:"巴西",code:"BR"},{name:"墨西哥",country:"墨西哥",code:"MX"},{name:"阿根廷",country:"阿根廷",code:"AR"}]}],hotword:[{"char":"热词",clshct:true,listfuzzy:[{name:"美国东海岸",country:"美国东海岸"},{name:"美国西部",country:"美国西部"},{name:"北美五大湖",country:"北美五大湖"},{name:"所有地点",country:"所有地点"}]}],title:"美洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"欧洲":{charSort:true,fuzzy_c:true,fuzzy:true,cityList:[{"char":"城市",clshct:true,list:[{name:"伦敦",country:"英国",code:"LON"},{name:"巴黎",country:"法国",code:"PAR"},{name:"法兰克福",country:"德国",code:"FRA"},{name:"莫斯科",country:"俄罗斯",code:"MOS"},{name:"阿姆斯特丹",country:"荷兰",code:"AMS"},{titles:"罗马（意大利）",name:"罗马",country:"意大利",code:"ROM"},{name:"米兰",country:"意大利",code:"MIL"},{name:"马德里",country:"西班牙",code:"MAD"},{name:"慕尼黑",country:"德国",code:"MUC"},{name:"柏林",country:"德国",code:"BER"},{name:"斯德哥尔摩",country:"瑞典",code:"STO"},{name:"伊斯坦布尔",country:"土耳其",code:"IST"},{titles:"伯明翰（英国）",name:"伯明翰",country:"英国",code:"BHX"},{titles:"巴塞罗那（西班牙）",name:"巴塞罗那",country:"西班牙",code:"BCN"},{name:"雅典",country:"希腊",code:"ATH"},{name:"哥本哈根",country:"丹麦",code:"CPH"},{name:"苏黎世",country:"瑞士",code:"ZRH"},{name:"布鲁塞尔",country:"比利时",code:"BRU"},{name:"赫尔辛基",country:"芬兰",code:"HEL"},{name:"爱丁堡",country:"英国",code:"EDI"},{name:"维也纳",country:"奥地利",code:"VIE"},{titles:"格拉斯哥（英国）",name:"格拉斯哥",country:"英国",code:"GLA"},{name:"日内瓦",country:"瑞士",code:"GVA"},{name:"圣彼得堡",country:"俄罗斯",code:"LED"},{titles:"都柏林(爱尔兰)",name:"都柏林",country:"爱尔兰",code:"DUB"},{name:"汉堡",country:"德国",code:"HAM"},{name:"杜塞尔多夫",country:"德国",code:"DUS"},{name:"布拉格",country:"捷克",code:"PRG"},{name:"布达佩斯",country:"匈牙利",code:"BUD"},{name:"基辅",country:"乌克兰",code:"IEV"}]}],countryList:[{"char":"国家",clshct:true,listCountry:[{name:"英国",country:"英国",code:"GB"},{name:"法国",country:"法国",code:"FR"},{name:"俄罗斯",country:"俄罗斯",code:"RU"},{name:"荷兰",country:"荷兰",code:"NL"},{name:"意大利",country:"意大利",code:"IT"},{name:"西班牙",country:"西班牙",code:"ES"},{name:"德国",country:"德国",code:"DE"},{name:"瑞典",country:"瑞典",code:"SE"},{name:"土耳其",country:"土耳其",code:"TR"},{name:"希腊",country:"希腊",code:"GR"}]}],hotword:[{"char":"热词",clshct:true,listfuzzy:[{name:"西欧",country:"西欧"},{name:"北欧",country:"北欧"},{name:"中东欧",country:"中东欧"},{name:"南欧",country:"南欧"},{name:"所有地点",country:"所有地点"}]}],title:"欧洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"非洲":{charSort:true,fuzzy_c:true,fuzzy:true,cityList:[{"char":"城市",clshct:true,list:[{name:"开罗",country:"埃及",code:"CAI"},{name:"约翰内斯堡",country:"南非",code:"JNB"},{name:"内罗毕",country:"肯尼亚",code:"NBO"},{name:"开普敦",country:"南非",code:"CPT"},{name:"毛里求斯",country:"毛里求斯",code:"MRU"},{name:"拉各斯",country:"尼日利亚",code:"LOS"},{name:"喀土穆",country:"苏丹",code:"KRT"},{name:"亚的斯亚贝巴",country:"埃塞俄比亚",code:"ADD"},{name:"阿克拉",country:"加纳",code:"ACC"},{name:"达累斯萨拉姆",country:"坦桑尼亚",code:"DAR"},{name:"塞舌尔",country:"塞舌尔共和国",code:"SEZ"},{name:"阿尔及尔",country:"阿尔及利亚",code:"ALG"},{name:"的黎波里",country:"利比亚",code:"TIP"},{name:"阿布贾",country:"尼日利亚",code:"ABV"},{name:"卡萨布兰卡",country:"摩洛哥",code:"CAS"},{name:"突尼斯",country:"突尼斯",code:"TUN"}]}],countryList:[{"char":"国家",clshct:true,listCountry:[{name:"埃及",country:"埃及",code:"EG"},{name:"南非",country:"南非",code:"ZA"},{name:"肯尼亚",country:"肯尼亚",code:"KE"},{name:"尼日利亚",country:"尼日利亚",code:"NG"},{name:"埃塞俄比亚",country:"埃塞俄比亚",code:"ET"}]}],hotword:[{"char":"热词",clshct:true,listfuzzy:[{name:"非洲南部",country:"非洲南部"},{name:"北非",country:"北非"},{name:"东非",country:"东非"},{name:"所有地点",country:"所有地点"}]}],title:"非洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"m亚洲/大洋洲":{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"中国香港",country:"中国香港",code:"HKG"},{name:"新加坡",country:"新加坡",code:"SIN"},{name:"首尔",country:"韩国",code:"SEL"},{name:"曼谷",country:"泰国",code:"BKK"},{name:"吉隆坡",country:"马来西亚",code:"KUL"},{name:"东京",country:"日本",code:"TYO"},{name:"台北",country:"中国台湾",code:"TPE"},{name:"悉尼",country:"澳大利亚",code:"SYD"},{name:"中国澳门",country:"中国澳门",code:"MFM"},{name:"普吉",country:"泰国",code:"HKT"},{name:"墨尔本",country:"澳大利亚",code:"MEL"},{name:"胡志明市",country:"越南",code:"SGN"},{name:"大阪",country:"日本",code:"OSA"},{name:"巴厘岛",country:"印度尼西亚",code:"DPS"},{name:"马尼拉",country:"菲律宾",code:"MNL"},{name:"河内",country:"越南",code:"HAN"},{name:"加德满都",country:"尼泊尔",code:"KTM"},{name:"金边",country:"柬埔寨",code:"PNH"},{name:"雅加达",country:"印度尼西亚",code:"JKT"},{name:"马累",country:"马尔代夫",code:"MLE"},{name:"暹粒",country:"柬埔寨",code:"REP"},{name:"迪拜",country:"阿拉伯联合酋长国",code:"DXB"},{name:"釜山",country:"韩国",code:"PUS"},{name:"名古屋",country:"日本",code:"NGO"},{name:"奥克兰",country:"新西兰",code:"AKL"},{name:"布里斯班",country:"澳大利亚",code:"BNE"},{name:"槟城",country:"马来西亚",code:"PEN"},{name:"高雄",country:"中国台湾",code:"KHH"},{name:"新德里",country:"印度",code:"DEL"},{name:"济州岛",country:"韩国",code:"CJU"}]}],title:"亚洲/大洋洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"m美洲":{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"纽约",country:"美国",code:"NYC"},{name:"洛杉矶",country:"美国",code:"LAX"},{name:"多伦多",country:"加拿大",code:"YTO"},{name:"温哥华",country:"加拿大",code:"YVR"},{name:"旧金山",country:"美国",code:"SFO"},{name:"芝加哥",country:"美国",code:"CHI"},{titles:"华盛顿（华盛顿哥伦比亚特区）",name:"华盛顿",country:"美国",code:"WAS"},{name:"西雅图",country:"美国",code:"SEA"},{name:"波士顿",country:"美国",code:"BOS"},{name:"底特律",country:"美国",code:"DTT"},{name:"亚特兰大",country:"美国",code:"ATL"},{name:"蒙特利尔",country:"加拿大",code:"YMQ"},{name:"休斯敦",country:"美国",code:"HOU"},{name:"火奴鲁鲁",country:"美国",code:"HNL"},{name:"达拉斯",country:"美国",code:"DFW"},{name:"拉斯维加斯（内华达州）",country:"美国",code:"LAS"},{name:"费城",country:"美国",code:"PHI"},{titles:"圣保罗（巴西）",name:"圣保罗",country:"巴西",code:"SAO"},{name:"明尼阿波利斯",country:"美国",code:"MSP"},{name:"渥太华",country:"加拿大",code:"YOW"},{name:"凤凰城",country:"美国",code:"PHX"},{name:"墨西哥城",country:"墨西哥",code:"MEX"},{name:"迈阿密",country:"美国",code:"MIA"},{name:"丹佛",country:"美国",code:"DEN"},{name:"奥兰多",country:"美国",code:"ORL"},{name:"卡尔加里",country:"加拿大",code:"YYC"},{name:"埃德蒙顿",country:"加拿大",code:"YEA"},{name:"布宜诺斯艾利斯",country:"阿根廷",code:"BUE"},{name:"里约热内卢",country:"巴西",code:"RIO"},{name:"匹兹堡",country:"美国",code:"PIT"}]}],title:"美洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"m欧洲":{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"伦敦",country:"英国",code:"LON"},{name:"巴黎",country:"法国",code:"PAR"},{name:"法兰克福",country:"德国",code:"FRA"},{name:"莫斯科",country:"俄罗斯",code:"MOS"},{name:"阿姆斯特丹",country:"荷兰",code:"AMS"},{titles:"罗马（意大利）",name:"罗马",country:"意大利",code:"ROM"},{name:"米兰",country:"意大利",code:"MIL"},{name:"马德里",country:"西班牙",code:"MAD"},{name:"慕尼黑",country:"德国",code:"MUC"},{name:"柏林",country:"德国",code:"BER"},{name:"斯德哥尔摩",country:"瑞典",code:"STO"},{name:"伊斯坦布尔",country:"土耳其",code:"IST"},{titles:"伯明翰（英国）",name:"伯明翰",country:"英国",code:"BHX"},{titles:"巴塞罗那（西班牙）",name:"巴塞罗那",country:"西班牙",code:"BCN"},{name:"雅典",country:"希腊",code:"ATH"},{name:"哥本哈根",country:"丹麦",code:"CPH"},{name:"苏黎世",country:"瑞士",code:"ZRH"},{name:"布鲁塞尔",country:"比利时",code:"BRU"},{name:"赫尔辛基",country:"芬兰",code:"HEL"},{name:"爱丁堡",country:"英国",code:"EDI"},{name:"维也纳",country:"奥地利",code:"VIE"},{titles:"格拉斯哥（英国）",name:"格拉斯哥",country:"英国",code:"GLA"},{name:"日内瓦",country:"瑞士",code:"GVA"},{name:"圣彼得堡",country:"俄罗斯",code:"LED"},{titles:"都柏林(爱尔兰)",name:"都柏林",country:"爱尔兰",code:"DUB"},{name:"汉堡",country:"德国",code:"HAM"},{name:"杜塞尔多夫",country:"德国",code:"DUS"},{name:"布拉格",country:"捷克",code:"PRG"},{name:"布达佩斯",country:"匈牙利",code:"BUD"},{name:"基辅",country:"乌克兰",code:"IEV"}]}],title:"欧洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"m非洲":{charSort:true,cityList:[{"char":"城市",clshct:true,list:[{name:"开罗",country:"埃及",code:"CAI"},{name:"约翰内斯堡",country:"南非",code:"JNB"},{name:"内罗毕",country:"肯尼亚",code:"NBO"},{name:"开普敦",country:"南非",code:"CPT"},{name:"毛里求斯",country:"毛里求斯",code:"MRU"},{name:"拉各斯",country:"尼日利亚",code:"LOS"},{name:"喀土穆",country:"苏丹",code:"KRT"},{name:"亚的斯亚贝巴",country:"埃塞俄比亚",code:"ADD"},{name:"阿克拉",country:"加纳",code:"ACC"},{name:"达累斯萨拉姆",country:"坦桑尼亚",code:"DAR"},{name:"塞舌尔",country:"塞舌尔共和国",code:"SEZ"},{name:"阿尔及尔",country:"阿尔及利亚",code:"ALG"},{name:"的黎波里",country:"利比亚",code:"TIP"},{name:"阿布贾",country:"尼日利亚",code:"ABV"},{name:"卡萨布兰卡",country:"摩洛哥",code:"CAS"},{name:"突尼斯",country:"突尼斯",code:"TUN"}]}],title:"非洲热门城市",desc:"可直接输入中文名/拼音/英文名/三字码",cls:"inter"},"国内":{cityList:[{name:"上海",country:"中国",code:"SHA"},{name:"北京",country:"中国",code:"BJS"},{name:"广州",country:"中国",code:"CAN"},{name:"昆明",country:"中国",code:"KMG"},{name:"西安",country:"中国",code:"SIA"},{name:"成都",country:"中国",code:"CTU"},{name:"深圳",country:"中国",code:"SZX"},{name:"厦门",country:"中国",code:"XMN"},{name:"乌鲁木齐",country:"中国",code:"URC"},{name:"南京",country:"中国",code:"NKG"},{name:"重庆",country:"中国",code:"CKG"},{name:"杭州",country:"中国",code:"HGH"},{name:"大连",country:"中国",code:"DLC"},{name:"长沙",country:"中国",code:"CSX"},{name:"海口",country:"中国",code:"HAK"},{name:"哈尔滨",country:"中国",code:"HRB"},{name:"青岛",country:"中国",code:"TAO"},{name:"沈阳",country:"中国",code:"SHE"},{name:"三亚",country:"中国",code:"SYX"},{name:"济南",country:"中国",code:"TNA"},{name:"武汉",country:"中国",code:"WUH"},{name:"郑州",country:"中国",code:"CGO"},{name:"贵阳",country:"中国",code:"KWE"},{name:"南宁",country:"中国",code:"NNG"},{name:"福州",country:"中国",code:"FOC"},{name:"天津",country:"中国",code:"TSN"},{name:"长春",country:"中国",code:"CGQ"},{name:"石家庄",country:"中国",code:"SJW"},{name:"太原",country:"中国",code:"TYN"},{name:"兰州",country:"中国",code:"LHW"}],title:"热门国内城市",desc:"可直接输入中文名/拼音/英文名/三字码"}}},specPlace:["所有地点","中国","日本","泰国","马来西亚","韩国","英国","美国","澳大利亚","加拿大","法国","德国","俄罗斯","菲律宾","印度","新西兰","西班牙","意大利"]};var FlightCalendarConf={fuzzyDate0:["暑假","抗战胜利日","中秋&国庆","双十一","圣诞","元旦","春节","寒假","清明","五一","端午","中秋","国庆"],fuzzyDate:{"1月":{valid:true},"2月":{valid:true},"3月":{valid:true},"4月":{valid:true},"5月":{valid:true},"6月":{valid:true},"7月":{valid:true},"8月":{valid:true},"9月":{valid:true},"10月":{valid:true},"11月":{valid:true},"12月":{valid:true},"暑假":{valid:true,value:"暑假",range:"92",endRange:"71",start:"2015-06-15",end:"2015-09-15",last:"2015-08-26",fuzzy:true},"抗战胜利日":{valid:true,value:"抗战胜利日",range:"9",endRange:"8",start:"2015-8-30",end:"2015-9-08",last:"2015-09-07",fuzzy:true},"中秋&国庆":{valid:true,value:"中秋&国庆",range:"22",endRange:"19",start:"2015-9-19",end:"2015-10-11",last:"2015-10-08",fuzzy:true},"双十一":{valid:true,value:"双十一",range:"8",endRange:"5",start:"2015-11-07",end:"2015-11-15",last:"2015-11-12",fuzzy:true},"圣诞":{valid:true,value:"圣诞",range:"11",endRange:"7",start:"2015-12-20",end:"2015-12-31",last:"2015-12-27",fuzzy:true},"元旦":{valid:true,value:"元旦",range:"11",endRange:"9",start:"2015-12-26",end:"2016-01-06",last:"2016-01-04",fuzzy:true},"春节":{valid:true,value:"春节",range:"20",endRange:"13",start:"2016-02-01",end:"2016-02-21",last:"2016-02-14",fuzzy:true},"寒假":{valid:true,value:"寒假",range:"36",endRange:"29",start:"2016-01-23",end:"2016-02-28",last:"2016-02-21",fuzzy:true},"清明":{valid:true,value:"清明",range:"9",endRange:"4",start:"2016-04-01",end:"2016-04-10",last:"2016-04-05",fuzzy:true},"五一":{valid:true,value:"五一",range:"11",endRange:"7",start:"2016-04-27",end:"2016-05-08",last:"2016-05-04",fuzzy:true},"端午":{valid:true,value:"端午",range:"14",endRange:"11",start:"2016-06-01",end:"2016-06-15",last:"2016-06-12",fuzzy:true},"中秋":{valid:true,value:"中秋",range:"11",endRange:"8",start:"2016-09-10",end:"2016-09-21",last:"2016-09-18",fuzzy:true},"国庆":{valid:true,value:"国庆",range:"15",endRange:"14",start:"2016-9-24",end:"2016-10-09",last:"2016-10-08",fuzzy:true}}};var FlightConf_fuzzy={cateList:[{"char":"主题",list:[{name:"自然风光",type:2},{name:"海滩",type:2},{name:"第1次出国",type:2},{name:"暑假",type:2},{name:"蜜月",type:2},{name:"亲子",type:2},{name:"文化遗产",type:2},{name:"美食",type:2},{name:"潜水",type:2},{name:"购物",type:2},{name:"电影/音乐",type:2},{name:"山岭/滑雪",type:2},{name:"中世纪城堡",type:2},{name:"穷游",type:2},{name:"世界杯",type:2},{name:"古迹",type:2},{name:"都市",type:2},{name:"猎奇",type:2},{name:"毕业季",type:2},{name:"出国特价",type:2}]},{"char":"国家/地区",list:[{name:"东南亚",type:1},{name:"中国港澳台",type:1},{name:"日韩",type:1},{name:"欧洲",type:1},{name:"北美洲",type:1},{name:"大洋洲",type:1},{name:"南亚",type:1},{name:"东亚",type:1},{name:"非洲",type:1},{name:"南美洲",type:1}]},{"char":"城市",list:[{name:"中国香港",code:"HKG",type:1},{name:"曼谷",code:"BKK",type:1},{name:"中国台北",code:"TPE",type:1},{name:"首尔",code:"SEL",type:1},{name:"新加坡",code:"SIN",type:1},{name:"东京",code:"TYO",type:1},{name:"普吉",code:"HKT",type:1},{name:"大阪",code:"OSA",type:1},{name:"清迈",code:"CNX",type:1},{name:"洛杉矶",code:"LAX",type:1},{name:"济州岛",code:"CJU",type:1},{name:"吉隆坡",code:"KUL",type:1},{name:"伦敦",code:"LON",type:1},{name:"纽约",code:"NYC",type:1},{name:"中国澳门",code:"MFM",type:1},{name:"巴黎",code:"PAR",type:1},{name:"马尼拉",code:"MNL",type:1},{name:"悉尼",code:"SYD",type:1},{name:"伊斯坦布尔",code:"IST",type:1},{name:"巴厘岛",code:"DPS",type:1}]}]};(function(e){function i(e){if(typeof e=="string"){if(r.test(e)){return parseInt(e,10)}}return e}function s(e,t){if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16);if(e.contains&&t.nodeType===1){return e.contains(t)&&e!==t}while(t=t.parentNode)if(t===e)return true;return false}if(!e.bui){e.bui={}}var t={};var n={};var r=/^\d+$/;jQuery.expr[":"].focus=function(e){return e===document.activeElement&&(e.type||e.href)};e.RegisterUI=function(n,r){if(t[n])return;r=r||{};t[n]=function(t){var n=this;this.el=t;this.$el=e(t);this._options={};this._plugins={};e.each(r.propertychange||{},function(e,t){n.on(e+"_changed",t)});e.each(r.properties||{},function(e,t){n._options[e]=t})};t[n].prototype=e.extend({options:function(t){var n=this;e.each(t,function(e,t){n.set(e,t)})},dom:function(){return this.el},plugins:function(e,t){if(t){this._plugins[e]=t}else{return this._plugins[e]}},data:function(e,t){if(arguments.length==1){return this.get(e)||this.$el.data(n+"-"+e)}else{this.$el.data(n+"-"+e,t);this.set(e,t)}},set:function(t,n,r){n=i(n);var s={name:t,new_value:n,old_value:this.get(t)};if(r!=true){e(this).trigger(t+"_before_change",[s])}this._options[t]=s.new_value;if(r!=true){e(this).trigger(t+"_changed",[n])}},get:function(e){return this._options[e]},on:function(t,n){e(this).bind(t,n)},un:function(t){e(this).unbind(t)},fire:function(){var t=e(this);t.trigger.apply(t,Array.prototype.slice.apply(arguments))}},r);e.fn[n]=function(r){r=r||{};if(e.isPlainObject(r)){return e.each(this,function(){var i=e(this).data(n);if(!i){var s=new t[n](this);e(this).data(n,s);s.options(r);s.initialize()}else{e(this).data(n).options(r)}})}else if(typeof r=="string"){var i=arguments[0];var s=Array.prototype.slice.call(arguments,1);var o=e(this).data(n);if(e.isFunction(o[i])){return o[i].apply(o,s)}}return this}};e.RegisterPlugin=function(e,r,i,s){if(!t[e]){alert("not found UI["+e+"]");return}var o=n[e]=n[e]||{};var u=o[r]=o[r]||{};u[i]=s};e.usePlugin=function(t,r){e.each(n[r],function(n,r){e.each(r,function(e,r){if(t.data(n)===e){var i=function(){this.ui=t;this.initialize()};i.prototype=r;t.plugins(n,new i)}})})};var o=e.fn.val;jQuery.fn.val=function(t){var n=this[0];if(n&&n.qcbox){if(t!=null){if(e.trim(t)==""){n.qcbox.showPlaceHolder()}else{n.qcbox.hidePlaceHolder()}}}return o.apply(this,Array.prototype.slice.apply(arguments))};e.RegisterUI("qcbox",{initialize:function(){var t=this;var n=this.$el;n[0].qcbox=this;var r=null;var i=this.data("customclass");n.parent().find(".qunar-qcbox").remove();var s=this.$wrap=n.before('<div class="qunar-qcbox'+(i?" "+i:"")+'"><div class="qcbox-placeholder"></div><div class="qcbox-prefix"></div><div class="qcbox-info"><b class="iconfont f-location"></b></div></div>').after('<div class="qcbox-fixed js_hotcity"></div>').parent();var o=this.$fixed=s.find(".js_hotcity");var u=this.$handler=s.find(".qcbox-info b");n.addClass("textbox");if(this.data("hideicon")){u.hide()}s.click(function(e){t.fire("qcbox-focus")});e(document.body).bind("mouseup",function(n){if(e(n.target).closest(".qunar-qcbox").length==0){t.fire("qcbox-blur")}});s.mouseup(function(e){n.focus()});n.bind("blur",function(){t.resetPlaceHolder();t.$el.closest(".qcbox").removeClass("qcbox_on")});n.bind("focus",function(){t.hidePlaceHolder();this.select();t.$el.closest(".qcbox").addClass("qcbox_on")});n.bind("showHotCity",function(){t.plugins("hotcity").showHotcity()});n.keyup(function(e){switch(e.keyCode){case 9:s.find(".qcbox-placeholder").hide();break;default:break}});this._resetWidth();e.usePlugin(t,"qcbox");this._resetHotcity();this._resetPlaceHolder()},_resetHotcity:function(){function o(){var i=r.$el;var s=r.$fixed;if(!t.initialized){s.empty();t.$hotcity=s.append("<div class='hotcity'><div>").find(".hotcity");t.initializeStruct();t.initialized=true}e(t).trigger("hotcity-preshow",[t]);t.$hotcity.show();n=1;e(t).trigger("hotcity-show")}function u(){if(typeof t=="undefined"||!t.$hotcity)return;t.$hotcity.hide();n=0;e(t).trigger("hotcity-hide")}var t=this.plugins("hotcity");if(!t)return;var n=0;var r=this;var i=this.$el;var s=this.$wrap;t.attachedEl=t.attachedEl||new e;this.$el.keydown(function(e){u()});t.attachedEl=t.attachedEl.add(s.find(".qcbox-info > b , .qcbox-info")).add(s.find(".qcbox-info > b , .qcbox-info > .qcbox-text ").add(s.find(".qcbox-placeholder"))).add(s.find(".qcbox-prefix"));e(document).bind("mouseup",function(n){var r;if(i[0]===n.target&&(r=1)||~t.attachedEl.index(n.target)&&(r=2)){if(!t.$hotcity||!t.$hotcity.is(":visible")){o()}else{u()}if(r==2)i.focus();return}if(!e(n.target).data("hotcity-nogo")&&e(n.target).parents("[data-hotcity-nogo]").length==0)u()});t.showHotcity=o;t.hideHotcity=u;return t},_resetPlaceHolder:function(){function r(){var n=t.$el.val();if(e.trim(n)==""){i()}else{s()}}function i(){n.text(t.data("placeholder"));n.show()}function s(){n.hide()}var t=this;var n=this.$wrap.find(".qcbox-placeholder");r();this.showPlaceHolder=i;this.hidePlaceHolder=s;this.resetPlaceHolder=r},_resetWidth:function(){var e=this.$el;var t=this.$wrap;var n=this.data("prefix");if(n){t.find(".qcbox-prefix").text(n);e.css({})}else{t.find(".qcbox-prefix").remove()}}});e.RegisterUI("qcboxfuzzy",{initialize:function(){var t=this;var n=t.$el;n[0].qcboxfuzzy=this;n.parent().find(".qunar-qcbox").remove();var r=['<div class="qunar-qcbox">','<div class="qn-prefix">我想去</div>','<div class="qn-qcbox"></div>','<div class="qn-plc"><div class="plc">可输入城市或国家</div>',"</div>"];var i=['<div class="qcbox-fixed js_fuzzylist"></div>','<div class="qcbox-fixed"><div class="q-err"></div></div>'];var s=t.$wrap=n.before(r.join("")).after(i.join("")).parent();t.$fixed=s.find(".js_fuzzylist");t.$qtab=s.find(".qn-qcbox");t.$topic=s.find("#topic");t.$suggest=s.find(".js-suggestcontainer");t.$topic.val("");s.on("mouseup.fuzzyEvt",function(e){if(t.isFuzzyDis()){e.stopPropagation();t.setFuzzyErr();t.hidePlaceHolder()}});n.on("blur.fuzzyEvt",function(){t.resetPlaceHolder();s.removeClass("qcbox-fuzzy-on")}).on("focus.fuzzyEvt",function(){t.hidePlaceHolder();s.addClass("qcbox-fuzzy-on")});n.bind("showHotfuzzy",function(){t.plugins("hotfuzzy").showHotfuzzy()});n.bind("fuzzychange",function(){if(t.isFuzzyDis()){t.hidePlaceHolder()}});t.$qtab.delegate(".qtab","mouseover",function(){e(this).addClass("qtab-hover")}).delegate(".qtab","mouseout",function(){e(this).removeClass("qtab-hover")}).delegate(".f-delete","mouseup",function(){var n=t.$topic.val();var r=n.replace(/\([^)]*\)/g,"").split(",");var i=n.split(",");i.splice(e.inArray(e(this).parent(".qtab").data("txt"),r),1);t.$topic.val(i.join(","));e(this).parent(".qtab").remove();t.clearFuzzyErr();var s=[];e.map(t.$qtab.find(".qtab"),function(t){var n=e(t).data("type");if(e.inArray(n,s)<0){s.push(n)}});t.setElWidth()});n.keydown(function(e){switch(e.keyCode){case 9:s.find(".qcbox-placeholder").hide();break;case 8:if(n.val()==""&&t.$topic.val()!=""){var r=t.$topic.val().split(",");r.splice(r.length-1,1);t.$topic.val(r.join(","));t.$qtab.find(".qtab:last-child").remove();t.clearFuzzyErr();t.setElWidth()};default:t.isFuzzyDis()&&e.preventDefault();break}});e(document.body).bind("mouseup",function(r){if(e(r.target).closest(".qcbox-fuzzy").length==0){n.val();t.showPlaceHolder();t.isFuzzyDis()&&t.clearFuzzyErr()}});e.usePlugin(t,"qcboxfuzzy");this._resetHotfuzzy();this._resetPlaceHolder()},setFuzzyErr:function(e){var t=this;var n=!e?"最多支持输入5项":e;t.$wrap.addClass("qcbox-fuzzy-err");t.$wrap.find(".q-err").html(n)},clearFuzzyErr:function(){var e=this;e.$wrap.removeClass("qcbox-fuzzy-err")},renderTopicHtml:function(e){var t=this;var n=e.topic.length>3?e.topic.substring(0,3)+"..":e.topic,r=e.type||"",i=e.code||"";if(n.replace(/\ +/g,"")=="")return;var s=e.topic.length>3?"title="+e.topic:"";this.$qtab.append('<div class="qtab" data-type="'+r+'" data-code="'+i+'" data-txt="'+e.topic+'"'+s+'><span class="delbg"></span><span class="iconfont f-delete"></span>'+n+"</div>");t.setElWidth()},_resetHotfuzzy:function(){function a(){var i=r.$el;var s=r.$fixed;if(r.$suggest.find(".q-suggest")&&r.$suggest.find(".q-suggest").is(":visible")){return}if(!t.initialized){s.empty();t.$hotfuzzy=s.append("<div class='hotfuzzy'><div>").find(".hotfuzzy");t.initializeStruct();t.initialized=true}e(t).trigger("hotfuzzy-preshow",[t]);t.$hotfuzzy.show();n=1;e(t).trigger("hotfuzzy-show")}function f(){if(typeof t=="undefined"||!t.$hotfuzzy)return;t.$hotfuzzy.hide();n=0;e(t).trigger("hotfuzzy-hide")}var t=this.plugins("hotfuzzy");if(!t)return;var n=0;var r=this;var i=this.$el;var s=this.$wrap;var o=new e;o=o.add(s.find(".qn-qcbox"));var u=new e;u=u.add(s.find(".qn-prefix")).add(s.find(".plc")).add(i);s.keydown(function(e){f()});e(document).bind("mouseup",function(n){var r;if(o.index(n.target)==-1&&(s[0]===n.target||u.index(n.target)!=-1)){if(!t.$hotfuzzy||!t.$hotfuzzy.is(":visible")){a();i.focus()}else{f()}return}if(e(n.target).parents("[data-hotfuzzy-nogo]").length==0)f()});t.showHotfuzzy=a;t.hideHotfuzzy=f;return t},_resetPlaceHolder:function(){function r(){var n=t.$el.val();if(e.trim(n)==""){i()}else{s()}}function i(){if(t.isFuzzyDis()){return}n.text(t.data("placeholder"));n.show()}function s(){n.hide()}var t=this;var n=t.$wrap.find(".plc");r();this.showPlaceHolder=i;this.hidePlaceHolder=s;this.resetPlaceHolder=r},isFuzzyDis:function(){return this.$topic.size()&&this.$topic.val().split(",").length==5},setElWidth:function(){var e=this;e.$el.width(e.$wrap.width()-e.$qtab.width()-58)},checkTopic:function(){var e=this;e.$el.trigger("fuzzychange")}})})(jQuery);(function(e){function s(e){var t=e.offset();t["top"]+=e.outerHeight();return t}function o(e){return e.closest("table").data("data")[e.attr("data-ind")*1]}function u(e){var t=this;var n=t.visible();var r=e.keyCode;if(r===40&&!n){t.show();return}var i=t.el.find("tr");var s=i.filter(".active");switch(r){case 38:case 40:if(n){t._excludeEl=t._mouseFocus;s.removeClass("active");var u=e.keyCode===38?s.prev():s.next();if(u.size()===0)u=i.filter(r===38?":last":":first");var a=t.args.getData||o;var f=a(u);t.setValue(f);u.addClass("active");e.preventDefault();t._trigger("q-suggest-user-action",[e.type,f,r])}break;case 13:case 27:if(n){t.hide();t._trigger("q-suggest-user-action",[e.type,t.getValue(),r])}break;case 18:case 9:break;default:}}function a(e,t){if(!this.init)return new qsuggest(e,t);else return this.init(e,t)}var t=function(){var t="data-detect-oninput",n={},r={},i=1,s=1;var o=function(e,t,r,i){if(e.addEventListener)e.addEventListener(t,r,false);else if(e.attachEvent)e.attachEvent("on"+t,r);(n[i]||(n[i]=[])).push({t:t,h:r})};var u=function(e,t){if(!n[t])return;for(var r=0,i;i=n[t][r];r++)if(e.removeEventListener)e.removeEventListener(i["t"],i["h"],false);else if(e.detachEvent)e.detachEvent("on"+i["t"],i["h"]);delete n[t]};var a=function(e,t){var n=e.value;var r=function(){var i;if((i=e.value)!==n){if(r._sleep!==true)t.call(e,i,n);n=e.value}};return r};var f=navigator.userAgent.toLowerCase();return{version:"1.3",bind:function(e,n){var u,l=n[t];if(!l)n[t]=l=i++;if(!(u=e.getAttribute(t)))e.setAttribute(t,u=""+s++);var c=a(e,n);if("oninput"in e&&!/msie\s9/.test(f)&&!/opera/.test(f))o(e,"input",c,l);else{var h;o(e,"focus",function(){if(!h)h=setInterval(c,100)},l);o(e,"blur",function(){if(h){clearInterval(h);h=null}},l)}r[l]={eid:u,checker:c};return e},unbind:function(e,n){if(n[t]){u(e,n[t]);delete r[n[t]]}return e},set:function(e,n){var i=e.getAttribute(t);if(i){var s=[];for(var o in r)if(r[o]["eid"]===i){s.push(r[o]["checker"]);r[o]["checker"]._sleep=true}e.value=n;for(var u=0,a=s.length;u<a;u++){s[u].call(e);s[u]._sleep=false}}else e.value=n},setFuzzy:function(n,i){var s=n.getAttribute(t);var o=e(n);var u=e(n).siblings("#topic"),a=u.val()==""?"":u.val()+",",f=i.replace(/\([^)]*\)/g,""),l=i.match(/\(([^\)]+)\)/),c=l?l[1]:"",h=l?l[0]:"";if(u.size()&&u.val().indexOf(f)!=-1){return}if(s){var p=[];for(var d in r)if(r[d]["eid"]===s){p.push(r[d]["checker"]);r[d]["checker"]._sleep=true}o.data("qcboxfuzzy").renderTopicHtml({topic:f,type:1,code:c});u.val(a+f+h);n.value="";for(var v=0,m=p.length;v<m;v++){p[v].call(n);p[v]._sleep=false}}else{o.data("qcboxfuzzy").renderTopicHtml({topic:f,type:1,code:c});u.val(a+f+h);n.value=""}}}}();e.qsuggest={version:"1.2"};var n=e.qsuggest.ROOT_KEY="q-suggest";var r=0;var i={ajax:{url:null,cache:false,success:function(){}},reader:function(e){return e},loader:function(e){return e},max:10,min:1,container:null,delay:100,rdelay:1e3,requestWithNothing:false,trimQuery:true,autoSelect:true,css:{"z-index":500},setValue:function(e){return e},render:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exattr:function(e){return e}};e.extend(a.prototype,{init:function(s,a){this.key=++r;var f=this.ns=n+this.key;a=this.args=e.extend(true,{},i,a||{});var l=this.activeEl=e(s);var c=this;this.el=e('<div class="'+n+(a.customClass?" "+a.customClass:"")+'"></div>').appendTo(a["container"]||document.body).hide();this.el.data(n,this);this._handler=null;this._ajaxHandler=null;this._excludeEl=null;this._mouseFocus=null;this._last=[];this._cache={};this._value=null;e.each(a["on"]||{},function(e,t){l.bind(e+"."+f,t)});if(a["css"])this.el.css(c.args["css"]);var c=this;var h=false;l.bind("keydown."+f,function(e){var t=e.keyCode;if(t>=229){h=true}});t.bind(l[0],function(){c._trigger("q-suggest-inputChange");c.show()});l.bind("keydown."+f,function(e){if(h){h=false;return}var t=c.args.keyevent||u;t.call(c,e);h=false});l.bind("blur."+f,function(e){if(c.visible()&&c.args.fuzzyFun){this.value="";c.hide();return}if(c.visible()){var t=c.el.find(a.ACT_CLASS||"tr.active");if(t.length>0){var n=c.args.getData||o;if(c.args.autoSelect){var r=n(t);r&&c.setValue(r)}}else{c._trigger("q-suggest-noresult",[l])}c.hide()}});e("tr",this.el[0]).live("mouseover."+f+" mouseout."+f+" mousedown."+f,function(t){var n=e.nodeName(t.target,"tr")?e(t.target):e(t.target).parents("tr").eq(0);if(e(n[0]).attr("data-sug_type")==1){t.preventDefault();return}var r=n[0]!=c._excludeEl;if(t.type==="mouseover"){if(r){n.parents().children().removeClass("active");n.addClass("active");c._excludeEl=null}c._mouseFocus=n[0]}else if(t.type==="mouseout"){c._mouseFocus=null}else{var i=c.args.getData||o;c.setValue(i(n));c.hide();c._trigger("q-suggest-user-action",[t.type,c.getValue(),n.index(),null])}});this._trigger("q-suggest-init",[this]);return this},req:function(){var t=this;if(t._handler)clearTimeout(t._handler);if(t._timeoutHandler){clearTimeout(t._timeoutHandler);t._timeoutHandler=null}if(t._ajaxHandler){t._ajaxHandler=null}t._handler=setTimeout(function(){t.args.fuzzyFun?t.args.fuzzyFun():"";var n=t.activeEl.val(),r=t.args.loader(n),i=null,s;var o=function(){(t.args.draw||t.draw).apply(t,[].slice.call(arguments))};if(t.args.trimQuery)r=e.trim(r);if(!r&&!t.args.requestWithNothing){o(null);return}if(t._last&&t._last[0]===r){o(t._last[1]);return}if(t._last&&t._last[0]==r)i=t._last;else if(t.args.cache&&t._cache[r])i=t._cache[r];var u=typeof t.args.ajax.url=="function"?t.args.ajax.url():t.args.ajax.url;if(i)o((t._last=i)[1]);else if(!u)o(null);else{u=u.replace(/\*([^*]+)$/,encodeURIComponent(r)+"$1");var a=t.args.ajax.success;t._timeoutHandler=setTimeout(function(){t.hide()},t.args.rdelay);t._ajaxHandler=e.ajax(e.extend({},t.args.ajax,{url:u,success:function(e,i){clearTimeout(t._timeoutHandler);t._timeoutHandler=null;t._ajaxHandler=null;if(n!==t.activeEl.val())return;var s=t.args.reader.call(t,e,i);if(t.type(s)==="Array"){o(s,e);t._last=t._cache[r]=[r,s,i]}a.apply(this,arguments)}}))}},t.args.delay)},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},show:function(){this.req()},hide:function(){if(this.visible()){this.el.hide();this._trigger("q-suggest-hide")}},draw:function(t,n){this.el.empty();var r=this.args.min,i=this.args.max,o=t?t.length:0;if(!t||!o||o<r){this.hide();return}var u=t[0].country;var a={country:"中国",txt:"所有地点",val:"所有地点",type:0};var f={country:u,txt:u,val:u,type:0};if(this.args.allPlace&&t[o-1].val!=a.val){t.push(a)}var l=[],c=this.args.render,h=this.args.exattr,p=true;l.push('<table cellspacing="0" cellpadding="2"><tbody>');e.each(t,function(e,t){if(e>=i)return false;var n="";if(t.type!==1&&p){p=false;n=' class="active'}if(t.exClass){n=n?n+" "+t.exClass+'" ':' class="'+t.exClass+'" '}else{n=n?n+'" ':""}l.push("<tr",n,' data-ind="',e,'" ',h(t),"><td>",c(t),"</td></tr>")});l.push("</tbody></table>");this._trigger("q-suggest-beforeshow",[this.el,n]);var d=e(l.join("")).appendTo(this.el).data("data",t);if(!this.args["container"])this.el.css(s(this.activeEl));this.el.show();this._trigger("q-suggest-show",[t])},dispose:function(){this._trigger("q-suggest-dispose");this.activeEl.unbind("."+this.ns);e(window).unbind("."+this.ns);this.el.remove()},visible:function(){return this.el.is(":visible")},_trigger:function(){this.activeEl.triggerHandler.apply(this.activeEl,arguments)},setValue:function(e){if(this.args.fuzzyFun){t.setFuzzy(this.activeEl[0],e)}else{t.set(this.activeEl[0],e)}this._value=e;this._setExtData();this._trigger("q-suggest-setvalue",[e,this.activeEl])},_setExtData:function(){var e=this.args.getExtData?this.args.getExtData(this.el.find("tr.active")):{};this._trigger("q-suggest-setextdata",[e,this.activeEl])},getValue:function(){return this._value},set:function(e,t){var n=false;switch(e){case"container":this.el.appendTo(t||document.body);this.el.css({top:"",left:""});break}if(!n)for(var r=0,i=e.split("."),s=i.length,o=this.args;r<s&&(r!==s-1&&(o[i[r]]||(o[i[r]]={}))||(o[i[r]]=t));o=o[i[r]],r++){}return t},get:function(e){for(var t=0,n=this.args,r=e.split("."),i=r.length;t<i&&(n=n[r[t]]);t++){}return n}});e.fn.qsuggest=function(){var t=arguments;if(arguments.length>1&&this.data(n)){var r=null;if(arguments[0]==="option"||arguments[0]==="setting")this.each(function(i,s){var o=e(s);var u=this.data(n);if(u)r=r||(t.length>2?u.set(t[1],t[2]):u.get(t[1]))});return r}else if(arguments.length<=1){this.each(function(r,i){var s=e(i);if(s.data(n)){s.data(n).dispose();s.removeData(n)}var o=new a(i,t[0]);s.data(n,o)})}return this}})(jQuery);(function(e){function d(e,t){e=e==null?"":e+"";for(var n=0,r=t-e.length;n<r;n++)e="0"+e;return e}function v(e){if(holidayUtil.isWork(e)){return'<span class="ban">班</span>'}if(holidayUtil.isVacation(e)){return"<span>休</span>"}return""}function m(e){var t=window.SERVER_TIME||new Date;var n=c[e];if(n&&!n.fuzzy){var r;if(n.range){r=n.range}else if(/^\d{1,2}月$/.test(e)){var i=parseInt(e.replace("月",""))-1,s=t.getMonth(),o=i<s?t.getFullYear()+1:t.getFullYear(),u=i==s?t:new Date(o,i,1),a=new Date(o,i,(new Date(o,i+1,0)).getDate()),r=parseInt(Math.abs(new Date(h.formatDate(a).replace(/-/g,"/"))-new Date(h.formatDate(u).replace(/-/g,"/")))/1e3/60/60/24)}n.startDate=new Date(u.getTime());n.endDate=new Date(u.getTime()+r*24*3600*1e3)}if(n&&n.fuzzy){n.startDate=y(n.start);n.endDate=y(n.end);n.lastDate=y(n.last)}return n}function g(){return l}function y(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])}function b(e){if(typeof e=="number"){e=new Date(e)}return e.getFullYear()+"-"+w(e.getMonth()+1)+"-"+w(e.getDate())}function w(e){return e<10?"0"+e:e}function E(e){e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e}function S(e){var t=e.offset();t["top"]+=e.outerHeight();return t}function x(n){var r;if(n&&!n.nodeType)r=jQuery.event.fix(n||window.event).target;else r=n;if(!r)return null;var i=e(r).parents("."+t);return i.size()>0?i.eq(0).data(t):null}function T(){}function N(e,t){if(!this.init)return new N(e,t);else return this.init(e,t)}e.fdatepicker={};var t=e.fdatepicker.ROOT_KEY="q-datepicker-fly";var n;var r;var i;var s=[];var o=false;var u=0;var a=0;var f=FlightCalendarConf;var l=f.fuzzyDate0;var c=f.fuzzyDate;var h={LANG:{prev:"",next:"",day_names:["日","一","二","三","四","五","六"],OUT_OF_RANGE:"超出范围",ERR_FORMAT:"格式错误"},CLASS:{group:"g",header_mc:"m-h",header:"h",cld_mc:"m-c",cld_wp:"c-wp",calendar:"c",next:"e-n",prev:"e-p",title:"t",week:"w",month:"cm_",prc_wp:"m-p",tax_wp:"e-t",day_default:"st",day_selected:"st-a",day_othermonth:"st-s",day_today:"st-t",day_hover:"st-h",day_disabled:"st-d",day_round:"st-a-r",day_holiday:"st-holi-",day_area_bg:"st-area"},WEEKDAYS:7,STARTDAY:1,showOtherMonths:false,defaultDay:"",disabledDays:"",customClass:"",customActiveClass:"",multi:2,showTip:true,linkTo:null,linkRules:"",refObj:null,forceCorrect:true,loadMonthStore:[],dataStore:{},leftBtn:null,rightBtn:null,curMonthMove:{},cldWrap:null,hasTax:false,formatTitle:function(e){return e.getFullYear()+"年"+(e.getMonth()+1)+"月"},showOnInit:false,showOnFocus:false,container:null,minDate:null,maxDate:null,ui:null,sDay:null,endDay:null,pos:"",parseDate:function(e){var t=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);return t?new Date(t[1],t[2]*1-1,t[3]):null},formatDate:function(e){return e.getFullYear()+"-"+d(e.getMonth()+1,2)+"-"+d(e.getDate(),2)},minuteDate:function(e){var t=window.SERVER_TIME||new Date;t=new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate());return(e-t)/(24*60*60*1e3)},today:function(){var e=window.SERVER_TIME||new Date;e=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate());return this.formatDate(e)},plus:function(e,t){return new Date(e.getTime()+t*24*60*60*1e3)}};var p=function(){var t=this;for(var n=0,r=arguments.length;n<r;n++)e.each(arguments[n],function(e,n){var r;if(t.prototype[e]&&jQuery.isFunction(t.prototype[e]))r=t.prototype[e];t.prototype[e]=n;if(r)t.prototype[e]["_PARENT_"]=r});if(!t.prototype["parent"])t.prototype["parent"]=function(){return arguments.callee.caller["_PARENT_"].apply(this,arguments)}};T.implement=p;e.extend(T.prototype,{isUI:1,init:function(){var t=this,n=this.picker,r=n.ns;t.attachedEl=t.attachedEl||new e;e(document).bind("mousedown."+r,function(e){var r,i;if(n.activeEl[0]===e.target&&(r=1)||t.attachedEl.index(e.target)!=-1&&(r=2)){if(!n.visible()){i=m(n.activeEl.val());t.drawDate=i?i.startDate:t.drawDate;setTimeout(function(){n.show(t.getDate())},0)}else{n.hide()}if(r==2)n.activeEl.focus();return}var s;if((s=x(e))&&s.key===n.key)return;else n.hide()});var i=function(){if(!n.get("container"))n.getContainer().css(S(n.activeEl))};i();e(window).bind("load."+r+" resize."+r,i);n.activeEl.bind("focus."+r,function(e){if(n.get("showOnFocus"))n.show(t.getDate())});n.activeEl.bind("keydown."+r,function(e){switch(e.keyCode){case 40:t.setDate(new Date(t.getDate().getTime()+24*60*60*1e3));var r=t.validate();if(!r.success){return}n.show(t.getDate());break;case 38:t.setDate(new Date(t.getDate().getTime()-24*60*60*1e3));var r=t.validate();if(!r.success){return}n.show(t.getDate());break;case 9:case 27:n.hide();break;default:t.onKeyDown(e)}})},_init:function(e){this.picker=e},select:function(e){this.picker.activeEl.val(this.picker.args.formatDate(e))},posHandler:function(e,t){var n=this.picker.activeEl.attr("data-pos"),r=e,i,s=t.parseDate(this.picker.activeEl.val()),o=s?s.getMonth():(window.SERVER_TIME||new e).getMonth();i=new Date(r);i.setDate(1);return i},change:function(t,n,r){var i=this;var s=i.picker.args,o=s.leftBtn,u=s.rightBtn,f=s.cldWrap;var l=i.picker.get("minDate"),c=i.picker.get("maxDate");var h=r=="+1M"?false:true;var p=new Date(new Date(n.getFullYear(),n.getMonth(),1));var d=s.parseDate(s.formatDate(p));var v=s.parseDate(s.formatDate(p));v.setMonth(v.getMonth()+1);s.curMonthMove=h?d:v;if(e.inArray(s.curMonthMove.getMonth(),s.loadMonthStore)==-1){i.drawNewMonth(h,s.curMonthMove);i.picker._trigger("q-datepicker-change-prc",[t,p,r]);h?f.css({left:"-="+a+"px"}):"";s.loadMonthStore.push(s.curMonthMove.getMonth())}else if(s.loadMonthStore.length==12){var m=f.find(".c");var g=h?m.last().data("month"):m.first().data("month");if(s.curMonthMove.getMonth()==g){h?m.last().remove():m.first().remove();i.drawNewMonth(h,s.curMonthMove);i.picker._trigger("q-datepicker-change-prc",[t,p,r]);h?f.css({left:"-="+a+"px"}):f.css({left:"+="+a+"px"})}}if(h){!l||l.getFullYear()<t.getFullYear()||l.getFullYear()===t.getFullYear()&&l.getMonth()<t.getMonth()-1?o.removeClass("e-dis"):o.addClass("e-dis");u.removeClass("e-dis")}else{!c||c.getFullYear()>n.getFullYear()||c.getFullYear()===n.getFullYear()&&c.getMonth()>n.getMonth()+1?u.removeClass("e-dis"):u.addClass("e-dis");o.removeClass("e-dis")}},renderDateWraper:function(t,n){var r=this;r.drawDate=t;E(t);var i=r.picker.getContainer(),s=r.picker.args,o=s["CLASS"],u=s["LANG"],a=s.hasTax,f=s.minDate,l=s.maxDate;var c=[];s.dataStore={};s.loadMonthStore.length=0;c.push('<div class="'+o["group"]+'" style="display:none;">');c.push('<div class="'+o["header_mc"]+'">');c.push('<p class="'+o["next"]+"",!l||l.getFullYear()>t.getFullYear()||l.getFullYear()===t.getFullYear()&&l.getMonth()>t.getMonth()+1?"":" e-dis",'"><span href="#" class="iconfont chevron-right" onclick="QDP.change( event , \'+1M\' );return false;">',u["next"],"</span></p>");c.push('<p class="'+o["prev"]+"",!f||f.getFullYear()<t.getFullYear()||f.getFullYear()===t.getFullYear()&&f.getMonth()<t.getMonth()?"":" e-dis",'"><span href="#" class="iconfont chevron-left" onclick="QDP.change( event , \'-1M\' );return false;">',u["prev"],"</span></p>");c.push("</div>");c.push('<div class="'+o["cld_mc"]+'">');c.push('<div class="'+o["cld_wp"]+'">');c.push("</div>");c.push("</div>");c.push('<div class="'+o["prc_wp"]+'">');c.push('<div class="e_r">');if(r.picker.isSupportPrc){c.push('    <div class="'+o["tax_wp"]+' js_prc_change" style="display:none;">');c.push('        <span class="'+(a?"":"cur")+'" data-set="">未含税</span><span class="'+(a?"cur":"")+'" data-set="tax">含税总价</span>');c.push("    </div>")}if(window.QNR.isLocal){c.push("    当前为出发地时间")}c.push("</div>");r.picker.isFuzzy&&c.push(r._drawFuzzyDate());c.push("</div>");c.push("</div>");e(c.join("")).appendTo(i.empty()).show();s.leftBtn=i.find("."+o["prev"]);s.rightBtn=i.find("."+o["next"]);s.cldWrap=i.find("."+o["cld_wp"]);r.picker.isFuzzy&&window.QNR.isLocal&&r.bindFuzzyEvent(i)},bindFuzzyEvent:function(t){var n=t.find(".js_fuzzy_wp .m-fuzzy-box").width();t.find(".js_fuzzy_wp").addClass("e_fuzzy_w").bind("mouseenter",function(t){var n=e(this).parent().width()+15;e(this).find(".m-fuzzy-box").animate({width:n+"px"},200)}).bind("mouseleave",function(){e(this).find(".m-fuzzy-box").animate({width:n+"px"},200)})},renderPanelHTML:function(e,t,n){var r=this;var i=r.picker.args,s=i.multi,o=i["CLASS"];var u=[],a;a=r.posHandler(e,i);for(var f=0;f<t;f++){u.push('<div class="'+o["calendar"]+'" data-month="'+a.getMonth()+'">');u.push(r._drawTitle(a));n?u.push(r._drawBody(a,n)):u.push(r._drawBody(a));u.push("</div>");a.setMonth(a.getMonth()+1)}return u.join("")},drawPanel:function(t,n){var r=this;var i=r.picker.args,s=r.picker.args.cldWrap;var o=r.renderPanelHTML(t,i.multi,n);s.empty().append(e(o));r.picker.selectUi()},drawNewMonth:function(t,n,r){var i=this;var s=i.picker.args.cldWrap;var o=i.renderPanelHTML(n,1,r);t?e(o).prependTo(s):e(o).appendTo(s)},draw:function(t){var n=this;var r=n.picker.args;var i=m(n.picker.activeEl.val());r.activeDate=r.parseDate(n.picker.activeEl.val())||i&&i.startDate;n.renderDateWraper(t);n.drawPanel(t);a=e(n.picker.args.cldWrap.find(".c")[0]).width();r.loadMonthStore.push(t.getMonth(),t.getMonth()+1==12?0:t.getMonth()+1)},dispose:function(){var t="."+this.picker.ns;e(document).unbind(t);e(window).unbind(t)},getDate:function(){var e=this.picker.activeEl.val();var t=m(e);var n=t&&t.valid?t.startDate:this.picker.get("parseDate")(e);return n!=n?null:n},setDate:function(e){this.picker.activeEl.val(this.picker.get("formatDate")(e))},onBeforeDraw:function(e){var t=this;var n=function(e,t){if(e.getFullYear()>t.getFullYear())return 1;else if(e.getFullYear()===t.getFullYear())return(e.getMonth()-t.getMonth())/(Math.abs(e.getMonth()-t.getMonth())||1);else return-1};if(this.selectedDate&&this.drawDate)e.setTime(this.drawDate.getTime());else{var r=this.picker,i=r.get("minDate"),s=r.get("maxDate"),o=r.get("multi");var u=new Date(e.getFullYear(),e.getMonth()+o-1,1);if(s&&n(u,s)>0)for(var a=1;s&&o&&o>1&&o-a>0;a++){u=new Date(e.getFullYear(),e.getMonth()+o-a-1,1);if(n(u,s)<=0){u.setMonth(u.getMonth()-o+1);break}}else u=null;if(u&&(!i||u.getTime()>=i.getTime()))e.setTime(u.getTime())}},onKeyDown:function(e){},onSet:function(){this.selectedDate=null},_drawTitle:function(e){var t=this.picker.args;var n=t["CLASS"];var r=[];r.push('<div class="'+n["header"]+'">');r.push('<div class="'+n["title"]+'">',t.formatTitle(e),"</div>");r.push("</div>");return r.join("")},_drawBody:function(t,n){var r=this.picker.args,i=r["STARTDAY"],s=r["WEEKDAYS"],o=r["LANG"],u=r["CLASS"],a=r.activeDate,f=r.minDate,l=r.maxDate;if(a&&a!=a)a=null;var c=window.SERVER_TIME||new Date;var h=[];h.push('<div class="thwrap"><table cellspacing="0" cellpadding="0" border="0"><thead><tr>');for(var p=0;p<s;p++){var d=(i+p)%s;h.push('<th class="'+u["week"]+d+'">',o["day_names"][d]||"","</th>")}h.push("</tr></thead></table></div>");h.push('<div class="tdwrap"><table cellspacing="0" cellpadding="0" border="0"><tbody>');var m=[];var g=t.getFullYear(),y=t.getMonth()+1;var b=new Date(g,y-1,1);var w=1,E=(new Date(g,y,0)).getDate();var S=b.getDay()-i;while(S<0)S+=s;var x=w-S;var T=s-((1-x+E)%s||s)+E;for(var p=x,N=0;p<=T;p++,N++){var C=new Date(g,y-1,p);var k=r.formatDate(C);if(N%s==0)m.push("</tr>","<tr>");var d=(i+N)%s;m.push('<td class="'+u["week"]+d+" "+u["day_default"]);var L=false;if(e.grep(["getFullYear","getMonth","getDate"],function(e){return C[e]()==c[e]()}).length==3)m.push(" "+u["day_today"]);if(a!=null&&a.getTime()==C.getTime())m.push(" "+u["day_selected"]);var A=false;if(p<1||p>E){m.push(" "+u["day_othermonth"]);A=true}var O=r.formatDate(C).replace(/-/g,"")*1;var M=f&&r.formatDate(f).replace(/-/g,"")*1;var _=l&&r.formatDate(l).replace(/-/g,"")*1;if(f&&O<M||l&&O>_||~r.disabledDays.toString().indexOf(k)){if(!A){m.push(" "+u["day_disabled"])}L=true}var D=this._getDateClass(C);if(D&&!A)m.push(" "+D);m.push('"');if(!L){m.push(' onclick="QDP.select(event,new Date('+C.getFullYear()+","+C.getMonth()+","+C.getDate()+"));",'return false;"')}if(!L&&!A){m.push(" data-sort="+r.minuteDate(C)+">")}else{m.push('data-info = "disable">')}if(!A||r.showOtherMonths){var P=holidayUtil.getHolidayInfo(k);m.push('<div class="t-d">');if(!P||P&&P.holidayClass!=="double"){m.push('   <div class="d-t">');m.push(v(k));m.push("    </div>")}m.push('<span class="');var P=holidayUtil.getHolidayInfo(k);dateText=C.getDate();if(!L&&P&&P.holidayClass){m.push(" "+u["day_holiday"]+"default");m.push(" "+u["day_holiday"]+P.holidayClass);if(P.holidayClass==="double"){var H=P.holidayName.indexOf("/")?P.holidayName.split("/"):[];dateText="<div>"+H[0]+"</div><div>"+H[1]+"</div>"}else{dateText=P.holidayName}}m.push('">');var B=window.SERVER_TIME||new Date;if(C.getMonth()===B.getMonth()&&C.getFullYear()===B.getFullYear()&&dateText===B.getDate()&&r.minuteDate(C)===0){dateText="今天"}m.push(dateText);m.push("</span>");if(n){var j="";var F="";var I=n[k];if(I){var q=!r.hasTax?I.price:I.total_price;j='<i class="rmb">&yen;</i>'+q;F=(!r.hasTax?I.isLow:I.isTotalLow)?"d-b-low":""}m.push('    <div class="d-b '+F+'">'+j+"</div>")}else{m.push('<div class="d-b">&nbsp;</div>')}m.push("</div>")}else{m.push("&nbsp;")}m.push("</td>")}h.push(m.length>0?m.slice(1,-1).join(""):"");if(S+T<=35){h.push("<tr>");for(var p=0;p<s;p++){h.push('<td class="w3 st st-s" data-info="disable">&nbsp;</td>')}h.push("</tr>")}h.push("</tbody></table></div>");return h.join("")},_drawFuzzyDate:function(){var t=[],n=this,r,i,s;var o=0;t.push('<div class="e_fuzzy '+(window.QNR.isLocal?"e_fuzzy_w ":"")+'js_fuzzy_wp">');t.push('<i class="iconfont caret-right"></i>');t.push('<div class="m-fuzzy-box">');t.push(' <ul class="m-fuzzy-lst clrfix">');i=n.picker.activeEl.val();r=m(i)?i:"";s=g();var u=this.picker.args;var a=window.SERVER_TIME||new Date,f=a.getMonth(),l=a.getFullYear();for(var c=0;c<5;c++){month=f+c;if(month>12){month-=12;year=l+1}else{year=l}start=c==0?a:new Date(year,month,1);end=new Date(year,month,(new Date(year,month+1,0)).getDate());label=start.getMonth()+1+"月";val=u.formatDate(start).replace(/-/g,"/");iDays=parseInt(Math.abs(new Date(u.formatDate(end).replace(/-/g,"/"))-new Date(u.formatDate(start).replace(/-/g,"/")))/1e3/60/60/24);t.push('<li data-value="',label,'" data-range="',iDays,'"');t.push('onclick="QDP.fuzzyselect(event,new Date('+(new Date(val)).getFullYear()+","+(new Date(val)).getMonth()+","+(new Date(val)).getDate()+"));",'return false;"');t.push(">",label,"</li>");o++}e.each(s,function(e,n){var i=m(n);_class=r==n?"st-h":"";if(n=="抗战胜利日"||n=="中秋&国庆"){_class+=" st-w"}if(i.lastDate>SERVER_TIME&&o<9){t.push('<li data-value="',i.value,'" class="',_class,'" data-range="',i.range,'"');t.push('onclick="QDP.fuzzyselect(event,new Date('+i.startDate.getFullYear()+","+i.startDate.getMonth()+","+i.startDate.getDate()+"));",'return false;"');t.push(">",n,"</li>");o++}});t.push(" </ul>");t.push("</div>");t.push("</div>");return t.join("")},_getDateClass:function(t){var n=this.picker.args;var r=n.formatDate(t);var i="";var s=this.picker.activeEl.val();var o=m(s);var u=o?n.formatDate(o.startDate):s;var a=parseInt(r.replace(/-/g,""),10);var f=parseInt(u.replace(/-/g,""),10);var l,c,h,p,d,v,g;var y=this.picker.activeEl.attr("name")=="fromDateMulti";if(this.picker.get("linkTo")&&!y){v=this.picker.get("linkTo").data(e.fdatepicker.ROOT_KEY);l=v.activeEl.val();c=m(l);h=c?n.formatDate(c.endDate):l;d=parseInt(u.replace(/-/g,""));ecurrVal=parseInt(h.replace(/-/g,""));n.sDay=u;n.endDay=h;if(typeof s!="undefined"&&a==d){i=this.addRoundClass("FROM")}if(v){if(typeof v.activeEl.val()!="undefined"&&a==ecurrVal){i=this.addRoundClass("BACK")}}if(a<ecurrVal&&a>d){i=this.addRoundClass("AREAR")}}else if(this.picker.get("refObj")){g=this.picker.get("refObj").data(e.fdatepicker.ROOT_KEY);l=g.activeEl.val();c=m(l);h=c?n.formatDate(c.startDate):l;u=o?n.formatDate(o.endDate):s;d=parseInt(h.replace(/-/g,""));ecurrVal=parseInt(u.replace(/-/g,""));n.sDay=h;n.endDay=u;if(typeof this.picker.activeEl.val()!="undefined"&&a==ecurrVal){i=this.addRoundClass("BACK")}if(g){if(typeof g.activeEl.val()!="undefined"&&a==d){i=this.addRoundClass("FROM")}}if(a>d&&a<ecurrVal){i=this.addRoundClass("AREAR")}}else if(o&&a>=f){ecurrVal=parseInt(n.formatDate(o.endDate).replace(/-/g,""));d=parseInt(n.formatDate(o.startDate).replace(/-/g,""));n.sDay=n.formatDate(o.startDate);n.endDay=n.formatDate(o.endDate);if(a<ecurrVal){i=this.addRoundClass("AREAR")}if(a==ecurrVal){i=this.addRoundClass("BACK")}if(a==d){i=this.addRoundClass("FROM")}}if(holidayUtil.isHoliday(r))i+=" "+"holi";return e.trim(i)}});window.QDP={};e.each(["select","change","_trigger","fuzzyselect"],function(e,t){window.QDP[t]=function(){o=false;if(!arguments[0])return;var e=x(arguments[0]);if(e&&e[t]){if(t==="select"||t==="fuzzyselect"){return e[t].apply(e,Array.prototype.slice.call(arguments))}else{return e[t].apply(e,Array.prototype.slice.call(arguments,1))}}}});e.extend(N.prototype,{init:function(n,r){r=r||{};if(r["ui"]){if(r["ui"]["isUI"])this.ui=r["ui"];else if(typeof r["ui"]=="string"&&e.fdatepicker.uis[r["ui"]])this.ui=new e.fdatepicker.uis[r["ui"]]}if(!this.ui)this.ui=new T;this.ui._init(this);r=this.args=e.extend(true,{},h,r||{});this.key=++u;var i=this.ns=t+this.key;var s=this.activeEl=e(n);this.el=e('<div class="'+t+'"></div>').appendTo(this.args["container"]||document.body).hide();e(this.el).data(t,this);this.ui.init();this.lastShowedDate=null;this.showedDate=null;if(r["showOnInit"])this.show();e.each(r["on"]||{},function(e,t){s.bind(e+"."+i,t)});return this},_trigger:function(){this.activeEl.triggerHandler.apply(this.activeEl,arguments)},select:function(){if(arguments.length>1){var t=arguments[0]||window.event;date=arguments[1]}else{var t=t||window.event;date=arguments[0]}if(t){var n=t.srcElement?t.srcElement:t.target;if(e(n).parents("."+this.args.CLASS["calendar"]).data("index")===1){this.activeEl.attr("data-pos","right")}if(e(n).parents("."+this.args.CLASS["calendar"]).data("index")===0){this.activeEl.attr("data-pos","left")}}this.ui.select(date);this.hide();this._trigger("q-datepicker-select",[date])},setFuzzy:function(e){this.isFuzzy=e},supportPrice:function(e,t){this.isSupportPrc=e;e&&this.activeEl.datepirce(t)},fuzzyselect:function(){var t=function(t){e(s).each(function(e,n){n.fuzzyInput(t);n.autoCheck.call(n)})};e(s).each(function(e,n){n.picker.activeEl.bind("blur."+n.picker.ns,t)});var n=arguments[0].srcElement||arguments[0].target,r,u;this.activeEl.attr("data-pos","left");u=e(n).data("value");o=true;this.activeEl.val(u);i=n;this.ui.fuzzyselect(arguments[1]);this.hide();if(this.get("linkTo")){r=this.get("linkTo").data(e.fdatepicker.ROOT_KEY);r.activeEl.val(u)&&r.ui.fuzzyselect(arguments[1])}else if(this.get("refObj")){r=this.get("refObj").data(e.fdatepicker.ROOT_KEY);if(r.activeEl.val().indexOf("周")!=-1&&u.indexOf("周")!=-1){return}r.activeEl.val(u);r.ui.fuzzyselect(arguments[1])}this.activeEl.val(u)},_selectTd:function(t,n,r){for(var i=parseInt(t),s=n;i<s;i++){e("td[data-sort='"+i+"']:not('.st-d')").addClass(h.CLASS["day_area_bg"])}},selectUi:function(){var t=this,n,r,o,u,a,f,l;l=t.activeEl.val();var c=t.args.minuteDate(new Date(l.replace(/-/g,"/")));var p=t.activeEl[0]["id"];var d=m(l);var v=this.el;u=this.args;if(u.sDay)r=u.minuteDate(new Date(u.sDay.replace(/-/g,"/")));if(u.endDay)o=u.minuteDate(new Date(u.endDay.replace(/-/g,"/")));var g=v.find("td[data-sort='"+r+"']"),y=v.find("td[data-sort='"+o+"']");v.undelegate(".fly").delegate('td:not(".st-d")',{"mouseenter.fly":function(i){if(e(this).data("info")==="disable"){return}if(m(t.activeEl.val())){e(this).addClass(u.CLASS["day_hover"]);return}e(this).addClass(u.CLASS["day_hover"]);a=e(this).parents(".ch_sch_form");if(!m(t.activeEl.val())&&a.find("[data-type = 'oneWay']").length<1){n=parseInt(e(this).attr("data-sort"));if(r===o&&c===r&&t.activeEl.attr("name")==="fromDate"&&n>o){return}if(r===o&&c===r&&t.activeEl.attr("name")==="toDate"){y.addClass(u.CLASS["day_selected"]+" "+h.CLASS["day_round"])}if(n>r-1&&n<o+1){v.find("td").removeClass(u.CLASS["day_area_bg"]);if(c===o){y.removeClass(u.CLASS["day_selected"]).removeClass("st-a-r");t._selectTd(r+1,n)}else{g.removeClass(u.CLASS["day_selected"]);t._selectTd(n+1,o)}}if(n<r){if(c===o){}else{v.find("td").removeClass(u.CLASS["day_area_bg"]);g.removeClass(u.CLASS["day_selected"]);t._selectTd(n+1,o)}}if(n>o){v.find("td").removeClass(u.CLASS["day_area_bg"]);if(c===o){t._selectTd(r+1,n)}else{v.find("td.st-a").removeClass("st-a")}}}},"mouseleave.fly":function(){if(e(this).data("info")==="disable"){return}if(m(t.activeEl.val())){e(this).removeClass(u.CLASS["day_hover"]);return}e(this).removeClass(u.CLASS["day_hover"]);if(!d&&a&&a.find("[data-type = 'oneWay']").length<1){v.find("td").removeClass(u.CLASS["day_area_bg"]);g.addClass(u.CLASS["day_selected"]);y.addClass(u.CLASS["day_round"]);t._selectTd(r+1,o)}}});v.find('li:not(".st-h")').unbind().bind("mouseover",function(){e(s).each(function(e,t){t.picker.activeEl.unbind("blur")});e(this).addClass(u.CLASS["day_hover"]);var n,r;var i=1,f=e(this).attr("data-range");var l=v.find(".st-a");if(l.length===0){l=v.find(".st-a-r")}v.find(".st-a").removeClass("st-a");v.find(".st-area").removeClass("st-area");v.find(".st-a-r").removeClass("st-a-r");var p=e(this).attr("onclick").match(/\d+/g);var d=new Date(p[0],p[1],p[2]);i=h.minuteDate(d);a=e(this).parents(".ch_sch_form");if(a.find("[data-type = 'oneWay']").length<1){v.find("td").removeClass(u.CLASS["day_area_bg"]);g.removeClass(u.CLASS["day_selected"]);y.removeClass(u.CLASS["day_selected"]+" "+h.CLASS["day_round"])}else{c&&v.find("td[data-sort='"+c+"']").removeClass(u.CLASS["day_selected"]);o&&y.removeClass(u.CLASS["day_selected"]+" "+h.CLASS["day_round"])}if(i!==1){t._selectTd(parseInt(i)+1,parseInt(i)+parseInt(f));v.find("td[data-sort='"+(parseInt(i)+parseInt(f))+"']").addClass(u.CLASS["day_round"])}else{if(l.find("span").text()==="今天"){i=1;t._selectTd(2,f)}else{t._selectTd(2,f)}v.find("td[data-sort='"+f+"']").addClass(u.CLASS["day_round"])}v.find("td[data-sort='"+i+"']").addClass(u.CLASS["day_round"])}).bind("mouseout",function(n){var s=e(".st-h");var f=v.find(".st-a");var l=v.find(".st-area");var p=e(".st-t").find("span").text();var d;if(s.length>1){f.removeClass("st-a");l.removeClass("st-area");v.find(".st-a-r").removeClass("st-a-r");if(i){var m=e(i).attr("onclick").match(/\d+/g)}else{var m=s.eq(1).attr("onclick").match(/\d+/g)}var b=new Date(m[0],m[1],m[2]);var w=e(this).attr("data-range");var E=h.minuteDate(b);d=v.find("td[data-sort='"+E+"']");d.addClass(u.CLASS["day_round"]);t._selectTd(parseInt(E)+1,parseInt(E)+parseInt(w));v.find("td[data-sort='"+(parseInt(E)+parseInt(w))+"']").addClass(u.CLASS["day_round"])}else{if(p==="今天"){var E=0}else{var E=1}d=v.find("td[data-sort='"+E+"']")}f.removeClass("st-a");l.removeClass("st-area");v.find(".st-a-r").removeClass("st-a-r");var w=e(this).attr("data-range");a=e(this).parents(".ch_sch_form");e(this).removeClass(u.CLASS["day_hover"]);v.find("td").removeClass(u.CLASS["day_area_bg"]);d.addClass(u.CLASS["day_round"]);if(a.find("[data-type = 'oneWay']").length<1){g.addClass(u.CLASS["day_selected"]);y.addClass(u.CLASS["day_round"]);t._selectTd(r+1,o)}else{c&&v.find("td[data-sort='"+c+"']").addClass(u.CLASS["day_selected"]);!c&&t._selectTd(r+1,o);o&&y.addClass(u.CLASS["day_round"]);c&&v.find(".st-a-r").removeClass("st-a-r")}r!=E&&d.removeClass(u.CLASS["day_round"]);o!=w&&v.find("td[data-sort='"+w+"']").removeClass(u.CLASS["day_round"]);!c&&d.addClass(u.CLASS["day_round"])})},set:function(t,n,r){if(!this.ui.onSet||this.ui.onSet(t,n,r)===false)return;if(typeof t==="string"){var i=false;switch(t){case"container":this.el.appendTo(e(n).find(".qcbox-fixed")||document.body);this.el.css({top:"",left:""});break}for(var s=0,o=t.split("."),u=o.length,a=this.args;s<u&&(s!==u-1&&(a[o[s]]||(a[o[s]]={}))||(a[o[s]]=n));a=a[o[s]],s++){}}if(r&&this.visible()){this._show(this.showedDate)}},get:function(e){for(var t=0,n=this.args,r=e.split("."),i=r.length;t<i&&(n=n[r[t]]);t++){}return n},change:function(e){var t=this;var r=t.args.cldWrap;if(e=="-1M"&&t.args.leftBtn.hasClass("e-dis")){return}else if(e=="+1M"&&t.args.rightBtn.hasClass("e-dis")){return}if(t._scrolling){return}var i=typeof e==="string"?n(e,this.showedDate):e;var s=this.showedDate;this.lastShowedDate=this.showedDate;this.showedDate=i;this.ui.change(s,i,e);this._trigger("q-datepicker-change",[s,i,e]);t._scrolling=true;var o=e=="-1M"?"+=":"-=";r.animate({left:o+a+"px"},"50",function(){t._scrolling=false})},show:function(e){var t=this;var n,r=t.get("minDate"),i=t.get("maxDate");searchTrack._updateTime(t);setTimeout(function(){if(!e)Ctime=window.SERVER_TIME||new Date;else Ctime=e;n=new Date(Ctime.getFullYear()+"/"+(Ctime.getMonth()+1)+"/"+Ctime.getDate());if(r&&n.getTime()<r.getTime())n.setTime(r.getTime());else if(i&&n.getTime()>i.getTime())n.setTime(i.getTime());t.ui.onBeforeDraw(n);t._show.call(t,n);t._trigger("q-datepicker-show",[e])},100)},_show:function(t){this.lastShowedDate=this.showedDate;this.showedDate=t;this.activeEl&&e(this.activeEl).trigger("beforeRender");if(this.ui.draw(t)!==false);this.ui.picker.activeEl.closest(".qcbox").addClass("qcbox_on");this.el.show()},hide:function(){if(this.visible()){this.ui.picker.activeEl.closest(".qcbox").removeClass("qcbox_on");this.el.hide();this._trigger("q-datepicker-hide")}},dispose:function(){this.ui.dispose();this.el.remove();this.activeEl.unbind("."+this.ns);this._trigger("q-datepicker-dispose")},visible:function(){return this.el.is(":visible")},getContainer:function(){return this.el}});var C={"+M":function(e,t){var n=e.getDate();e.setMonth(e.getMonth()+t);if(e.getDate()!==n)e.setDate(0)},"-M":function(e,t){var n=e.getDate();e.setMonth(e.getMonth()-t);if(e.getDate()!==n){e.setDate(0)}},"+D":function(e,t){e.setDate(e.getDate()+t)},"-D":function(e,t){e.setDate(e.getDate()-t)},"+Y":function(e,t){e.setFullYear(e.getFullYear()+t)},"-Y":function(e,t){e.setFullYear(e.getFullYear()-t)}};e.extend(e.fdatepicker,{uis:[],createUI:function(t,n){var r=n&&e.fdatepicker.uis[n]?e.fdatepicker.uis[n]:T;var i=function(){};e.extend(i,r);e.extend(i.prototype={},r.prototype);if(t){e.fdatepicker.uis[t]=i;i.prototype.name=t}return i},calcTime:function(e,t){e=(e||"").toString();var n;if(t)n=new Date(t.getTime());else{n=new Date;var r=e.match(/^\d+/);if(r)n.setTime(r[0]*1)}var i=/([+-])(\d+)([MDY])/g,s;while(s=i.exec(e)){var o=s[1]+s[3];if(C[o])C[o](n,s[2]*1)}return n}});e.fdatepicker.createUI("qunar").implement({init:function(){this.parent.apply(this,arguments);var e=this,t=this.picker;if(t.activeEl.attr("name")!=="fromDate"&&t.activeEl.attr("name").indexOf("Multi")===-1){r=e;s.push(e)}var n=t.get("customActiveClass");t.activeEl.parent().find(".qunar-qcbox").remove();var i=this.triggerEl=t.activeEl.before('<div class="qunar-qcbox'+(n?" "+n:"")+'"><div class="qcbox-placeholder"></div><div class="qcbox-prefix"></div><div class="qcbox-info"><b class="iconfont f-calendar"></b><span class="dp-text"></span></div></div>').after('<div class="qcbox-fixed"></div>').parent();var o=this.picker.args.prefix||t.activeEl.data("prefix");if(o){i.find(".qcbox-prefix").text(o);t.activeEl.css({left:i.find(".qcbox-prefix").outerWidth(true)+"px"})}else{i.find(".qcbox-prefix").remove()}t.set("container",i[0]);this.attachedEl=this.attachedEl.add(i.find(".qcbox-info > b , .qcbox-info")).add(i.find(".qcbox-info > b , .qcbox-info > .dp-text "));t.activeEl.attr("maxlength",10);t.activeEl.addClass("textbox");t.activeEl.bind("keyup."+t.ns,function(t){e.updateTip(e.validate.call(e))}).bind("blur."+t.ns,function(t){e.fuzzyInput(t);e.autoCheck.call(e)});if(t.get("defaultDay")!=null)this.setDate(this.getDefaultDate());this.updateTip(this.validate());this.selectedDate=null;this.checkLinked()},getDefaultDate:function(){var e=this.picker;var t=n(e.get("defaultDay"));var r=e.get("minDate"),i=e.get("maxDate");if(r&&r.getTime()>t.getTime()||i&&i.getTime()<t.getTime())t=r||i;return t},checkLinked:function(t){var r=this.picker,i;if(!r.get("linkTo")||!(i=r.get("linkTo").data(e.fdatepicker.ROOT_KEY))||i.ui.name.indexOf("qunar")!==0)return;var s=(r.get("linkRules")||"").split(",");var o=this.getDate();if(o==null)return;if(t){if(t.restPos&&t.pos||t.restPos&&!i.activeEl.attr("data-pos")){i.activeEl.attr("data-pos",t.restPos)}}var u={};e.each(["ds","mind","maxd"],function(e,t){if(s[e])u[t]=n(s[e],o)});var a=i.get("strictMinDate"),f=i.get("strictMaxDate");if(u["mind"]||a){var l=(u["mind"]?u["mind"].getTime():-1)>(a?a.getTime():-1)?u["mind"]:a;i.set("minDate",l,false)}if(u["maxd"]||f){var l=(u["maxd"]?u["maxd"].getTime():Number.MAX_VALUE)>(f?f.getTime():Number.MAX_VALUE)?f:u["maxd"];i.set("maxDate",l,false)}i.set(null,null,true);var c=i.ui.validate();var h=m(r.activeEl.val()),p=m(i.activeEl.val());if(c&&!c["success"]&&r.get("forceCorrect")||!h&&p){i.select(u["ds"]);i.ui.drawDate=null;c=i.ui.validate()}!p&&c&&i.ui.updateTip(c);var d="Y";return d},checkRefObj:function(t){var r=this.picker,i;if(!r.get("refObj")||!(i=r.get("refObj").data(e.fdatepicker.ROOT_KEY))||i.ui.name.indexOf("qunar")!==0)return;if(!m(i.activeEl.val())){return}var s=(r.get("linkRules")||"").split(",");var o=this.getDate();if(o==null)return;if(t){if(t.restPos&&t.pos||t.restPos&&!i.activeEl.attr("data-pos")){i.activeEl.attr("data-pos",t.restPos)}}var u={};e.each(["ds","mind","maxd"],function(e,t){if(s[e])u[t]=n(s[e],o)});var a=i.get("strictMinDate"),f=i.get("strictMaxDate");if(u["mind"]||a){var l=(u["mind"]?u["mind"].getTime():-1)>(a?a.getTime():-1)?u["mind"]:a;i.set("minDate",l,false)}if(u["maxd"]||f){var l=(u["maxd"]?u["maxd"].getTime():Number.MAX_VALUE)>(f?f.getTime():Number.MAX_VALUE)?f:u["maxd"];i.set("maxDate",l,false)}i.set(null,null,true);i.activeEl.val(this.picker.args.today());var c=i.ui.validate();if(c&&!c["success"]&&r.get("forceCorrect")){i.select(u["ds"]);i.ui.drawDate=null;c=i.ui.validate()}c&&i.ui.updateTip(c);var h="Y";return h},select:function(e,t){var n=this.picker;this.parent.apply(this,arguments);this.selectedDate=e;this.drawDate=e;if(!t)this.autoCheck()},fuzzyInput:function(t){var n,r=t.target.value,i,s=m(r);if(s&&s.valid){this.fuzzyselect();n=this.picker.get("linkTo")||this.picker.get("refObj");i=n&&(!m(n.val())||n.val().indexOf("周")==-1||r.indexOf("周")==-1);i&&n.data(e.fdatepicker.ROOT_KEY).ui.setFuzzyDate(r)}},fuzzyselect:function(e,t){this.selectedDate=e;this.showText("");if(!t)this.autoCheck()},setFuzzyDate:function(e){var t=m(e),n=this.picker.activeEl.val();if(t){this.picker.activeEl.val(e);this.fuzzyselect(t.startDate)}else if(!m(n)&&this.picker.args.parseDate(n).getTime()>=this.picker.args.parseDate(e).getTime()){return}else{n=this.picker.args.plus(this.picker.args.parseDate(e),3);this.picker.activeEl.val(this.picker.args.formatDate(n));this.autoCheck()}},showText:function(e){var t=this.triggerEl.find(".dp-text");t.removeClass("errtext").html(e)},showErrText:function(e){var t=this.triggerEl.find(".dp-text");t.addClass("errtext").html(e)},autoCheck:function(){var e=this.picker,t,n;var r=e.activeEl.attr("data-pos");n=e.activeEl.val();t=m(n);if(t&&t.valid){this.checkLinked({pos:e.args.pos,restPos:r});e.args.pos="";return}var i=this.validate();if(!i["success"]&&e.get("forceCorrect")){this.setDate(this.getDefaultDate());this.updateTip(this.validate())}else{if(i["formatted"])e.activeEl.val(i["formatted"]);this.updateTip(i)}this.checkLinked({pos:e.args.pos,restPos:r});this.checkRefObj({pos:e.args.pos,restPos:r});e.args.pos=""},updateTip:function(e){if(!this.picker.get("showTip"))return;if(!e.success)this.showErrText(e.errmsg);else this.showText(e.daytip)},validate:function(){var e=this.picker;var t=this.picker.activeEl.val();var n=this.getDate();var r=this;if(n&&this.selectedDate&&this.selectedDate.getTime()!=n.getTime())this.selectedDate=null;var i="";if(n==null){i=e.get("LANG.ERR_FORMAT");e._trigger("q-datepicker-error",["FORMAT",t])}else{var s=e.get("minDate"),u=e.get("maxDate");if(s&&s.getTime()>n.getTime()||u&&u.getTime()<n.getTime()){i=e.get("LANG.OUT_OF_RANGE");e.args.pos="change";e._trigger("q-datepicker-error",["RANGE",t])}}var a={success:!i,errmsg:i,formatted:null,daytip:null};if(a["success"]){var f=e.get("formatDate")(n),l;switch(e.args.minuteDate(n)){case 0:if(!o)l="今天";break;case 1:l="明天";break;case 2:l="后天";break;default:l="周"+e.get("LANG.day_names")[n.getDay()];break}var c=holidayUtil.getDateTip(f);a["daytip"]=c?c:l;a["formatted"]=f}return a},addRoundClass:function(e){if(e=="FROM")return this.picker.get("CLASS")["day_selected"];else if(e=="BACK"){return this.picker.get("CLASS")["day_round"]}else if(e=="AREAR"){return this.picker.get("CLASS")["day_area_bg"]}}});e.fn.fdatepicker=function(){if(this[0]){if(arguments.length>1&&this.data(t)){var e=this.data(t);if(arguments[0]==="option"||arguments[0]==="setting")return arguments.length>2?e.set(arguments[1],arguments[2]):e.get(arguments[1])}else if(arguments.length<=1){if(this.data(t)){this.data(t).dispose();this.removeData(t)}var n=new N(this[0],arguments[0]);this.data(t,n)}}return this};n=e.fdatepicker.calcTime})(jQuery);var Price_Dp=function(e){var t=this;t.datepicker=e;t.defFrom={$fromCity:null,$toCity:null,$fromDate:null}};var specialCity=["香港","澳门","台北","高雄","台南","台中","台东","嘉义","花莲","格林岛","金门","马公","马祖","南竿","七美"];Price_Dp.prototype={init:function(e){var t=this;t.$form=$.extend(t.defFrom,e)},loadData:function(e,t){var n=this;var r=n.datepicker.ui.picker;var i=n.datepicker.ui;var s=!t?n.datepicker.args.multi||2:1;var o=n.$form;var u=e?e:n.datepicker.args.parseDate(o.$fromDate.val());var a=o.$fromCity.val();var f=o.$toCity.val();var l=n.datepicker.args.formatDate(u);var c="";if(n.datepicker.activeEl.attr("name")==="toDate"){l=o.$fromDate.val();c=n.datepicker.args.formatDate(u)}if(a===""||f===""||l===""){return}else{var h={dep:a.indexOf("(")===-1?a:a.substring(0,a.indexOf("(")),arr:f.indexOf("(")===-1?f:f.substring(0,f.indexOf("(")),dep_date:l,ret_date:c,month_num:s};var p=1;if(i.picker.args.schForm.form==="#ifsForm"){p=2}$.when($.ajax({url:"//gw.flight.qunar.com/api/f/priceCalendar",data:{dep:h.dep,arr:h.arr,days:"",priceType:p},dataType:"jsonp",timeout:3e3}),judgeCityType(h.dep),judgeCityType(h.arr)).then(function(e,n,s){var o=n||s;var a=e[0];if(a&&a.data){var f=priceArrToJson(a.data.gflights);r.args.dataStore=$.extend(r.args.dataStore,f||{});r.args.hasTax=o;var l=r.args.cldWrap;if(t==="+1M"){l.find(".c:last").remove();i.drawNewMonth(false,u,f)}else if(t==="-1M"){l.find(".c:first").remove();i.drawNewMonth(true,u,f)}else{i.drawPanel(u,f)}}},function(e){console.log("lp_calendar/month req error:",e)})}}};$.fn.datepirce=function(e){var t=this;t.each(function(t,n){var r=$(n),i=r.data("q-datepicker-fly"),s=i.args;if(!r.data("q-dateprice")){var o=new Price_Dp(i);o.init(e);r.on("q-datepicker-show",function(t,n){var r=$(this).closest("form").find(".js-searchtype-roundtrip");var i=r.length&&r.attr("checked");if(e.$fromCity.val()===""||e.$toCity.val()===""||i){return}o.loadData(n)}).on("q-datepicker-change-prc",function(t,n,r,i){var u=$(this).closest("form").find(".js-searchtype-roundtrip");var a=u.length&&u.attr("checked");if(e.$fromCity.val()===""||e.$toCity.val()===""||a){return}o.loadData(s.curMonthMove,i)});r.data("q-dateprice",o)}})};(function(e){function n(t){var n={};e("[data-tab]",t).each(function(){var i=e(this);var s=i.data("tab");if(!n[s]){r(t,s,i.data("tab-id"),i.data("tab-active"));n[s]=true}})}function r(t,n,r,i){if(!n||!r)return;var s=i||"active";var o=t.find("[data-tab='"+n+"'][data-tab-id='"+r+"']");var u=t.find("[data-panel='"+n+"'][data-panel-id='"+r+"']");if(o.hasClass(s)&&u.is(":visible"))return;var a;(a=t.find("[data-tab='"+n+"']")).removeClass(s);o.addClass(s);t.find("[data-panel='"+n+"']").hide().removeClass("js-transition-after js-transition-before");u.addClass("js-transition-before");u.show();setTimeout(function(){u.addClass("js-transition-after")},20);var f=t.find("[data-tab='"+n+"'][data-tab-id='"+r+"']:radio");if(f.length){f.attr("checked","checked")}e.tabs[n]=r;e(e.tabs).trigger(n+"-change",[r,o,u,a])}e.tabs={};var t=e(document.body);e.tabs.changeTab=r;e.tabs.init=function(i,s){var o=i||t;var s=s||"click";n(o);o.delegate("[data-tab]",s,function(t){var n=e(this).data("tab");var i=e(this).data("tab-id");var s=e(this).data("tab-active");r(o,n,i,s);t.stopPropagation()})}})(jQuery);(function(e){function i(e){var n=e.contentWindow.QunarHistory;t=s(n)}function s(t){function d(e){var t=[],n;for(var r=0;r<e.length;r++){n=0;for(var i=0;i<t.length;i++){if(e[r].fromCity==t[i].fromCity&&e[r].toCity==t[i].toCity){n=1;break}}if(n!=1){t.push(e[r])}}return t}var n=t.findEntries("SF");var r=t.findEntries("DL");var i=[],s=[],u=[],f=[];e.each(n,function(e,t){if(o(t)){i.push(a(t));return false}});e.each(n,function(e,t){if(!o(t)){s.push(a(t));return false}});e.each(r,function(e,t){t.roundtrip=true;if(o(t)){u.push(a(t));return false}});e.each(r,function(e,t){t.roundtrip=true;if(!o(t)){f.push(a(t));return false}});var l=[],c=[];l=l.concat(s).concat(f);c=c.concat(i).concat(u);l.sort(function(e,t){return parseInt(t.timestamp,10)-parseInt(e.timestamp,10)});c.sort(function(e,t){return parseInt(t.timestamp,10)-parseInt(e.timestamp,10)});var h=[],p=[];e.each(n,function(e,t){if(o(t)){h.push(a(t))}else{p.push(a(t))}});e.each(r,function(e,t){t.roundtrip=true;if(o(t)){h.push(a(t))}else{p.push(a(t))}});h.sort(function(e,t){return parseInt(t.timestamp,10)-parseInt(e.timestamp,10)});p.sort(function(e,t){return parseInt(t.timestamp,10)-parseInt(e.timestamp,10)});h=d(h);p=d(p);return{domesticFirst:l[0],interFirst:c[0],domesticFlightList:p,interFlightList:h}}function o(e){var t=e.fromCountry;var n=e.toCountry;var r=t;var i=n;if(~t.indexOf("-")){r=t.split("-")[0];i=t.split("-")[1]}e.fromCountry=r;e.toCountry=i;return u(r)!=="中国"||u(i)!=="中国"}function u(e){return decodeURIComponent(e)}function a(t){e.each(t,function(e,n){t[e]=u(n)});return t}e.qhistory={};var t=null;var n="#js_ifrmHistory";var r="//history.qunar.com/history/newhistory.html";e.qhistory.init=function(s){var o=e(s.frameid||n);o.attr("src",s.src||r);o.bind("load",function(){i(o[0]);var e={flight:t};var n=s.success||function(){};n(e)})}})(jQuery);(function(e){function n(e,t){this._cache=[];this._cFn=e}if(!e.kit)e.kit={};if(!e.module)e.module={};if(!e.ui)e.ui={};var t=function(){var t={},n;var r=function(){if(!n){n=e('<div class="poplayer_wp"></div>');n.insertBefore(e(":first",document.body))}};t.offset=function(){r();return n.offset()};t.size=function(){r();return[n.width(),e(window).height()]};t.getNode=function(){r();return n};t.getNodeOffset=function(e){var n=t.offset(),r=e.offset();return{left:r.left-n.left,top:r.top-n.top}};return function(){return t}}();e.module.layer=function(n){var r=t();var i=e(n).appendTo(r.getNode()).hide(),s=e("[node-type=inner]",i);var o={},u=e(o),a;o.show=function(){i.show();u.trigger("lay_show");return o};o.hide=function(){i.hide();u.trigger("lay_hide");return o};o.getOuter=function(){return i};o.getInner=function(){return s};o.getWrapSize=function(){return r.size()};o.getWrapOffset=function(e){return r.getNodeOffset(e)};o.getSize=function(e){if(e||!a){a=[i.width(),i.height()]}return a};o.getDom=function(t){return e("[node-type="+t+"]",i)};o.setPosition=function(e){i.css(e);return o};return o};n.prototype={constructor:n,_create:function(){var e=this._cFn();this._cache.push({store:e,used:true});return e},getOne:function(){var e=this._cache;for(var t=0,n=e.length;t<n;t+=1){if(e[t].used===false){e[t].used=true;return e[t].store}}return this._create()},_setStat:function(t,n){e.each(this._cache,function(e,r){if(t===r.store){r.used=n;return false}})},setUsed:function(e){this._setStat(e,true)},setUnused:function(e){this._setStat(e,false)},getLength:function(){return this._cache.length}};e.kit.Reuse=n;e.module.dialog=function(){return function(t,n){if(!t)throw"dialog no template";var r,i,s,o,u,a,f,l,c,h;var p=function(){s=e.extend({},n);r=e.module.layer(t);o=r.getOuter();u=r.getInner();a=r.getDom("close").click(function(){f()})};p();c=r.show;h=r.hide;f=function(e){if(typeof l==="function"&&!e){if(l()===false){return false}}h();return i};i=r;i.show=function(){c();return i};i.hide=f;i.setMiddle=function(){var t=i.getWrapSize(),n=r.getSize(true),s=e(window).scrollTop();var o={top:s+(t[1]-n[1])/2,left:(t[0]-n[0])/2};if(o.top<s)o.top=s;if(o.left<0)o.left=0;return i.setPosition(o)};i.setClose=function(e){a[e?"show":"hide"]()};i.setContent=function(e){if(typeof e==="string"){u.html(e)}else{u.append(e)}return i};i.clearContent=function(){u.empty();return i};i.setBeforeHideFn=function(e){l=e};i.clearBeforeHideFn=function(){l=null};return i}}();e.ui.dialog=function(){var t='<div class="poplayer_box" node-type="outer" style="">'+'     <span class="close" node-type="close"></span>'+'     <div class="poplayer_inner" node-type="inner"></div>'+"</div>";var n=null;var r=function(e){e.clearContent();if(n)n.setUnused(e)};var i=function(){var n=e.module.dialog(t);e(n).bind("lay_show",function(){e.ui.mask.show()}).bind("lay_hide",function(){e.ui.mask.hide()});return n};var s=[];var o=function(t){var n=[];e.each(s,function(e,r){if(r!==t)n.push(r)});s=n};var u=function(t,n){var r=function(){o(t);if(!n.isHold){e(t).unbind("lay_hide",r);e(t).unbind("lay_show",i)}};var i=function(){s.push(t)};e(t).bind("lay_hide",r).bind("lay_show",i)};var a=function(){e(document).keydown(function(t){if(s.length===0)return;var n=s[s.length-1];var r=t.keyCode,i=t.target,o=i.nodeName,u=/^input|textarea$/i;var a=e.contains(n.getOuter()[0],i);if(r===27){if(!n.isEsc)return;if(u.test(o)&&a&&i.type!=="button")return;n.hide()}else if(r===13||r===9){if(!a){t.preventDefault()}}})};return function(t){t=e.extend({isEsc:true,isHold:false,closeBtn:true,width:500},t||{});var s=t.isHold;if(!n){a();n=new e.kit.Reuse(i)}var o=n.getOne();o.getInner().css("width",t.width);o.setClose(t.closeBtn);if(!s){var f=function(){e(o).unbind("lay_hide",f);r(o)};e(o).bind("lay_hide",f)}o.isEsc=t.isEsc;u(o,t);return o}}();e.ui.mask=function(){function s(){if(i){t.css({width:e(document).width(),height:Math.max(e(document).height(),e(window).height()),zIndex:800})}else{t.css({position:"fixed",zIndex:800})}}function o(){clearTimeout(r);r=setTimeout(s,500)}function u(){if(i){e(window).bind("resize",o)}}function a(){e(window).unbind("resize",o)}function f(){t=e('<div class="poplayer_bg"></div>').appendTo(document.body);s();return t}var t,n=0,r,i=e.browser.msie&&e.browser.version==="6.0";var l={show:function(){n++;if(n>1)return;if(!t)f();u();t.show()},hide:function(){if(!t||n<=0)return;n--;if(n===0){a();t.hide()}}};return l}()})(jQuery);var FlightCityHistory=function(){function n(e,t){e=e==null?"":e+"";for(var n=0,r=t-e.length;n<r;n++)e="0"+e;return e}function i(n){var r=window.QunarHistory.data.flight;e.length=0;if(n.type=="domesticfrom"){t=r.domesticFlightList.slice(1,4)}else if(n.type=="interfrom"){t=r.interFlightList.slice(1,4)}for(var i=0;i<t.length;i++){var s={fcity:"",tcity:"",fcity_abbr:"",tcity_abbr:""};var o=t[i].fromCity,u=t[i].toCity;s.fcity=o;s.tcity=u;var a=o.indexOf("(")==-1?o:o.substring(0,o.indexOf("("));var f=u.indexOf("(")==-1?u:u.substring(0,u.indexOf("("));s.fcity_abbr=a.length>5?a.slice(0,4)+"..":a;s.tcity_abbr=f.length>5?f.slice(0,4)+"..":f;e.push(s)}}function s(){return e}function o(){var t;if(e.length!=0){t=1}return t}var e=[],t=[];var r=function(e){return e.getFullYear()+"-"+n(e.getMonth()+1,2)+"-"+n(e.getDate(),2)};return{init:i,cityHistory:s,hisLength:o}}();var FlightHotCity=function(e){function s(t){var r=n[t.type];var i=n.data;var s=[];var o=null;var u=null;if(t.type=="domesticfrom"||t.type=="interfrom"){FlightCityHistory.init(t);o=FlightCityHistory.cityHistory();u=FlightCityHistory.hisLength()}e.each(r,function(e,t){var n={key:t.key,tab:t.title,title:i[t.key].title};s.push(n)});var a=QTMPL.FlightHotCity.render({sort:s,type:t.type,cityType:t.cityType,cityHistory:o,hisLength:u,width:t.width});return e(a)}function o(t,r){var s=t.type+"-flight-hotcity-"+t.cityType;e(e.tabs).bind(s+"-change",function(e,t,r,i){var s=r.data("key");var o=i;c(n.data[s],o)});e(r).bind("hotcity-show",function(){if(t.type=="interto"){var s=r.ui.$el.closest("form").find("[name=fromCity]").val();if(i==s){return}else{i=s}var o=r.ui.$wrap.find("[data-panel='interto-flight-hotcity-to'][data-panel-id='dfh-国际·港澳台']");var u={q:s.replace(/\([^)]*\)/g,"")};e.ajax({url:"//flight.qunar.com/suggest/inter_arrcity_suggest.jsp?sort=F",dataType:"jsonp",data:u||{},timeout:200,success:function(e){if(e&&e.result&&e.result.length>0){e.result.forEach(function(e){if(/^香港|澳门|台湾$/.test(e.name)){e.name="中国"+e.name}});n.data["国际·港澳台-to"].cityList[0].list=e.result}c(n.data["国际·港澳台-to"],o,"国际·港澳台-to")},error:function(){}})}});l(t,r);u(t,r)}function u(t,n){n.$hotcity.delegate(".js_history","click",function(t){t.preventDefault();var r=e(this),i=n.ui.$el;var s=r.attr("data-fcity"),o=r.attr("data-tcity");i.val(s);i.closest("form").find("[name=toCity]").val(o);i.closest("form").find("[name=fromDate]").focus();trackAction("QH|HCT|route|"+s+"-"+o);n.hideHotcity()})}function l(t,n){n.$hotcity.delegate("a.js-hotcitylist","click",function(r){r.preventDefault();var i=e(this),s=n.ui.$el;var o=i.data("code");o=o?"("+o+")":"";var u=s.data("q-suggest");var l=i.text();if((new RegExp("中国("+a+")")).test(l)||(new RegExp("中国("+f+")")).test(l)){l=l.replace("中国","")}if(u){u.setValue((i.attr("title")||l)+o)}else{s.val(l+o)}if(u){u.setValue((i.attr("title")||l)+o)}else{s.val(l+o)}s.data("country",i.data("country"));s.data("valided",true);e(t).trigger("setvalue",[s]);e(t).trigger("hotcity-select",[l]);n.hideHotcity()})}function c(e,t,n){if(t.html()&&n!="国际·港澳台-to"){return}for(var r=0,i=e.cityList.length;r<i;r++){var s=e.cityList[r];for(var o=0,u=s.list.length;o<u;o++){var f=s.list[o];if(a.indexOf(f.name)>-1){f.name="中国"+f.name}}}var l=QTMPL.FlightHotCityList.render(e);t.html(l)}function h(){this.cityType=null;this.$dom=null;this.data={}}var t=".js_close_flight_hotcity";var n=FlightSearchBoxConf.hotCity;var r="";var i;var a=["香港","台湾","澳门","台北","高雄","台南","台中","台东","嘉义","花莲","格林岛","金门","马公","马祖","南竿","七美"].join("|");var f=["港澳台"].join("|");e.extend(h.prototype,{init:function(n){var i=this;e.RegisterPlugin("qcbox","hotcity","flight",{initialize:function(){i.cityType=n.cityType;i.data=n.data;i.type=n.type;i.defaultTab=n.defaultTab;i.width=n.width||r},initializeStruct:function(){var n=this.ui.$el,r=this.ui,u=this;i.$dom=s(i);this.$hotcity.append(i.$dom);i.$dom.find(t).click(function(){u.hideHotcity()});o(i,u);e.tabs.init(i.$dom)}})},switchCity:function(e){this.type=e.type;this.width=e.width||r}});return h}(jQuery);var FlightHotFuzzy=function(e){function r(t){var r=QTMPL.FlightHotFuzzy.render({cateList:n.cateList});return e(r)}function i(e,t){s(e,t)}function s(t,n){n.$hotfuzzy.delegate("a.js-fuzzylist","click",function(r){r.preventDefault();var i=e(this),s=n.ui.$el,o=n.ui.$qtab,u=n.ui.$topic,a=u.val();var f=i.data("type");var l=i.text();if(/中国(香港|台湾|澳门|台北|港澳台)/.test(l)){l=l.replace("中国","")}var c=i.data("code").length>0?i.data("code"):"";var h=l+(c?"("+c+")":"");if(a.indexOf(h)<0){u.val((a==""?a:a+",")+h);n.ui.$el.data("qcboxfuzzy").renderTopicHtml({topic:l,type:f,code:c})}s.data("valided",true);s.blur();e(t).trigger("setvalue",[s]);n.hideHotfuzzy()})}function o(t){e(".js-fuz-rec").delegate("a.js-fuz","click",function(n){n.preventDefault();if(t.ui.isFuzzyDis()){t.ui.setFuzzyErr();return}var r=e(this),i=t.ui.$el,s=t.ui.$qtab,o=t.ui.$topic,u=o.val();var a=r.data("type");var f=r.text();var l=r.data("code").length>0?r.data("code"):"";var c=f+(l?"("+l+")":"");if(u.indexOf(c)<0){o.val((u==""?u:u+",")+c);t.ui.$el.data("qcboxfuzzy").renderTopicHtml({topic:f,type:a,code:l})}i.data("valided",true);t.ui.checkTopic()})}function u(){this.$dom=null;this.data={}}var t=".js_close_flight_hotfuzzy";var n=FlightConf_fuzzy;e.extend(u.prototype,{init:function(n){var s=this;e.RegisterPlugin("qcboxfuzzy","hotfuzzy","flightfuzzy",{initialize:function(){s.data=n.data;s.type=n.type;o(this)},initializeStruct:function(){var e=this.ui.$el,n=this.ui,o=this;s.$dom=r(s);this.$hotfuzzy.append(s.$dom);s.$dom.find(t).click(function(){o.hideHotfuzzy()});i(s,o)}})}});return u}(jQuery);var FlightSuggest=function(e){function o(e){for(var t=0,n=e.length;t<n;t++){var r=e;r[t].ftype=r[t].type;if(r[t].type===4||r[t].type===9){var s=r[t].type;var o=t-1;var u=false;for(var a=t;a<n&&!u;a++){if(r[a].type===s){r[a].ftype=r[o].ftype}else{t=a-1;a=100;u=true}}}if(r[t].ftype===3){r[t].ftypename="city"}if(r[t].ftype===1){r[t].ftypename="city"}if(r[t].ftype===10){r[t].ftypename="city"}if(r[t].display.indexOf("机场")!==-1||r[t].display.indexOf("Airport")!==-1){r[t].ftypename="airport"}if(r[t].ftype===6){r[t].ftypename="attraction"}if(r[t].ftype===8){r[t].ftypename="country"}if(r[t].ftype===7){r[t].ftypename="state"}}i=e}function u(t,n,i,s,u,a){var l=function(t,n){if(!t)return;t=t.result;return e(t).not(n).length==0&&e(n).not(t).length==0};var c=[];if(t){c=f(t,u);if(t.result&&t.result.length>0){o(t.result);if(!l(r,t.result)){var h=[];h.push("getResultData",encodeURIComponent(s.val()),t.result.length,s.attr("name"));e(a).trigger("getResultData",[h]);searchTrack.triggerMult(a,"getResultData",[h])}r=e.extend({},t)}}if(c.length===0){if(r){r.userInput=t.userInput;c=c.concat(f(r,u))}else{c=[0];i._trigger("q-suggest-noresult",[s])}}return c}function f(e,t){var n=false;var r=e.result||[],i=[],s=e.userInput.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),o=new RegExp("("+s+")","i"),u=t?["1","6","7"]:["1","6","7","8"];for(var f=0,l=r.length;f<l;f+=1){var c=r[f],h=c.key,p=/^泰州/.test(c.display);if(c.type==7){n=true}if(c.type==8){n=false}if(c.type===9&&!n){continue}if(p){h="泰州"}else{h=c.key}i.push({txt:a(c,o),val:h,type:$jex.array.indexOf(u,c.type.toString())>-1?1:0,country:c.country,code:c.code})}return i}function l(e){var t=e.closest("table").data("data"),n=t[e.attr("data-ind")*1];return n}function c(t,n,r,s){var o=n.visible();var u=t.keyCode;if(u===40&&!o){n.show();return}if(!o)return;var a=n.el.find('tr[data-sug_type="0"]');var f=a.filter(".active");switch(u){case 38:case 40:n._excludeEl=n._mouseFocus;var c=a.index(f);c=t.keyCode===38?c-1:c+1;if(c>=a.length)c=0;if(c<0)c=a.length-1;f.removeClass("active");f=a.eq(c);var h="";if(f.length>0){h=l(f);!s?n.setValue(h.val+(h.code?"("+h.code+")":"")):"";f.addClass("active")}t.preventDefault();n._trigger("q-suggest-user-action",[t.type,h.val,u]);break;case 13:if(f.length>0){var h="";var p=null;h=l(f);n.setValue(h.val+(h.code?"("+h.code+")":""));var d=f.index();if(h.val==="所有地点"){d="00";p="allPlace"}else{p=i[d].ftypename}var v=p+"|"+encodeURIComponent(h.val)+"|"+d;e(r).trigger("suggest-selected",v);searchTrack.triggerMult(r,"suggest-selected",v);trackAction("QH|HCT|suggest|"+h.val)};case 27:n.hide();n._trigger("q-suggest-user-action",[t.type,n.getValue(),u]);break;case 18:case 9:break}}function h(){}var t="//www.qunar.com/suggest/livesearch2.jsp?lang=zh&q=*&sa=true&ver=1&callback=?";var n=false;var r=null;var i=null;var s;var a=function(e,t){var n=e.type,r=e.display;if(r.indexOf(s)!=-1){s=s.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");t=new RegExp("("+s+")","i")}r=r.replace(t,'<span class="keyString">$1</span>');if(n===4){r="·邻近机场："+r}else if(n===9){r="·相关城市："+r}if(e.length)r+="-"+e.length+"公里";if(n===1){r+="-该城市没有机场"}else if(n===2){r+="-该地区的机场有"}else if(n===6){r+="-该景点没有机场"}else if(n===7){r+="-该目的地为省份"}else if(n===8){r+="-该目的地为国家"}return r};e.extend(h.prototype,{init:function(n){var r=this;e.RegisterPlugin("qcbox","suggest",n.name,{initialize:function(){var o=this.ui.$el;o.qsuggest({ajax:{url:t,dataType:"jsonp",cache:false},delay:200,allPlace:n.allPlace,render:function(e){return e.txt},reader:function(e){return u(e,n.tiptext,this,o,this.args.allPlace,r)},loader:function(e){return e.replace(/\s/g,"")},container:n.container,exattr:function(e){return"data-sug_type="+e.type},keyevent:function(e){c(e,this,r)},getData:function(e){var t=e.closest("table").data("data"),n=t[e.attr("data-ind")*1];return n.val?n.val+(n.code?"("+n.code+")":""):undefined},getExtData:function(e){if(e.length<1){return{}}var t=e.closest("table").data("data"),n=t[e.attr("data-ind")*1];return n},draw:function(t,n){this.el.empty();var r=this.args.min,i=this.args.max,s=t?t.length:0;if(!t||!s||s<r){this.hide();return}var o={country:"中国",txt:"所有地点",val:"所有地点",type:0};if(this.args.allPlace&&t[s-1].val!=o.val){t.push(o)}var u=[],a=this.args.render,f=this.args.exattr,l=true;u.push('<table cellspacing="0" cellpadding="2"><tbody>');var s=t.length-1;e.each(t,function(t,n){var r="";if(n.type!==1&&l){l=false;r=' class="active'}if(n.exClass){r=r?r+" "+n.exClass+'" ':' class="'+n.exClass+'" '}else{r=r?r+'" ':""}e(searchTrack).trigger("haveData",s);u.push("<tr",r,' data-ind="',t,'" ',f(n),"><td>",a(n),"</td></tr>")});u.push("</tbody></table>");this._trigger("q-suggest-beforeshow",[this.el,n]);var c=e(u.join("")).appendTo(this.el).data("data",t);if(!this.args["container"])this.el.css(_calc_pos(this.activeEl));this.el.show();this._trigger("q-suggest-show",[t])},on:{"q-suggest-show":function(){o.bind("keydown.kd",function(e){e.keyCode==13&&e.preventDefault()})},"q-suggest-setextdata":function(e,t,n){n.data("country",t.country);n.data("valided",true)},"q-suggest-setvalue":function(t,n,i){e(r).trigger("setvalue",[i])},"q-suggest-noresult":function(t,n){n.data("country",null);n.data("valided",false);e(r).trigger("setvalue",[n]);e(r).trigger("suggest-noresult")},"q-suggest-hide":function(e){o.unbind("keydown.kd")},"q-suggest-beforeshow":function(t,n,i){if(!!i&&!!i.c){var o=['<div class="qcity_guess">你要找的是不是<span class="hl">',i.userInput,"</span></div>"];n.append(o.join(""))}if(i&&i.result.length==0){var o=['<div class="qcity_guess">找不到<span class="hl">',s,"</span></div>"];var u=true;var a=e(t.target).data("q-suggest");if(a&&a.args.allPlace&&"所有地点".indexOf(i.userInput)>-1){u=false}u?n.append(o.join("")):"";e(r).bind("suggest-nofind",function(e,t){searchTrack.triggerMult(r,"suggest-nofind",t)});e(r).trigger("suggest-nofind",s)}},"q-suggest-user-action":function(t,n,s,o){var u=null;if(n=="mousedown"){if(s==="所有地点"){o="00";u="allplace"}else{u=i[o].ftypename}var a=u+"|"+encodeURIComponent(s)+"|"+o;e(r).trigger("suggest-selected",a);searchTrack.triggerMult(r,"suggest-selected",a);trackAction("QH|HCT|suggest|"+s)}},"q-suggest-inputChange":function(e){s=o.val().replace(/\s+/g," ");s=s.replace(/^\s+/,"");s=s.replace(/\s+$/,"")}}})}});e.RegisterPlugin("qcboxfuzzy","suggest",n.name,{initialize:function(){var o=this.ui.$el;o.qsuggest({ajax:{url:t,dataType:"jsonp",cache:false},delay:200,allPlace:n.allPlace,render:function(e){return e.txt},reader:function(e){return u(e,n.tiptext,this,o,this.args.allPlace,r)},loader:function(e){return e.replace(/\s/g,"")},container:n.container,exattr:function(e){return"data-sug_type="+e.type},keyevent:function(e){c(e,this,r,true)},getData:function(e){var t=e.closest("table").data("data"),n=t[e.attr("data-ind")*1];return n.val?n.val+(n.code?"("+n.code+")":""):undefined},getExtData:function(e){if(e.length<1){return{}}var t=e.closest("table").data("data"),n=t[e.attr("data-ind")*1];return n},draw:function(t,n){if(this.activeEl.data("qcboxfuzzy").isFuzzyDis()){return}this.el.empty();var r=this.args.min,i=this.args.max,s=t?t.length:0;if(!t||!s||s<r){this.hide();return}var o={country:"中国",txt:"所有地点",val:"所有地点",type:0};if(this.args.allPlace&&t[s-1].val!=o.val){t.push(o)}var u=[],a=this.args.render,f=this.args.exattr,l=true;u.push('<table cellspacing="0" cellpadding="2"><tbody>');var s=t.length-1;e.each(t,function(t,n){if(t>=i)return false;var r="";if(n.type!==1&&l){l=false;r=' class="active'}if(n.exClass){r=r?r+" "+n.exClass+'" ':' class="'+n.exClass+'" '}else{r=r?r+'" ':""}e(searchTrack).trigger("haveData",s);u.push("<tr",r,' data-ind="',t,'" ',f(n),"><td>",a(n),"</td></tr>")});u.push("</tbody></table>");this._trigger("q-suggest-beforeshow",[this.el,n]);var c=e(u.join("")).appendTo(this.el).data("data",t);if(!this.args["container"])this.el.css(_calc_pos(this.activeEl));this.el.show();this._trigger("q-suggest-show",[t])},on:{"q-suggest-show":function(){o.bind("keydown.kd",function(e){e.keyCode==13&&e.preventDefault()})},"q-suggest-setextdata":function(e,t,n){n.data("country",t.country);n.data("valided",true)},"q-suggest-setvalue":function(t,n,i){e(r).trigger("setvalue",[i])},"q-suggest-noresult":function(t,n){n.data("country",null);n.data("valided",false);e(r).trigger("setvalue",[n]);e(r).trigger("suggest-noresult")},"q-suggest-hide":function(e){o.unbind("keydown.kd")},"q-suggest-beforeshow":function(t,n,i){if(!!i&&!!i.c){var o=['<div class="qcity_guess">你要找的是不是<span class="hl">',i.userInput,"</span></div>"];n.append(o.join(""))}if(i&&i.result.length==0){var o=['<div class="qcity_guess">找不到<span class="hl">',s,"</span></div>"];var u=true;var a=e(t.target).data("q-suggest");if(a&&a.args.allPlace&&"所有地点".indexOf(i.userInput)>-1){u=false}u?n.append(o.join("")):"";e(r).bind("suggest-nofind",function(e,t){searchTrack.triggerMult(r,"suggest-nofind",t)});e(r).trigger("suggest-nofind",s)}},"q-suggest-user-action":function(t,n,s,o){var u=null;if(n=="mousedown"){if(s==="所有地点"){o="00";u="allplace"}else{u=i[o].ftypename}var a=u+"|"+encodeURIComponent(s)+"|"+o;e(r).trigger("suggest-selected",a);searchTrack.triggerMult(r,"suggest-selected",a);trackAction("QH|HCT|suggest|"+s)}},"q-suggest-inputChange":function(e){s=o.val().replace(/\s+/g," ");s=s.replace(/^\s+/,"");s=s.replace(/\s+$/,"")}},fuzzyFun:function(){var e=o.siblings("#topic");if(e.size()&&e.val().split(",").length==5){return}}})}})},isvalid:function(){return n}});return h}(jQuery);if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["FlightHotCity"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="ui-city-sug"');if(r.s(r.f("width",e,t,1),e,t,0,34,60,"{{ }}")){r.rs(e,t,function(e,t,n){n.b(' style="width:');n.b(n.v(n.f("width",e,t,0)));n.b('px"')});e.pop()}r.b(' data-hotcity-nogo="true">');r.b("\n"+n);r.b('    <i class="iconfont f-close js_close_flight_hotcity" id="closeXI20"></i>');r.b("\n"+n);r.b("    ");if(r.s(r.f("hisLength",e,t,1),e,t,0,191,403,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('<div class="m-hst">搜索历史：');if(n.s(n.f("cityHistory",e,t,1),e,t,0,231,381,"{{ }}")){n.rs(e,t,function(e,t,n){n.b('<span title="');n.b(n.v(n.f("fcity",e,t,0)));n.b(" - ");n.b(n.v(n.f("tcity",e,t,0)));n.b('" data-fcity="');n.b(n.v(n.f("fcity",e,t,0)));n.b('"  data-tcity="');n.b(n.v(n.f("tcity",e,t,0)));n.b('" class="js_history">');n.b(n.v(n.f("fcity_abbr",e,t,0)));n.b("&nbsp;-&nbsp;");n.b(n.v(n.f("tcity_abbr",e,t,0)));n.b("</span>")});e.pop()}n.b("</div>")});e.pop()}r.b("\n"+n);r.b('    <div class="m-hct-nav">');r.b("\n"+n);if(r.s(r.f("sort",e,t,1),e,t,0,463,630,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('        <span data-key="');n.b(n.v(n.f("key",e,t,0)));n.b('" data-tab="');n.b(n.v(n.f("type",e,t,0)));n.b("-flight-hotcity-");n.b(n.v(n.f("cityType",e,t,0)));n.b('" data-tab-id="dfh-');n.b(n.v(n.f("tab",e,t,0)));n.b('">');n.b(n.v(n.f("tab",e,t,0)));n.b('<i class="i1"></i><i class="i2"></i></span>');n.b("\n")});e.pop()}r.b("    </div>");r.b("\n"+n);if(r.s(r.f("sort",e,t,1),e,t,0,664,781,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('    <div data-panel="');n.b(n.v(n.f("type",e,t,0)));n.b("-flight-hotcity-");n.b(n.v(n.f("cityType",e,t,0)));n.b('" data-panel-id="dfh-');n.b(n.v(n.f("tab",e,t,0)));n.b('" class="m-hct-lst"></div>');n.b("\n")});e.pop()}r.b("</div>");return r.fl();});if(typeof module!=="undefined")module.exports=window.QTMPL["FlightHotCity"];if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["FlightHotCityList"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");if(r.s(r.f("charSort",e,t,1),e,t,0,13,521,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("cityList",e,t,1),e,t,0,27,507,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("char",e,t,1),e,t,0,37,497,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('<dl class="e-hct-lst ');if(r.s(r.f("clshct",e,t,1),e,t,0,71,82,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("e-hct-lst-h")});e.pop()}r.b('">');r.b("\n"+n);r.b("	<dt>");r.b(r.v(r.f("char",e,t,0)));r.b("</dt>");r.b("\n"+n);r.b("	<dd>");r.b("\n"+n);r.b("		<ul>");r.b("\n"+n);if(r.s(r.f("list",e,t,1),e,t,0,142,463,"{{ }}")){r.rs(e,t,function(e,t,n){if(!n.s(n.f("titles",e,t,1),e,t,1,0,0,"")){n.b('		    	<li><a class="js-hotcitylist" data-country="');n.b(n.v(n.f("country",e,t,0)));n.b('" data-code="');n.b(n.v(n.f("code",e,t,0)));n.b('" href="#">');n.b(n.v(n.f("name",e,t,0)));n.b("</a></li>");n.b("\n")}if(n.s(n.f("titles",e,t,1),e,t,0,308,446,"{{ }}")){n.rs(e,t,function(e,t,n){n.b('		    	<li><a title="');n.b(n.v(n.f("titles",e,t,0)));n.b('" class="js-hotcitylist" data-country="');n.b(n.v(n.f("country",e,t,0)));n.b('" data-code="');n.b(n.v(n.f("code",e,t,0)));n.b('" href="#">');n.b(n.v(n.f("name",e,t,0)));n.b("</a></li>");n.b("\n")});e.pop()}});e.pop()}r.b("		</ul>");r.b("\n"+n);r.b("	</dd>");r.b("\n"+n);r.b("</dl>");r.b("\n")});e.pop()}});e.pop()}});e.pop()}r.b("\n"+n);if(r.s(r.f("fuzzy_c",e,t,1),e,t,0,548,908,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("countryList",e,t,1),e,t,0,565,891,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("char",e,t,1),e,t,0,575,881,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('<dl class="e-hct-lst ');if(r.s(r.f("clshct",e,t,1),e,t,0,609,620,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("e-hct-lst-h")});e.pop()}r.b('">');r.b("\n"+n);r.b('	<span class="e-fuzzy-line"></span>');r.b("\n"+n);r.b("	<dt>");r.b(r.v(r.f("char",e,t,0)));r.b("</dt>");r.b("\n"+n);r.b("	<dd>");r.b("\n"+n);r.b("		<ul>");r.b("\n"+n);if(r.s(r.f("listCountry",e,t,1),e,t,0,723,840,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('		    <li><a class="js-hotcitylist" data-country="');n.b(n.v(n.f("country",e,t,0)));n.b('" data-code="');n.b(n.v(n.f("code",e,t,0)));n.b('" href="#">');n.b(n.v(n.f("name",e,t,0)));n.b("</a></li>");n.b("\n")});e.pop()}r.b("		</ul>");r.b("\n"+n);r.b("	</dd>");r.b("\n"+n);r.b("</dl>");r.b("\n")});e.pop()}});e.pop()}});e.pop()}r.b("\n"+n);r.b("\n"+n);if(r.s(r.f("fuzzy",e,t,1),e,t,0,933,1281,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("hotword",e,t,1),e,t,0,946,1268,"{{ }}")){r.rs(e,t,function(e,t,r){if(r.s(r.f("char",e,t,1),e,t,0,956,1258,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('<dl class="e-hct-lst ');if(r.s(r.f("clshct",e,t,1),e,t,0,990,1001,"{{ }}")){r.rs(e,t,function(e,t,n){n.b("e-hct-lst-h")});e.pop()}r.b('">');r.b("\n"+n);r.b('	<span class="e-fuzzy-line"></span>');r.b("\n"+n);r.b("	<dt>");r.b(r.v(r.f("char",e,t,0)));r.b("</dt>");r.b("\n"+n);r.b("	<dd>");r.b("\n"+n);r.b("		<ul>");r.b("\n"+n);if(r.s(r.f("listfuzzy",e,t,1),e,t,0,1102,1219,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('		    <li><a class="js-hotcitylist" data-country="');n.b(n.v(n.f("country",e,t,0)));n.b('" data-code="');n.b(n.v(n.f("code",e,t,0)));n.b('" href="#">');n.b(n.v(n.f("name",e,t,0)));n.b("</a></li>");n.b("\n")});e.pop()}r.b("		</ul>");r.b("\n"+n);r.b("	</dd>");r.b("\n"+n);r.b("</dl>");r.b("\n")});e.pop()}});e.pop()}});e.pop()}r.b("\n"+n);if(!r.s(r.f("charSort",e,t,1),e,t,1,0,0,"")){r.b("<ul>");r.b("\n"+n);if(r.s(r.f("cityList",e,t,1),e,t,0,1326,1434,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('	<li><a class="js-hotcitylist" data-country="');n.b(n.v(n.f("country",e,t,0)));n.b('" data-code="');n.b(n.v(n.f("code",e,t,0)));n.b('" href="#">');n.b(n.v(n.f("name",e,t,0)));n.b("</a></li>");n.b("\n")});e.pop()}r.b("</ul>");r.b("\n")}r.b("\n"+n);r.b("\n"+n);if(r.s(r.f("fuzzyArea",e,t,1),e,t,0,1484,1636,"{{ }}")){r.rs(e,t,function(e,t,r){r.b("<ul>");r.b("\n"+n);if(r.s(r.f("countryList",e,t,1),e,t,0,1506,1613,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('	<li><a class="js-hotcitylist" data-country="');n.b(n.v(n.f("country",e,t,0)));n.b('" data-code="');n.b(n.v(n.f("code",e,t,0)));n.b('" href="#">');n.b(n.v(n.f("name",e,t,0)));n.b("</a></li>");n.b("\n")});e.pop()}r.b("</ul>");r.b("\n")});e.pop()}return r.fl();});if(typeof module!=="undefined")module.exports=window.QTMPL["FlightHotCityList"];if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["FlightHotFuzzy"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="ui-city-sug" data-hotfuzzy-nogo="true">');r.b("\n"+n);r.b('    <i class="iconfont f-close js_close_flight_hotfuzzy"></i>');r.b("\n"+n);r.b('    <div class="m-hct-lst">');r.b("\n"+n);if(r.s(r.f("cateList",e,t,1),e,t,0,163,462,"{{ }}")){r.rs(e,t,function(e,t,r){r.b('        <dl class="e-hct-lst">');r.b("\n"+n);r.b("        	<dt>");r.b(r.v(r.f("char",e,t,0)));r.b("</dt>");r.b("\n"+n);r.b("        	<dd>");r.b("\n"+n);r.b("        		<ul>");r.b("\n"+n);if(r.s(r.f("list",e,t,1),e,t,0,273,399,"{{ }}")){r.rs(e,t,function(e,t,n){n.b('        		    	<li><a class="js-fuzzylist" data-type="');n.b(n.v(n.f("type",e,t,0)));n.b('" data-code="');n.b(n.v(n.f("code",e,t,0)));n.b('" href="#">');n.b(n.v(n.f("name",e,t,0)));n.b("</a></li>");n.b("\n")});e.pop()}r.b("        		</ul>");r.b("\n"+n);r.b("        	</dd>");r.b("\n"+n);r.b("        </dl>");r.b("\n")});e.pop()}r.b("    </div>");r.b("\n"+n);r.b("</div>");return r.fl();});if(typeof module!=="undefined")module.exports=window.QTMPL["FlightHotFuzzy"];if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["MultiFlightSearchBox"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="muti_control">');r.b("\n"+n);r.b('    <div class="crl_sp_city">');r.b("\n"+n);r.b('        <div class="crl_lab">第<span class="hl">');r.b(r.v(r.f("trip",e,t,0)));r.b("</span>程</div>");r.b("\n"+n);r.b('        <div class="controls">');r.b("\n"+n);r.b('            <div style="z-index: 40;" class="qcbox qcity">');r.b("\n"+n);r.b('                <div class="qunar-qcbox">');r.b("\n"+n);r.b('                    <div class="qcbox-prefix">从</div>');r.b("\n"+n);r.b('                    <div class="qcbox-info"><b></b></div>');r.b("\n"+n);r.b("                </div>");r.b("\n"+n);r.b('                <input type="text" value="" name="fromCityMulti" class="textbox" data-qcbox-placeholder="出发地" data-qcbox-prefix="从" data-qcbox-suggest="flight-fromcity" data-qcbox-hotcity="flight" spellcheck="false" autocomplete="off" x-webkit-speech="x-webkit-speech" />');r.b("\n"+n);r.b('                <div class="qcbox-fixed js-suggestcontainer"></div>');r.b("\n"+n);r.b("            </div>");r.b("\n"+n);r.b("        </div>");r.b("\n"+n);r.b('        <div class="controls">');r.b("\n"+n);r.b('            <div style="z-index: 30;" class="qcbox qcity">');r.b("\n"+n);r.b('                <div class="qunar-qcbox">');r.b("\n"+n);r.b('                    <div class="qcbox-prefix">到</div>');r.b("\n"+n);r.b('                    <div class="qcbox-info"><b></b></div>');r.b("\n"+n);r.b("                </div>");r.b("\n"+n);r.b('                <input type="text" value="" name="toCityMulti" class="textbox" data-qcbox-placeholder="目的地" data-qcbox-prefix="到" data-qcbox-suggest="flight-tocity" data-qcbox-hotcity="flight" spellcheck="false" autocomplete="off" x-webkit-speech="x-webkit-speech" />');r.b("\n"+n);r.b('                <div class="qcbox-fixed js-suggestcontainer"></div>');r.b("\n"+n);r.b("            </div>");r.b("\n"+n);r.b("        </div>");r.b("\n"+n);r.b("    </div>");r.b("\n"+n);r.b('    <div class="crl_sp_date">');r.b("\n"+n);r.b('        <div class="qcbox qdate fromD">');r.b("\n"+n);r.b('            <div class="qunar-qcbox">');r.b("\n"+n);r.b('                <div class="qcbox-prefix">往</div>');r.b("\n"+n);r.b('                <div class="qcbox-info"><b></b></div>');r.b("\n"+n);r.b("            </div>");r.b("\n"+n);r.b('            <input type="text" value="" name="fromDateMulti" class="textbox" spellcheck="false" autocomplete="off" maxlength="10" data-prefix="往" />');r.b("\n"+n);r.b("        </div>");r.b("\n"+n);r.b("    </div>");r.b("\n"+n);r.b('    <div class="crl_sp_del"><i class="iconfont f-close" id="delete');r.b(r.v(r.f("trip",e,t,0)));r.b('"></i></div>');r.b("\n"+n);r.b("</div>");r.b("\n");return r.fl();});if(typeof module!=="undefined")module.exports=window.QTMPL["MultiFlightSearchBox"];var BaseFlightSearchBox=function(e){function A(e){return e.prevAll(".dp-prefix")}function O(e){e.fdatepicker("setting","linkTo",null)}function M(e,t){e.fdatepicker("setting","linkTo",t);t.data("q-datepicker-fly").ui.setFuzzyDate(e.val());var n=e.data("q-datepicker-fly").ui;n.checkLinked({pos:n.picker.args.pos,restPos:0})}function _(e){return e!==""}function D(e){var e=new Date(e);var t=window.SERVER_TIME||new Date;var n=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(e.getTime()<n.getTime()){e=new Date(t.getTime()+2*24*60*60*1e3)}var r=e.getFullYear();var i=e.getMonth()+1;var s=e.getDate();i=i<10?"0"+i:i;s=s<10?"0"+s:s;return[r,i,s].join("-")}function P(e){var t=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);return t?new Date(t[1],t[2]*1-1,t[3]):null}function H(t,n){e.each(n,function(e,n){if(e==="value"){var r=t.data("q-suggest");if(r){r.setValue(n)}t.val(n)}else{switch(e){case"country":t.data("country",n);break;case"valided":t.data("valided",n);break}}})}function B(t){return e.extend({},t.data(),{value:e.trim(t.val())})}function j(){}var t="input[name=fromCity]";var n="input[name=toCity]";var r="input[name=fromDate]";var i="input[name=toDate]";var s=".js-exchagne-city";var o="input[name=from]";var u="#adt_num";var a="#chd_num";var f="input[name=fromFuzzy]";var l="input[name=topic]";var c="input[name=pfromCity]";var h="input[name=ptoCity]";var p="input[name=pfromDate]";var d=".js-exchagne-pcity";var v="#js_searchtype_domestic";var m="#js_searchtype_international";var g="input[name=search]";var y="input[name=drange]";var b=".js-searchtype-oneway";var w=".js-searchtype-roundtrip";var E=".js-searchtype-multitrip";var S=".js-searchtype-fuzzytrip";var x=".js-searchtype-pricetrend";var T=".js_arrivalDateDiv_disable";var N=".js_arrivalDateDiv";var C=".js-suggestcontainer";var k=362;var L=FlightSearchBoxConf.specPlace;e.extend(j.prototype,{init:function(C){var k=this;if(k._inited){return}var L=e(C.form);var O=C.hotcity;var M=C.photcity;var _=C.delay||null;k.isFuzzy=C.isFuzzy;k.placeHolder=C.placeHolder;k.pplaceHolder=C.pplaceHolder;k.supportPrice=typeof C.supportPrice==="undefined"?false:C.supportPrice;k.form=C.form;k.$form=L;k.$toDate=L.find(i);k.$fromDate=L.find(r);k.$fromCity=L.find(t);k.$toCity=L.find(n);k.$adtNum=L.find(u);k.$chdNum=L.find(a);k.$onewayRadio=e(b,L);k.$roundtripRadio=e(w,L);k.$multitripRadio=e(E,L);k.$fuzzytripRadio=e(S,L);k.$pricetrendRadio=e(x,L);k.$fuzzyFrom=L.find(f);k.$fuzzyTo=L.find(l);k.$pfromCity=L.find(c);k.$ptoCity=L.find(h);k.$pfromDate=L.find(p);k.$pexchange=e(d,L);k.$arrDateWp_dis=e(T,L);k.$arrDateWp=e(N,L);k.$tjDomesticRadio=e(v,L);k.$tjInternationalRadio=e(m,L);k.$tjSearchRadio=e(g,L);k.$tjDateRange=e(y,L);k.$exchange=e(s,L);k.$from=e(o,L);k.cityCount={domesticfrom:0,domesticto:0,interfrom:0,interto:0,prtrendfrom:0,prtrendto:0};k.dateCount={domesticfromDate:0,domestictoDate:0,interfromDate:0,intertoDate:0,pfromDate:0};k.sType=C.form.indexOf("ifs")>-1?"inter":"domestic";k.hasHidetip=false;k._initCityInput(O);k._initDatePicker(_);if(M){k._initpCityInput(M);k._initpDatePicker(_)}k._initNumSelector();k._bindEvents();k.$toDatePrefix=A(k.$toDate);k.$fromDatePrefix=A(k.$fromDate);k._inited=true;e(k).trigger("initialized");k.$onewayRadio.trigger("click");k.imfs=C.imfs;return k},_searchType:function(){var e=this.$onewayRadio[0];if(e){return this.$onewayRadio[0].checked?"oneway":"roundtrip"}},_tjSearchType:function(){var e=this.$tjDomesticRadio[0];if(e){return this.$tjDomesticRadio[0].checked?"domestic":"international"}},_initCityInput:function(t){var n=this;var r=n.$fromCity.nextAll(C);var i=n.$toCity.nextAll(C);var s=n.$fromCity,o=n.$toCity;var u=new FlightHotCity;var a=new FlightHotCity;var f=new FlightSuggest;var l=new FlightSuggest;this.fromCitySuggest=f;this.toCitySuggest=l;n.fromHotCity=u;n.toHotCity=a;s.data("qcbox-placeholder",n.placeHolder);o.data("qcbox-placeholder",n.placeHolder);e.each([u,a,f,l],function(t,r){e(r).bind("setvalue",function(t,r){n._clearError(r);e(n).trigger("boxchange");e(n).trigger("citychange");if(t.target&&t.target.type&&typeof n.cityCount[t.target.type]=="number"){n.cityCount[t.target.type]++}})});e(u).bind("hotcity-show",function(){try{n.$fromCity.data("q-suggest").hide()}catch(t){}if(!this.$dom[0]){e(n).trigger("no_exhitbit",this.cityType)}trackAction("QH|HCT|open")});e(a).bind("hotcity-show",function(){try{n.$toCity.data("q-suggest").hide()}catch(t){}if(!this.$dom[0]){e(n).trigger("no_exhitbit",this.cityType)}trackAction("QH|HCT|open")});u.init({type:t.fromtype,cityType:"from",defaultTab:t.fromDefaultTab});f.init({name:"flight-fromcity",container:r,tiptext:s.data("qcbox-placeholder"),allPlace:this.isFuzzy});s.qcbox();a.init({type:t.totype,cityType:"to",defaultTab:t.toDefaultTab});l.init({name:"flight-tocity",container:i,tiptext:o.data("qcbox-placeholder"),allPlace:this.isFuzzy});o.qcbox()},_initpCityInput:function(t){var n=this;var r=n.$pfromCity.nextAll(C);var i=n.$ptoCity.nextAll(C);var s=n.$pfromCity,o=n.$ptoCity;var u=new FlightHotCity;var a=new FlightHotCity;var f=new FlightSuggest;var l=new FlightSuggest;this.pfromCitySuggest=f;this.ptoCitySuggest=l;n.pfromHotCity=u;n.ptoHotCity=a;s.data("qcbox-placeholder",n.pplaceHolder);o.data("qcbox-placeholder",n.pplaceHolder);e.each([u,a,f,l],function(t,r){e(r).bind("setvalue",function(t,r){n._clearError(r);e(n).trigger("boxchange");e(n).trigger("citychange");if(t.target&&t.target.cityType&&typeof n.cityCount["prtrend"+t.target.cityType]=="number"){n.cityCount["prtrend"+t.target.cityType]++}})});e(u).bind("hotcity-show",function(){try{n.$pfromCity.data("q-suggest").hide()}catch(t){}if(!this.$dom[0]){e(n).trigger("no_exhitbit",this.cityType)}trackAction("QH|HCT|open")});e(a).bind("hotcity-show",function(){try{n.$ptoCity.data("q-suggest").hide()}catch(t){}if(!this.$dom[0]){e(n).trigger("no_exhitbit",this.cityType)}trackAction("QH|HCT|open")});u.init({type:t.fromtype,cityType:"from",defaultTab:t.fromDefaultTab,width:t.hotcityWidth});f.init({name:"flight-fromcity",container:r,tiptext:s.data("qcbox-placeholder"),allPlace:false});s.qcbox();a.init({type:t.totype,cityType:"to",defaultTab:t.toDefaultTab,width:t.hotcityWidth});l.init({name:"flight-tocity",container:i,tiptext:o.data("qcbox-placeholder"),allPlace:false});o.qcbox()},_initDatePicker:function(t){var n=this;var r=typeof SERVER_TIME!=="undefined"?SERVER_TIME:new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=new Date(r.getFullYear(),r.getMonth(),r.getDate()+k);var o=t?t.fromDateDelay:2;toDateDelay=t?t.toDateDelay:5;var u=new Date(r.getFullYear(),r.getMonth(),r.getDate()+o),a=new Date(r.getFullYear(),r.getMonth(),r.getDate()+toDateDelay);var f=n.$fromDate,l=n.$toDate;var c=l.fdatepicker({ui:"qunar",refObj:f,defaultDay:a.valueOf(),maxDate:s,schForm:n,on:{"q-datepicker-select":function(t){e(n).trigger("boxchange");if(t.target&&t.target.name&&typeof n.dateCount[n.sType+t.target.name]=="number"){n.dateCount[n.sType+t.target.name]++}},"q-datepicker-show":function(){trackAction("QH|DP|open")}}});var h=f.fdatepicker({ui:"qunar",linkRules:n._type&&n._type=="国际"?"+7D,+0D":"+3D,+0D",minDate:i,maxDate:s,linkTo:c,defaultDay:u.valueOf(),schForm:n,on:{"q-datepicker-select":function(){e(n).trigger("boxchange")},"q-datepicker-show":function(){trackAction("QH|DP|open")}}});f.bind("q-datepicker-select",function(e){if(c.is(":visible")){c.focus();c.data("q-datepicker-fly").show()}if(e.target&&e.target.name&&typeof n.dateCount[n.sType+e.target.name]=="number"){n.dateCount[n.sType+e.target.name]++}});if(n.supportPrice){var p={$fromCity:n.$fromCity,$toCity:n.$toCity,$fromDate:n.$fromDate};f.data("q-datepicker-fly").supportPrice(true,p);l.length>0?l.data("q-datepicker-fly").supportPrice(true,p):""}if(this.isFuzzy){f.data("q-datepicker-fly").setFuzzy(true);l.length>0?l.data("q-datepicker-fly").setFuzzy(true):""}},_initpDatePicker:function(t){var n=this;var r=typeof SERVER_TIME!=="undefined"?SERVER_TIME:new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=new Date(r.getFullYear(),r.getMonth(),r.getDate()+k);var o=t?t.fromDateDelay:2;toDateDelay=t?t.toDateDelay:5;var u=new Date(r.getFullYear(),r.getMonth(),r.getDate()+o),a=new Date(r.getFullYear(),r.getMonth(),r.getDate()+toDateDelay);var f=n.$pfromDate;var l=f.fdatepicker({ui:"qunar",linkRules:"+3D,+0D",minDate:i,maxDate:s,defaultDay:u.valueOf(),on:{"q-datepicker-select":function(t){e(n).trigger("boxchange");if(typeof n.dateCount[t.target.name]=="number"){n.dateCount[t.target.name]++}},"q-datepicker-show":function(){trackAction("QH|DP|open")}}});if(n.supportPrice){var c={$fromCity:n.$pfromCity,$toCity:n.$ptoCity,$fromDate:n.$pfromDate};f.data("q-datepicker-fly").supportPrice(true,c)}if(this.isFuzzy){f.data("q-datepicker-fly").setFuzzy(true)}},_initNumSelector:function(t){var n=this;var r=n.$adtNum;var i=n.$chdNum;var s=n.$adtNum.find("input");var o=n.$chdNum.find("input");var u=n.$adtNum.nextAll(".sel_suggest");var a=n.$chdNum.nextAll(".sel_suggest");var f=e(".js_passnum_tip");var l=e(".js_child_tip");var c=e(".js_hide_passnum_tip");r.isShow=false;i.isShow=false;if(window.sessionStorage&&!window.sessionStorage["hidePassnumTip"]){f.show();n.hasHidetip=true}n.renderNumList(u.find("ul"),[1,9]);n.renderNumList(a.find("ul"),[0,8]);r.on("click",function(){n.toggleSuggest(r.isShow,r)});i.on({click:function(){n.toggleSuggest(i.isShow,i);if(i.isShow){l.show()}else{l.hide()}},mouseenter:function(){l.show()},mouseleave:function(){if(!i.isShow){l.hide()}}});u.on("click","li",function(t){e(n).trigger("adtNumChange",t.target.value);s.val(t.target.value);n.toggleSuggest(true,r);GodEye.log({r:"srch_chg_passnum",type:"adt"})});a.on("click","li",function(t){e(n).trigger("chdNumChange",t.target.value);o.val(t.target.value);n.toggleSuggest(true,i);l.hide();GodEye.log({r:"srch_chg_passnum",type:"chd"})});c.on("click",function(){n.hidePassTip();n.changePsngr=true});e("body").on("click",function(t){if(e(t.target).closest("#adtnum_box").length<1){n.toggleSuggest(true,r)}if(e(t.target).closest("#chdnum_box").length<1){n.toggleSuggest(true,i);l.hide()}});e(n).on({chdNumChange:function(e,t){n.renderNumList(u.find("ul"),[1,9-t])},adtNumChange:function(e,t){n.renderNumList(a.find("ul"),[0,9-t])}})},toggleSuggest:function(e,t){var n=this;var r=t.nextAll(".sel_suggest");var i=t.find(".yselector_arraw");if(e){r.hide();i.removeClass("open");t.isShow=false}else{r.show();i.addClass("open");t.isShow=true;n.hidePassTip();n.changePsngr=true}},hidePassTip:function(){var t=e(".js_passnum_tip");t.hide();if(window.sessionStorage){window.sessionStorage.setItem("hidePassnumTip",true)}},renderNumList:function(e,t){var n=[];for(var r=t[0];r<=t[1];r++){n.push("<li value="+r+">"+r+"</li>")}e.html(n.join(""))},parseDate:function(e){return P(e)},_bindEvents:function(){var e=this;e._submitCheck();e._bindExChangeCityEvent();e._bindSearchTypeChangeEvent()},_bindExChangeCityEvent:function(){var e=this;e.$exchange.click(function(t){var n=e.getToCity();e.setToCity(e.getFromCity());e.setFromCity(n);trackAction("QH|FC|change");t.preventDefault()});e.$pexchange.click(function(t){var n=e.getpToCity();e.setpToCity(e.getpFromCity());e.setpFromCity(n);trackAction("QH|FC|change");t.preventDefault()})},_bindSearchTypeChangeEvent:function(){var t=this;var n=t.$form,r=t.$fromDate,i=t.$toDate;t.$onewayRadio.click(function(){O(r);r.attr("data-type","oneWay");t.$arrDateWp_dis.show();t.$arrDateWp.hide();r.parent(".qdate").removeClass("qdate_s");i.parent(".qdate").removeClass("qdate_s")});t.$roundtripRadio.click(function(){M(r,i);r.attr("data-type","");t.$arrDateWp_dis.hide();t.$arrDateWp.hide().show();r.parent(".qdate").addClass("qdate_s");i.parent(".qdate").addClass("qdate_s")});t.$arrDateWp_dis.click(function(){t.$roundtripRadio.trigger("click")});e(t).trigger("searchtypechagne")},_showError:function(e,t){var n=this;var r;switch(e){case"from":r=n.$fromCity;break;case"to":r=n.$toCity;break;case"pfrom":r=n.$pfromCity;break;case"pto":r=n.$ptoCity;break}if(!r.data("org-placeholder")){r.data("org-placeholder",r.data("qcbox-placeholder"))}r.data("qcbox-placeholder",t);r.val("");r.parent().parent().addClass("qcbox_err")},_clearError:function(e){e.data("qcbox-placeholder",e.data("org-placeholder"));e.parent().parent().removeClass("qcbox_err")},_checkCity:function(e,t){var n=this;var r=t.value;if(_(r)&&!t.valided){return false}return true},_checkpCity:function(t,n){var r=this;var i=n.value;if(e.trim(i)===""||!n.valided){return false}return true},_submitCheck:function(){var t=this;t.$form.submit(function(n){var r=t.getFromCity(),i=t.getToCity();var s=true;var o=r.value;var u=i.value;var a=t.$tjDateRange.val();var f=false;t.hidePassTip();if(t.$fuzzytripRadio.length&&t.$fuzzytripRadio[0].checked){f=true;GodEye.log({r:"srchbox_fuzzy"})}if(t.$multitripRadio.length&&t.$multitripRadio[0].checked){s=t.imfs.submitCheck();if(s){var l=t.imfs.getMultiValue();t.$toCity.val(l.toCity);t.$fromDate.val(l.fromDate);t.$fromCity.val(l.fromCity)}return s}if(t.$pricetrendRadio.length&&t.$pricetrendRadio[0].checked){var c=t.getpFromCity(),h=t.getpToCity();pfromCityVal=c.value,pfromCountryVal=c.country,ptoCityVal=h.value,ptoCountryVal=h.country,pfromDateVal=t.pfromDate();if(!pfromCityVal){t._showError("pfrom","出发地不能为空");s=false}if(!ptoCityVal){t._showError("pto","目的地不能为空");s=false}if(s&&!t._checkpCity("pfrom",c)){t._showError("pfrom","城市错误");s=false}if(s&&!t._checkpCity("pto",h)){t._showError("pto","城市错误");s=false}if(s&&pfromCityVal===ptoCityVal){t._showError("pto","不能和出发地相同");s=false}if(s&&pfromCountryVal==="中国"&&ptoCountryVal==="中国"){t._showError("pto","暂不支持国内航线");s=false}if(s){var l={from:"qunarindex",searchType:"PriceTrend",pfromCity:pfromCityVal,ptoCity:ptoCityVal,pfromDate:pfromDateVal};var p=l.pfromCity.match(/^(.*)\((\w+)\)$/),d=l.ptoCity.match(/^(.*)\((\w+)\)$/);var v={fromCity:p?p[1]:l.pfromCity,toCity:d?d[1]:l.ptoCity,fromDate:l.pfromDate,fromCode:p?p[2]:"",toCode:d?d[2]:"",from:l.from,isInter:true};GodEye.log({r:"srchbox_prctrend",godate:v.fromDate,gocity_chg_cnt:t.cityCount.prtrendfrom,arrcity_chg_cnt:t.cityCount.prtrendto,godate_chg_cnt:t.dateCount.pfromDate});location.href="http://flight.qunar.com/site/pricetrend.htm?"+e.param(v)}return false}if(!t._checkCity("from",r)){r.qcbox.$el.trigger("mouseup");s=false}else if(!t._checkCity("to",i)){i.qcbox.$el.trigger("mouseup");s=false}if(o===u&&_(o)&&e.inArray(o,L)==-1){t._showError("to","不能和出发地相同");s=false}if(encodeURIComponent(o)==="%E6%9E%97%E6%B5%A9"&&encodeURIComponent(u)==="%E6%B0%B8%E8%83%9C"){t._showError("from",decodeURIComponent("%E5%AF%B9%E4%B8%8D%E8%B5%B7"));t._showError("to",decodeURIComponent("%E4%BB%96%E4%BB%AC%E6%98%AF%E5%86%A4%E5%AE%B6"));s=false}if(!s){return false}var m={fd:t.fromDate(),td:t.toDate(),fromCity:o,toCity:u,search:t._tjSearchType(),drange:a,type:t._type,searchType:t._searchType()};var g=SearchCaution;if(g.check(m)){g.show();return false}var y=t.sType+"_"+t._searchType();var b=t.sType=="inter";var w=t._searchType()=="roundtrip";var E=B(t.$chdNum.find("input")).value;var S=B(t.$adtNum.find("input")).value;if(!f){var x={r:"srchbox",srch_type:y,gocity_chg_cnt:t.cityCount[t.sType+"from"],retcity_chg_cnt:t.cityCount[t.sType+"to"],godate_chg_cnt:t.dateCount[t.sType+"fromDate"],godate:B(t.$fromDate).value};if(w){x.retdate_chg_cnt=t.dateCount[t.sType+"toDate"];x.retdate=B(t.$toDate).value}if(b){x.adtnum=S;x.chdnum=E}GodEye.log(x);if(t.changePsngr){GodEye.log({r:"srchbox_choose_passnum",hastip:t.hasHidetip})}if(E!=0){GodEye.log({r:"srchbox_with_child"})}}e(t).trigger("select_btn")})},getId:function(){return this.form},setFromCity:function(t){H(this.$fromCity,t);this._clearError(this.$fromCity);e(this).trigger("boxchange");return this},getFromCity:function(){return B(this.$fromCity)},setpFromCity:function(t){H(this.$pfromCity,t);this._clearError(this.$pfromCity);e(this).trigger("pboxchange");return this},getpFromCity:function(){return B(this.$pfromCity)},setToCity:function(t){H(this.$toCity,t);this._clearError(this.$toCity);e(this).trigger("boxchange");return this},getToCity:function(){return B(this.$toCity)},setpToCity:function(t){H(this.$ptoCity,t);this._clearError(this.$ptoCity);e(this).trigger("pboxchange");return this},getpToCity:function(){return B(this.$ptoCity)},fromDate:function(t){if(t==null){return this.$fromDate.val()}else{this.$fromDate.data("q-datepicker-fly").select(P(t));e(this).trigger("boxchange")}return this},pfromDate:function(t){if(t==null){return this.$pfromDate.val()}else{this.$pfromDate.data("q-datepicker-fly").select(P(t));e(this).trigger("boxchange")}return this},toDate:function(t){if(t==null){return this.$toDate.val()}else{this.$toDate.data("q-datepicker-fly").select(P(t));e(this).trigger("boxchange")}return this},fromParam:function(e){if(e==null){return this.$from.val()}else{this.$from.val(e)}return this},getDom:function(){return this.$form},fill:function(e){if(!e){return}var t=this;t.setFromCity({value:e.fromCity,country:e.fromCountry,valided:true});t.setToCity({value:e.toCity,country:e.toCountry,valided:true});trackAction("QH|HCT|history|"+encodeURIComponent(e.fromCity));trackAction("QH|HCT|history|"+encodeURIComponent(e.toCity));t.fromDate(D(e.fromDate));if(e.roundtrip){t.toDate(D(e.toDate));t.$roundtripRadio.attr("checked","checked");t.$roundtripRadio.trigger("click")}else{t.$onewayRadio.attr("checked","checked");t.$onewayRadio.trigger("click")}if(t.$pfromCity&&t.$pfromCity.length){if(e.fromCountry==="中国"&&e.toCountry==="中国"){return}t.setpFromCity({value:e.fromCity,country:e.fromCountry,valided:true});t.setpToCity({value:e.toCity,country:e.toCountry,valided:true});t.pfromDate(D(e.fromDate))}}});return j}(jQuery);var BaseMultiFlightSearchBox=function(e){function y(e){return e.prevAll(".dp-prefix")}function b(e){e.fdatepicker("setting","linkTo",null);e.data("q-datepicker-fly").select(x(e.val()))}function w(e,t){e.fdatepicker("setting","linkTo",t);e.data("q-datepicker-fly").select(x(e.val()))}function E(e){return e!==""}function S(e){var e=new Date(e.replace(/-/g,"/"));var t=window.SERVER_TIME||new Date;var n=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(e.getTime()<n.getTime()){e=new Date(t.getTime()+2*24*60*60*1e3)}var r=e.getFullYear();var i=e.getMonth()+1;var s=e.getDate();i=i<10?"0"+i:i;s=s<10?"0"+s:s;return[r,i,s].join("-")}function x(e){var t=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);return t?new Date(t[1],t[2]*1-1,t[3]):null}function T(t,n){e.each(n,function(e,n){if(e==="value"){var r=t.data("q-suggest");if(r){r.setValue(n)}t.val(n)}else{switch(e){case"country":t.data("country",n);break;case"valided":t.data("valided",n);break}}})}function N(t){return e.extend({},t.data(),{value:e.trim(t.val())})}function C(){}var t="input[name=fromCityMulti]";var n="input[name=toCityMulti]";var r="input[name=fromDateMulti]";var i="input[name=toDateMulti]";var s="input[name=fromCity]";var o="input[name=toCity]";var u="input[name=fromDate]";var a=".js-exchagne-city";var f="input[name=from]";var l=".js-searchtype-oneway";var c=".js-searchtype-roundtrip";var h=".js-searchtype-multitrip";var p=".js-searchtype-fuzzytrip";var d=".js-searchtype-pricetrend";var v=".js-suggestcontainer";var m=".js-backdate";var g=363;e.extend(C.prototype,{init:function(s){var o=this;if(o._inited){return}this.tripCount=2;this.trip_zh=["一","二","三","四","五","六"];var u=e(s.form);this.hotCityConfig=s.hotcity;this.delay=s.delay||null;o.moreSearboxArr=[];o.supportPrice=typeof s.supportPrice==="undefined"?false:s.supportPrice;o.form=s.form;o.$form=u;o.$toDate=u.find(i);o.$fromDate=u.find(r);o.$fromCity=u.find(t);o.$toCity=u.find(n);o.$onewayRadio=e(l,u);o.$roundtripRadio=e(c,u);o.$multitripRadio=e(h,u);o.$fuzzyRadio=e(p,u);o.$pricetrendRadio=e(d,u);o.$exchange=e(a,u);o.$from=e(f,u);o.placeHolder={};for(var v=0;v<o.$fromCity.length;v++){o._initCityInput(this.hotCityConfig,o.$fromCity.eq(v),o.$toCity.eq(v),o.$fromDate.eq(v));o._initDatePicker(this.delay,o.$fromDate.eq(v),o.$fromCity.eq(v),o.$toCity.eq(v));v==1&&w(o.$fromDate.eq(0),o.$fromDate.eq(1))}o._bindEvents();o.$toDatePrefix=y(o.$toDate);o.$fromDatePrefix=y(o.$fromDate);o._inited=true;e(o).trigger("initialized");o.$onewayRadio.trigger("click");return o},_initCityInput:function(t,n,r,i){var s=this;var o=n.nextAll(v);var u=r.nextAll(v);var a=new FlightHotCity;var f=new FlightHotCity;var l=new FlightSuggest;var c=new FlightSuggest;this.fromCitySuggest=l;this.toCitySuggest=c;e.each([a,f,l,c],function(t,n){e(n).bind("setvalue",function(t,n){s._clearError(n);e(s).trigger("boxchange");e(s).trigger("citychange")})});e(a).bind("hotcity-show",function(){if(!this.$dom[0]){e(s).trigger("no_exhitbit",this.cityType)}try{n.data("q-suggest").hide()}catch(t){}trackAction("QH|HCT|open")});e(f).bind("hotcity-show",function(){if(!this.$dom[0]){e(s).trigger("no_exhitbit",this.cityType)}try{r.data("q-suggest").hide()}catch(t){}trackAction("QH|HCT|open")});e(a).bind("hotcity-select",function(e,t){r.focus();r.trigger("showHotCity");trackAction("QH|HCT|select|"+encodeURIComponent(t))});e(f).bind("hotcity-select",function(e,t){i.focus();i.data("q-datepicker-fly").show();trackAction("QH|HCT|select|"+encodeURIComponent(t))});a.init({type:t.fromtype,cityType:"from",defaultTab:t.fromDefaultTab});l.init({name:"flight-fromcity",container:o,tiptext:n.data("qcbox-placeholder"),typename:"mult"});n.qcbox();f.init({type:t.totype,cityType:"to",defaultTab:t.toDefaultTab});c.init({name:"flight-tocity",container:u,tiptext:r.data("qcbox-placeholder"),typename:"mult"});r.qcbox();s.setCityData(n,{value:"",country:"",valided:true});s.setCityData(r,{value:"",country:"",valided:true});n.focus(function(){if(!this.value){s._addLinkedCity(n,"from")}});r.focus(function(){if(!this.value){s._addLinkedCity(r,"to")}})},_initDatePicker:function(t,n,r,i){var s=this;var o=typeof SERVER_TIME!=="undefined"?SERVER_TIME:new Date,u=new Date(o.getFullYear(),o.getMonth(),o.getDate()),a=new Date(o.getFullYear(),o.getMonth(),o.getDate()+g);var f=t?t.fromDateDelay:2;toDateDelay=t?t.toDateDelay:5;var l=new Date(o.getFullYear(),o.getMonth(),o.getDate()+f),c=new Date(o.getFullYear(),o.getMonth(),o.getDate()+toDateDelay);var h=n.fdatepicker({ui:"qunar",linkRules:"+7D,+0D",minDate:u,maxDate:a,linkTo:null,single:true,defaultDay:l.valueOf(),schForm:s,on:{"q-datepicker-select":function(){e(s).trigger("boxchange")},"q-datepicker-show":function(){trackAction("QH|DP|open")}}});if(s.supportPrice){var p={$fromCity:r,$toCity:i,$fromDate:n};n.data("q-datepicker-fly").supportPrice(true,p)}},parseDate:function(e){return x(e)},_bindEvents:function(){var e=this;var t=this;e.$form.submit(function(e){search_btn()});e._bindSearchTypeChangeEvent();e._bindHoverInfoEvent();e._bindAddTripEvent()},_bindSearchTypeChangeEvent:function(){var t=this;var n=t.$form,r=t.$fromDate,i=t.$toDate,s=e("#one-round-ser"),o=e("#moreway-ser"),u=e("#fuzzy-ser"),a=e("#pricetrend-ser"),f=e("#searchboxList"),l=e("#search_box").find(".m-bao"),c=n.find("[name=ishttps]");t.$onewayRadio.click(function(){s.show();o.hide();u.hide();f.removeClass("morline-btn").removeClass("itlgent-btn");a.hide();l.show();c.val(location.protocol==="https:"?1:0)});t.$roundtripRadio.click(function(){s.show();o.hide();u.hide();f.removeClass("morline-btn").removeClass("itlgent-btn");a.hide();l.show();c.val(location.protocol==="https:"?1:0)});t.$multitripRadio.click(function(){s.hide();o.show();u.hide();f.addClass("morline-btn").removeClass("itlgent-btn");a.hide();l.hide();c.val(0)});t.$fuzzyRadio.click(function(){s.hide();o.hide();u.show();f.removeClass("morline-btn").addClass("itlgent-btn");a.hide();l.hide();c.val(location.protocol==="https:"?1:0)});t.$pricetrendRadio.click(function(){s.hide();o.hide();u.hide();f.removeClass("morline-btn").removeClass("itlgent-btn");a.show();l.show();c.val(0)});e(t).trigger("searchtypechagne")},_bindHoverInfoEvent:function(){var t=e("#morlinePoint");var n=e("#hoverInfo");n.bind("mouseover",function(){t.show()});n.bind("mouseout",function(){t.hide()})},_bindAddTripEvent:function(){var i=this,s=i.$form;i.zindexCount=0;e("#js_addtrip").click(function(){i.tripCount++;i.zindexCount++;var o=e(QTMPL.MultiFlightSearchBox.render({trip:i.tripCount,zindex:100-i.zindexCount}));e("#js_trips_list").append(o);var u=i.tripCount-1,a=s.find(t).eq(u),f=s.find(n).eq(u),l=s.find(r);$fromDate=l.eq(u);i._initCityInput(i.hotCityConfig,a,f,$fromDate);i._initDatePicker(i.delay,$fromDate,a,f);w(l.eq(u-1),$fromDate);var c=e("#delete"+i.tripCount);i.moreSearboxArr.push({trip:i.tripCount,sbox:o,deleEle:c});e(i).trigger("addMultiClick",i);i._bindDeleteTripEvent(c);i.tripCount==6&&e("#js_addtrip").css("visibility","hidden")})},_bindDeleteTripEvent:function(t){var n=this;t.click(function(){var r=parseInt(t[0].id.charAt(6),10)-3;n.moreSearboxArr[r].sbox.remove();n._updateLink(r);n._updateTrips(r);n.tripCount--;n.tripCount<6&&e("#js_addtrip").css("visibility","visible")})},_updateTrips:function(e){var t=this;t.moreSearboxArr.splice(e,1);for(var n=e;n<t.moreSearboxArr.length;n++){var r=n+3;t.moreSearboxArr[n].trip=r;t.moreSearboxArr[n].sbox.find("span")[0].innerHTML=r;var i=t.moreSearboxArr[n].sbox.find(".qcbox");t.moreSearboxArr[n].deleEle[0].id="delete"+r}},_updateLink:function(e){e+=2;var t=this.$form.find(r);if(e<this.tripCount-1){w(t.eq(e-1),t.eq(e))}},_addLinkedCity:function(e,r){var i=this.$form.find(t),s=this.$form.find(n),o=-1;var u,a;o=r=="from"?i.index(e):s.index(e);if(r=="from"&&o!=0){a=this.getCityData(s.eq(o-1));a.value&&this.setCityData(e,{value:a.value,country:"",valided:true})}else if(r=="to"&&o!=s.length-1){u=this.getCityData(i.eq(o+1));u.value&&this.setCityData(e,{value:u.value,country:"",valided:true})}},_showError:function(e,r,i){var s=this;var o;switch(e){case"from":o=s.$form.find(t).eq(i);break;case"to":o=s.$form.find(n).eq(i);break}if(!o.data("org-placeholder")){o.data("org-placeholder",o.data("qcbox-placeholder"))}o.data("qcbox-placeholder",r);o.val("");o.parent().parent().addClass("qcbox_err")},_clearError:function(e){e.data("qcbox-placeholder",e.data("org-placeholder"));e.parent().parent().removeClass("qcbox_err")},_checkCity:function(e,t){var n=this;var r=t.value;if(E(r)&&!t.valided){return false}return true},submitCheck:function(){var e=this,r=e.$form;var i=r.find(t),s=r.find(n);var o,u,a,f,l=true;for(var c=0;c<i.length;c++){o=e.getCityData(i.eq(c));u=e.getCityData(s.eq(c));a=o.value;f=u.value;if(!E(a)||!e._checkCity("from",o)){o.qcbox.$el.trigger("mouseup");l=false;break}else if(!E(f)||!e._checkCity("to",u)){u.qcbox.$el.trigger("mouseup");l=false;break}if(a===f&&E(a)){e._showError("to","不能和出发地相同",c);l=false;break}}return l},getId:function(){return this.form},setFromCity:function(e){this.setCityData(this.$fromCity.eq(0),e)},setCityData:function(t,n){T(t,n);this._clearError(t);e(this).trigger("boxchange");return this},getCityData:function(e){return N(e)},fromDate:function(t){if(t==null){return this.$fromDate.val()}else{this.$fromDate.data("q-datepicker-fly").select(x(t));e(this).trigger("boxchange")}return this},toDate:function(t){if(t==null){return this.$toDate.val()}else{this.$toDate.data("q-datepicker-fly").select(x(t));e(this).trigger("boxchange")}return this},fromParam:function(e){if(e==null){return this.$from.val()}else{this.$from.val(e)}return this},getDom:function(){return this.$form},fill:function(e){if(!e){return}var t=this;t.setCityData(t.$fromCity.eq(0),{value:e.fromCity,country:e.fromCountry,valided:true});t.setCityData(t.$toCity.eq(0),{value:e.toCity,country:e.toCountry,valided:true});trackAction("QH|HCT|history|"+encodeURIComponent(e.fromCity));trackAction("QH|HCT|history|"+encodeURIComponent(e.toCity));t.fromDate(S(e.fromDate))},getMultiValue:function(){var i=/\(([A-Z]{3})\)$/;var s=e(t),o=e(n),u=e(r);var a=[],f=[],l=[];for(var c=0;c<s.length;c++){a.push(s[c].value);f.push(o[c].value);l.push(u[c].value)}return{fromCity:a.join(","),toCity:f.join(","),fromDate:l.join(",")}}});return C}(jQuery);var FuzzySearchBox=function(e){function a(e){return e!==""}function f(t,n){e.each(n,function(e,n){if(e==="value"){var r=t.data("q-suggest");if(r){r.setValue(n)}t.val(n)}else{switch(e){case"country":t.data("country",n);break;case"valided":t.data("valided",n);break}}})}function l(t){return e.extend({},t.data(),{value:e.trim(t.val())})}function c(){}var t="input[name=fromFuzzy]";var n="input[name=toFuzzy]";var r="input[name=from]";var i="input[name=arrType]";var s="input[name=topic]";var o=".search_selbox";var u=".js-suggestcontainer";e.extend(c.prototype,{init:function(o){var u=this;if(u._inited){return}var a=e(o.form);var f=o.hotcity;u.placeHolder=o.placeHolder;u.isFuzzy=o.isFuzzy;u.form=o.form;u.$form=a;u.$fromCity=a.find(t);u.$toFuzzy=a.find(n);u.$arrType=a.find(i);u.$topic=a.find(s);u.$from=e(r,a);u._initCityInput(f);u._initFuzzyInput();u._bindEvents();u._inited=true;e(u).trigger("initialized");return u},_searchType:function(t){var n=this;return e("#searchType").val()},_initCityInput:function(t){var n=this;var r=n.$fromCity.nextAll(u);var i=n.$fromCity;var s=new FlightHotCity;var o=new FlightSuggest;this.fromCitySuggest=o;n.fromHotCity=s;i.data("qcbox-placeholder",n.placeHolder);e.each([s,o],function(t,r){e(r).bind("setvalue",function(t,r){n._clearError(r);e(n).trigger("citychange")})});e(s).bind("hotcity-show",function(){try{n.$fromCity.data("q-suggest").hide()}catch(t){}if(!this.$dom[0]){e(n).trigger("no_exhitbit",this.cityType)}trackAction("QH|HCT|open")});s.init({type:t.fromtype,cityType:"from",defaultTab:t.fromDefaultTab});o.init({name:"flight-fromcity",container:r,tiptext:i.data("qcbox-placeholder"),allPlace:n.isFuzzy});i.qcbox()},_initFuzzyInput:function(t){var n=this;var r=n.$toFuzzy;var i=n.$toFuzzy.nextAll(u);var s=new FlightHotFuzzy;var o=new FlightSuggest;this.toCitySuggest=o;n.toHotFuzzy=s;r.data("qcbox-placeholder",n.placeHolder);e.each([s,o],function(t,i){e(i).bind("setvalue",function(e,t){n._clearError(t);r.trigger("fuzzychange")})});e(s).bind("hotfuzzy-show",function(){try{n.$toFuzzy.data("q-suggest").hide()}catch(t){}if(!this.$dom[0]){e(n).trigger("no_exhitbit",this.fuzzyType)}});s.init({type:"",fuzzyType:"toFuzzy"});o.init({name:"flight-tofuzzy",container:i,tiptext:r.data("qcbox-placeholder"),allPlace:n.isFuzzy});r.qcboxfuzzy()},_bindEvents:function(){var e=this;e._submitCheck()},_showError:function(e,t){var n=this;var r;switch(e){case"from":r=n.$fromCity;break}if(!r.data("org-placeholder")){r.data("org-placeholder",r.data("qcbox-placeholder"))}r.data("qcbox-placeholder",t);r.val("");r.parent().parent().addClass("qcbox_err")},_clearError:function(e){e.data("qcbox-placeholder",e.data("org-placeholder"));e.parent().parent().removeClass("qcbox_err")},_checkCity:function(e,t){var n=this;var r=t.value;if(!a(r)&&!t.valided){return false}return true},_submitCheck:function(){var t=this;t.$form.submit(function(n){var r=t.getFromCity();var i=r.value;if(t.$topic.val()==""){t.$topic.val("免签/落地签");t.$arrType.val(2)}else if(t.$topic.val().replace(/\([^)]*\)/g,"")==i.replace(/\([^)]*\)/g,"")){t.$toFuzzy.data("qcboxfuzzy").setFuzzyErr("不能和出发地相同");return false}else{var s=[];e.map(t.$toFuzzy.data("qcboxfuzzy").$qtab.find(".qtab"),function(t){s.push(e(t).data("type"))});t.$arrType.val(s.join(","))}if(!t._checkCity("from",r)){r.qcbox.$el.trigger("mouseup");return false}e(t).trigger("select_btn")})},getId:function(){return this.form},getFromCity:function(){return l(this.$fromCity)},setFromCity:function(e){f(this.$fromCity,e);this._clearError(this.$fromCity);return this},fromParam:function(e){if(e==null){return this.$from.val()}else{this.$from.val(e)}return this},getDom:function(){return this.$form},fill:function(e){if(!e){return}var t=this;t.setFromCity({value:(e.searchDepartureAirport||e.fromCity)+(e.fromCode?"("+e.fromCode+")":""),country:"",valided:false});trackAction("QH|HCT|history|"+encodeURIComponent(e.fromCity))}});return c}(jQuery);var DomesticFlightSearchBox=function(e){function t(){this._cityTempData={from:{},to:{}};this._type="国内"}e.extend(t.prototype,BaseFlightSearchBox.prototype,{changeSerchType:function(){function a(e){r.data("q-datepicker-fly").setFuzzy(e);i.data("q-datepicker-fly").setFuzzy(e);s.data("q-suggest").args.allPlace=e;o.data("q-suggest").args.allPlace=e}var e=this,t=e.$fromDatePrefix,n=e.$toDatePrefix,r=e.$fromDate,i=e.$toDate,s=e.$fromCity,o=e.$toCity;var u={fromDate:r.val(),toDate:i.val()};e.$onewayRadio.click(function(){t.html("日期");n.html("日期");e._restoreCity()});e.$roundtripRadio.click(function(){t.html("日期");n.html("日期");e._restoreCity()})},_saveCityAndClear:function(){var t=this,n=t._cityTempData;n.from=e.extend({},t.getFromCity());n.to=e.extend({},t.getToCity());t._setPlaceHolder(t.$fromCity,"出发地(可不填)");t._setPlaceHolder(t.$toCity,"目的地(可不填)");t.setFromCity({value:"",country:"",valided:true}).setToCity({value:"",country:"",valided:true})},_restoreCity:function(){var e=this;var t=e._cityTempData;e._setPlaceHolder(e.$fromCity,e.placeHolder);e._setPlaceHolder(e.$toCity,e.placeHolder);e.setFromCity(t.from);e.setToCity(t.to)},_setPlaceHolder:function(e,t){e.data("org-placeholder",t);e.data("qcbox-placeholder",t)}});return t}(jQuery);var InterFlightSearchBox=function(e){function n(){this._type="国际"}var t="#js_inter_backdate";e.extend(n.prototype,BaseFlightSearchBox.prototype,{backdatepanel:function(){return e(t)}});return n}(jQuery);var InterMultiFlightSearchBox=function(e){function n(){}var t="#js_inter_backdate";e.extend(n.prototype,BaseMultiFlightSearchBox.prototype,{backdatepanel:function(){return e(t)}});return n}(jQuery);var TJFlightSearchBox=function(e){function t(){this._type="特价"}e.extend(t.prototype,BaseFlightSearchBox.prototype,{changeSerchType:function(){var t=this;this.$fromDate.fdatepicker("setting","linkTo",null);t.$tjSearchRadio.bind("change",function(n){var r=e(this).val();switch(r){case"domestic":t.fromHotCity.switchCity({type:"domesticfromtj"});t.toHotCity.switchCity({type:"domesticto-tj"});break;case"international":t.fromHotCity.switchCity({type:"interfrom-tj",width:500});t.toHotCity.switchCity({type:"interto-tj",width:500});break}})}});return t}(jQuery);var InterAutoDateHelper=function(e){this.formId=e};InterAutoDateHelper.prototype._init=function(){var e=this.formId;this.url="//rc.flight.qunar.com/rtripdate?";this.isAuto=false;this.fromCity=document.getElementById(e).fromCity;this.toCity=document.getElementById(e).toCity;if(this.toCity.value===""){this.isAuto=true}this.fromDate=document.getElementById(e).fromDate;this.toDate=document.getElementById(e).toDate};InterAutoDateHelper.prototype.$jsex=function(e){this._init();var t=this;$jex.event.bind(this.fromDate,"focus",function(){t.isAuto=false});$jex.event.bind(this.toDate,"focus",function(){t.isAuto=false});if(this.isAuto){this._getAutoDate(e)}};InterAutoDateHelper.prototype._getAutoDate=function(e){var t=this;$jex.event.bind(e,"citychange",function(){if(t.isAuto){if(!!t.toCity.value){var n=t.fromCity.value;var r=t.toCity.value;var i=t.url+"dpt="+encodeURIComponent(n)+"&arr="+encodeURIComponent(r);$jex.jsonp(i,function(t){var n=t.go_date;var r=t.back_date;e.fromDate.setValue(n);e.toDate.setValue(r)});$jex.event.clear(e,"citychange")}}})};InterAutoDateHelper.prototype.$jq=function(e){this._init();var t=this;jQuery(this.fromDate).bind("focus",function(){t.isAuto=false});jQuery(this.toDate).bind("focus",function(){t.isAuto=false});if(this.isAuto){this._$getAutoDate(e)}};InterAutoDateHelper.prototype._$getAutoDate=function(e){var t=this;jQuery(e).bind("citychange",function(){if(t.isAuto){var e=t.fromCity.value;var n=t.toCity.value;if(n!=""){t.isAuto=false}else{return}var r=t.url+"dpt="+encodeURIComponent(e)+"&arr="+encodeURIComponent(n)+"&callback=?";jQuery.getJSON(r,function(e){var n=e.go_date;var r=e.back_date;jQuery(t.fromDate).data("q-datepicker-fly").select(new Date(n.replace(/-/g,"/")));jQuery(t.toDate).data("q-datepicker-fly").select(new Date(r.replace(/-/g,"/")))})}})};var current=window.SERVER_TIME;var max=new Date(current.getTime()+1e3*60*60*24*362);var normalMax;var rootURL="//flight.qunar.com/twell/flight/Search.jsp?";var SearchCaution=function(){function a(e){var t="";for(var n in e){t+="&"+n+"="+e[n]}return rootURL+t}function l(e){var t={fromCity:e.fromCity,toCity:e.toCity,fromDate:e.fd};if(e.td){t.toDate=e.td}t.from="qunarindex";t.searchType=e.type==="特价"?"DealsFlight":f[e.searchType];return t}function c(e){try{(new Image).src="//flight.qunar.com/site/track.htm?action="+e+"&t="+Math.random()}catch(t){}}var e=$.ui.dialog({width:522}),t={};var n=function(e){var t=e||{};var n="";if(e.round){n="<p>"+(e.type==="特价"?"从":"去程")+'：&nbsp;<span class="fb">'+e.departureDate+"</span></p>";n=n+"<p>"+(e.type==="特价"?"到":"回程")+'：&nbsp;<span class="fb">'+e.arrivalDate+"</span>&nbsp;&nbsp;马上为您显示搜索结果。</p>"}else{n="<p>"+(e.type==="特价"?"从":"去程")+'：&nbsp;<span class="fb">'+e.departureDate+"</span>&nbsp;&nbsp;马上为您显示搜索结果。</p>"}return n};var r=function(e){var t='<div class="p_lyr_ct" style="width:522px;">'+'<div class="lyr_in"> <a id="search-caution-close" class="btn_close" href="javascript:;"></a>'+'<div class="lyr_ct" style="width: 450px;">'+'<div class="b_alt_day">'+'<div class="p1">目前<span class="fb">'+(e.type==="特价"?"特价":e.fromCity+'</span>到<span class="fb">'+e.toCity)+"</span>机票最远支持搜索以下日期的航班：</div>"+'<div class="p2">'+n(e)+"</div>"+'<div class="p_btn">'+'<a href="'+e.href+'" class="btn_sure_bl" id="search-caution-ok"><span>确&nbsp;定</span></a>'+"</div>"+"</div>"+'<div class="b_alt_dode clearfix">'+'<a href="http://app.qunar.com/" target="_blank">'+'<p class="m_code_img"><img src="//simg4.qunarzz.com/site/images/flight/home/img_qnkhd.png"></p>'+'<p class="m_code_rt">'+'<span class="h1">为您提供更多航班搜索，<br>我们一直在努力！</span>'+'<span class="h3">扫描或点击下载去哪儿旅行客户端</span>'+"</p>"+"</a>"+"</div>"+"</div>"+"</div>"+"</div>";return t};var i=function(){s()};var s=function(){e.hide()};var o=function(){$("#search-caution-close").click(s);$("#search-caution-ok").click(i)};var u=function(e,t){return Math.min(e,t)};var f={oneway:"OnewayFlight",roundtrip:"RoundTripFlight"};var h=function(e,t){var n=t||"-";var r=e.getMonth()+1;var i=e.getDate();r<10&&(r="0"+r);i<10&&(i="0"+i);return e.getFullYear()+n+r+n+i};t.check=function(e){normalMax=max;this.data={};this.data.fromCity=e.fromCity;this.data.toCity=e.toCity;var t=false;var n=new Date(e.fd.replace(/-/g,"/"));var r=new Date(e.td.replace(/-/g,"/"));if(e.searchType==="oneway"){if(n>normalMax){t=true;this.data.type=e.type;this.data.round=false;this.data.departureDate=h(normalMax);var i=l(e);i.fromDate=this.data.departureDate;this.data.href=a(i)}}else if(e.searchType==="roundtrip"){if(n>normalMax||r>normalMax){t=true;this.data.type=e.type;this.data.round=true;this.data.departureDate=h(new Date(u(n,normalMax)));this.data.arrivalDate=h(new Date(u(r,normalMax)));var i=l(e);i.fromDate=this.data.departureDate;i.toDate=this.data.arrivalDate;this.data.href=a(i)}}else{if(n>normalMax){t=true;this.data.type=e.type;this.data.departureDate=h(normalMax);var i=l(e);i.fromDate=this.data.departureDate;i.drange=e.drange;i.search=e.search;this.data.href=a(i)}}return t};t.show=function(){var t=r(this.data);e.setContent(t);e.show();e.setMiddle();o();var n=["FL","EQR"].join("|");c(n)};return t}();var FlightSearchBox=function(e){function M(t){var n=e(f),r=e(l),i=e(p),s=e(h),o=e(c),u=e(d);n.click(function(){N.addClass("setBottom");C[0].checked&&N.hide();k[0].checked&&N.hide();n.addClass("cur");r.removeClass("cur");o.removeClass("cur");i.show();s.hide();u.hide();if(!x){j();x=true}i.find("#searchTypeInterRnd").attr("checked","checked");i.find("#searchTypeInterRnd").trigger("click")});r.click(function(){r.addClass("cur");n.removeClass("cur");o.removeClass("cur");s.show();i.hide();u.hide();N.removeClass("setBottom");N.show()});o.click(function(e){o.addClass("cur");n.removeClass("cur");r.removeClass("cur");u.show();i.hide();s.hide();N.removeClass("setBottom");N.show();if(!T){H();T=true}})}function _(){var e=m;if(IP_ADDRESS){e.setFromCity({value:IP_ADDRESS,valided:true})}e.fromParam(E)}function D(){var t=P().ex_track;if(t){var n=document.createElement("input");n.type="hidden";n.value=t;n.name="ex_track";e(L).prepend(e(n).clone());e(A).prepend(e(n).clone());e(O).prepend(e(n).clone())}}function P(){var t={};var n=window.location.search.replace("?","");var r=n.split("&");e.each(r,function(e,n){var r=n.split("=");var i=r[0],s=r[1];t[i]=s||""});return t}function H(){var t=w;e(t).on("initialized",function(){t.changeSerchType()});t.init({form:O,hotcity:{fromtype:"domesticfromtj",totype:"domesticto-tj",fromDefaultTab:"热门",toDefaultTab:"热门"},isFuzzy:false,supportPrice:true,placeHolder:"城市名（可不填）"});searchTrack.init("TJ",t)}function B(){var t=m;e(t).bind("initialized",function(){t.changeSerchType()});t.init({form:L,hotcity:{fromtype:"domesticfrom",totype:"domesticto",fromDefaultTab:"热门",toDefaultTab:"热门"},isFuzzy:true,supportPrice:true,placeHolder:"输入国家/地区/城市/机场"});e(L).append('<input type="hidden" name="ishttps" value="'+(location.protocol==="https:"?"1":0)+'" />');searchTrack.init("DMT",t)}function j(){var t=g;var n=y;var r=b;e(A).append('<input type="hidden" name="ishttps" value="'+(location.protocol==="https:"?"1":0)+'" />');t.init({form:A,hotcity:{fromtype:"interfrom",totype:"interto",fromDefaultTab:"热门",toDefaultTab:"国际热门"},photcity:{fromtype:"multifrom",totype:"multito",fromDefaultTab:"热门",toDefaultTab:"国际热门",hotcityWidth:500},delay:{fromDateDelay:2,toDateDelay:22},imfs:n,isFuzzy:true,supportPrice:true,placeHolder:"输入国家/地区/城市/机场",pplaceHolder:"城市名(必填)"});n.init({form:A,hotcity:{fromtype:"multifrom",totype:"multito",fromDefaultTab:"热门",toDefaultTab:"国际热门"},supportPrice:true,delay:{fromDateDelay:2,toDateDelay:22}});r.init({form:A,hotcity:{fromtype:"interfrom",totype:"interto",fromDefaultTab:"热门",toDefaultTab:"国际热门"},isFuzzy:true,placeHolder:"输入城市"});if(IP_ADDRESS){t.setFromCity({value:IP_ADDRESS,valided:true});r.setFromCity({value:IP_ADDRESS,valided:true});t.setpFromCity({value:IP_ADDRESS,valided:true});n.setFromCity({value:IP_ADDRESS,valided:true})}t.fromParam(E);if(S&&S.interFirst){if(!S.interFirst.roundtrip){S.interFirst.roundtrip=true;S.interFirst.toDate=new Date((new Date(S.interFirst.fromDate)).getTime()+7*24*3600*1e3)}t.fill(S.interFirst);r.fill(S.interFirst);n.fill(S.interFirst)}var i=new o("ifsForm");i.$jq(t);searchTrack.init("INT",t,n);e(n).bind("addMultiClick",function(e,n){searchTrack.init("INT",t,n)})}function F(){if(!window.localStorage){return false}if(!window.localStorage.getItem("citylist?type=11")){I(false)}if(!window.localStorage.getItem("citylist?type=12")){I(true)}}function I(t){var n=t?12:11;e.ajax({url:"//m.flight.qunar.com/touch/api/citylist",dataType:"jsonp",data:{type:n},timeout:3e3,success:function(e){if(!window.localStorage){return}window.localStorage.setItem("citylist?type="+n,JSON.stringify(e),24*60*60*1e3)},error:function(){GodEye.log({r:"citylist_res_err",msg:n,page:location.pathname,xhr_opt:"/api/h5/flight/citylist"})}})}function q(){}var t=TJFlightSearchBox,n=InterMultiFlightSearchBox,r=InterFlightSearchBox,i=FuzzySearchBox,s=DomesticFlightSearchBox,o=InterAutoDateHelper;var u=false;var a=null;var f="#js_inter_tab";var l="#js_domestic_tab";var c="#js_tj_tab";var h="#js_flighttype_tab_domestic";var p="#js_flighttype_tab_inter";var d="#js_flighttype_tab_tj";var v=null;var m=new s;var g=new r;var y=new n;var b=new i;var w=new t;var E=P().from;var S=null;var x=false;var T=false;var N=e("#search_box").find(".m-bao");var C=e("#searchTypeMulti");var k=e("#searchTypeInterFuzzy");var L="#dfsForm";var A="#ifsForm";var O="#dealsForm";e.extend(q.prototype,{init:function(t){if(u){return}a=e(t);B(this);M(this);_();D();F();u=true;return a},parseHistory:function(t){if(!t){return}S=t;var n=S.domesticFirst;var r=S.interFirst;n&&m.fill(S.domesticFirst);if(!v){v=e(f)}if(r&&(!n||parseInt(r.timestamp,10)-parseInt(n.timestamp,10)>0)){e(p).show();v.trigger("click")}}});return q}(jQuery);var PriceUtil={getOneWayDiscount:function(e){var t=PriceUtil.getDiscount(e);return t.replace(/([\d.]+)/,'<span class="f_tha">$1</span>')},getDiscount:function(e){if(e<=0)return"";if(e>9.9){if(e>10)return"";else return"全价"}else{if(e.toString().length==1)return e+".0"+"折";else return e+"折"}},getTransferDiscount:function(e){if(e<=0)return"";if(e>9.9){return""}else{if(e.toString().length==1)return e+".0"+"折";else return e+"折"}}};var FlightUtil={codePatch:function(e){var t=1;var n="";for(var r=0;r<e.length;r++){if(e.charAt(r)=="/"){if(t%2==0){n+="/ ";t++}else{n+="/";t++}}else n+=e.charAt(r)}return n},catAdtext:function(e,t){if(!t)t=19;if(!e)return"";if(e.length>t){return e.substr(0,t)+"..."}else{return e}},catText:function(e,t){var n=e.replace(/[^x00-xff]/g,"aa");if(n.length>2*t){var r=0;for(var i=0;i<t;i++){var s=e.charAt(i);if(/[^x00-xff]/.test(s)){r++}else{r+=2}if(r>=2*t)break}return e.substr(0,r)+"..."}else{return e}},starClass:function(e){if(e==null||typeof e!="number"&&!/^(\d+.\d+|\d+)$/.test(e)){return""}var e=parseFloat(e);if(e>3){return"star30"}switch(e){case 0:return"star00";case.5:return"star05";case 1:return"star10";case 1.5:return"star15";case 2:return"star20";case 2.5:return"star25";case 3:return"star30";default:return"star00"}},getGTITLE:function(e,t,n,r){if(e==null||t==null)return"";if(e>=100)var i="AD_";else var i="nonAD_";var s=ConfigManager.getConfig("rank","GTITLE",i+"G"+t);if(!s)return"";var o=0;if(n<=5&&n>=4){o=0}else if(n<3.9&&n>=3){o=1}else if(n<2.9&&n>=2){o=2}else if(n<1.9&&n>=0){o=3}if(s[o]){return s[o]}else return""},timeRange:function(e){var t=e.substr(0,2);var n=e.substr(3,4);var r=parseInt(t,10);var i=parseInt(n,10);if(r>=0&&r<10){return[0]}else if(r==10){return i==0?[0,1]:[1]}else if(r>10&&r<14){return[1]}else if(r==14){return i==0?[1,2]:[2]}else if(r>14&&r<19){return[2]}else if(r==19){return i==0?[2,3]:[3]}else if(r>19&&r<24){return[3]}},duration:function(e){var t=Math.floor(e/60);var n=e%60;var r=t?t+"小时":"";r+=n?n+"分":"";if(r)r="约"+r;return r},interDuration:function(e){if(e==Number.MAX_VALUE)return"";var t=Math.floor(e/60);var n=e%60;if(n>=24&&n<=36){t+=.5}else if(n>36){t+=1}var r=t?t+"小时":"";if(r)r="约"+r;return r}};(function(e){var t=function(){var e=1;return function(){return e++}}(),n=function(){var e="local_storage";return{_store:null,_getStore:function(){if(!this._store){try{this._store=document.createElement("input");this._store.type="hidden";this._store.addBehavior("#default#userData");document.body.appendChild(this._store)}catch(e){var t=[];for(var n in e){t.push(n+": "+e[n])}document.title=t.join("\n");return false}}return this._store},get:function(t){var n=this._getStore();if(!n)return false;n.load(e);return n.getAttribute(t)},add:function(t){var n=this._getStore();if(!n)return false;n.load(e);n.setAttribute(t.name,t.value);n.save(e)},remove:function(t){var n=this._getStore();if(!n)return false;n.load(e);n.removeAttribute(t);n.save(e)},clear:function(){var t=this._getStore();if(!t)return false;var n=t.XMLDocument;var r=n.selectSingleNode("ROOTSTUB");for(var i=0;i<r.attributes.length;++i){var s=r.attributes[i];t.removeAttribute(s.baseName)}t.save(e)},addListItem:function(e,t,n){n=n||{};var r=this.getList(e,true,n);r[n.isFirst?"unshift":"push"](t);this.add({name:e,value:JSON.stringify(r)});return true},removeListItem:function(e,t,n){n=n||{};var r=JSON.parse(this.get(e)||"[]"),i,s,o,u=[],a=false;if(r&&r.length&&r instanceof Array){for(i=0,s=r.length;i<s;i++){o=r[i];if(o.uniqueKey===t){a=true;continue}if(!(o.expires&&o.expires<(new Date).getTime())){if(!n.isValidItem||n.isValidItem(o)){u.push(o)}}}this.add({name:e,value:JSON.stringify(u)})}return a},removeList:function(e){this.remove(e)},getList:function(e,t,n){if(t){return this.refreshList(e,n)}return JSON.parse(this.get(e)||"[]")},refreshList:function(e,t){var n=JSON.parse(this.get(e)||"[]"),r,i,s,o=[];if(n&&n.length&&n instanceof Array){t=t||{};t.data=t.data||{};for(r=0,i=n.length;r<i;r++){s=n[r];if(!(s.expires&&s.expires<(new Date).getTime())){if(!t.isValidItem||t.isValidItem(s)){o.push($jex.merge(s,t.data[s.uniqueKey]||{}))}}}this.add({name:e,value:JSON.stringify(o)})}return o}}}(),r={add:function(e){if(e.name){var t=e.name+"="+e.value;if(e.expire){t+=";expires="+(new Date((new Date).getTime()+e.expire)).toGMTString()}if(e.domain){t+=";domain="+e.domain}if(e.path){t+=";path="+e.path}document.cookie=t}},remove:function(e,t){if(e){var n=e+"=1;expires="+(new Date((new Date).getTime()-864e5)).toGMTString();t=t||{};n+=";path="+(t.path||"/");document.cookie=n;return true}return false},get:function(e){var t=document.cookie.split(/;\s*/),n,r;for(n=0;n<t.length;n++){r=t[n].split("=");if(r[0]==e){return r[1]}}return undefined},getuuidMap:function(e){var t=this.get(e+"Map");return t?JSON.parse(t):null},addListItem:function(e,n,r){r=r||{};var i=this.getuuidMap(e),s;if(!i){i=["0"];this.add({name:e+"Map",value:JSON.stringify(i),path:r.path||"/"})}if(r.isFirst){s=i[0]}else{s=i[i.length-1]}var o=this.getList(e,true,s),u=o.slice(0);o[r.isFirst?"unshift":"push"](n);this.add({name:e+s,value:JSON.stringify(o),expires:r.expires||30*864e5,path:r.path||"/"});if(this.getList(e,false,s).length===o.length){return true}else{this.add({name:e+s,value:JSON.stringify(u),expires:r.expires||30*864e5,path:r.path||"/"});i[r.isFirst?"unshift":"push"](t());this.add({name:e+"Map",value:JSON.stringify(i),path:r.path||"/"});return this.addListItem(e,n,r)}},removeListItem:function(e,t,n){var r=this,i=false,s=$jex.$break;$jex.$break=false;$jex.foreach(r.getuuidMap(e)||[],function(s,o){var u=JSON.parse(r.get(e+s)||"[]"),o,a,f,l=[];if(u&&u.length&&u instanceof Array){for(o=0,a=u.length;o<a;o++){f=u[o];if(f.uniqueKey===t){i=true;continue}if(!(f.expires&&f.expires<(new Date).getTime())){l.push(f)}}n=n||{};r.add({name:e+s,value:JSON.stringify(l),expires:n.expires||30*864e5,path:n.path||"/"})}if(i){return $jex.$break}});$jex.$break=s;return i},removeList:function(e){var t=this;$jex.each(this.getuuidMap(e)||[],function(n,r){t.remove(e+n)});this.remove(e+"Map")},getList:function(e,t,n){var r=this;if(!n){var i=[];$jex.each(this.getuuidMap(e)||[],function(n,s){i=i.concat(r.getList(e,t,n))});return i}else{if(t){return this.refreshList(e,{},n)}return JSON.parse(this.get(e+n)||"[]")}},refreshList:function(e,t,n){var r=this,i=[];if(n){var s=JSON.parse(this.get(e+n)||"[]"),o,u,a;if(s&&s.length&&s instanceof Array){t=t||{};t.data=t.data||{};for(o=0,u=s.length;o<u;o++){a=s[o];if(!(a.expires&&a.expires<(new Date).getTime())){i.push($jex.merge(a,t.data[a.uniqueKey]||{}))}}this.add({name:e+n,value:JSON.stringify(i),expires:t.expires||30*864e5,path:t.path||"/"})}}else{$jex.each(this.getuuidMap(e)||[],function(n,s){i=i.concat(r.refreshList(e,t,n))})}return i}},i={add:function(e){localStorage[e.name]=e.value},get:function(e){return localStorage[e]},remove:function(e){localStorage.removeItem(e)},addListItem:function(e,t,n){n=n||{};var r=this.getList(e,true,n);r[n.isFirst?"unshift":"push"](t);this.add({name:e,value:JSON.stringify(r)});return true},removeListItem:function(e,t,n){n=n||{};var r=JSON.parse(this.get(e)||"[]"),i,s,o,u=[],a=false;if(r&&r.length&&r instanceof Array){for(i=0,s=r.length;i<s;i++){o=r[i];if(o.uniqueKey===t){a=true;continue}if(!(o.expires&&o.expires<(new Date).getTime())){if(!n.isValidItem||n.isValidItem(o)){u.push(o)}}}this.add({name:e,value:JSON.stringify(u)})}return a},removeList:function(e){this.remove(e)},getList:function(e,t,n){if(t){return this.refreshList(e,n)}return JSON.parse(this.get(e)||"[]")},refreshList:function(e,t){var n=JSON.parse(this.get(e)||"[]"),r,i,s,o=[];if(n&&n.length&&n instanceof Array){t=t||{};t.data=t.data||{};for(r=0,i=n.length;r<i;r++){s=n[r];if(!(s.expires&&s.expires<(new Date).getTime())){if(!t.isValidItem||t.isValidItem(s)){o.push($jex.merge(s,t.data[s.uniqueKey]||{}))}}}this.add({name:e,value:JSON.stringify(o)})}return o}},s=e.localStorage?i:n;e.CookieUtil=r;e.StorageUtil=s})(window);(function(e,t){function r(e){this.page=e;this._init()}var n=/MSIE 6\.0/.test(navigator.userAgent);r.fn=r.prototype;r.fn.API={addUrl:"/ifavorites/add",getUrl:"/ifavorites/get",delUrl:"/ifavorites/delete"};r.fn._init=function(){this.uniqueKeyMap={};this.favCt=t("#barFavoritesCt");this._processCookie();this._loadData(true);this._bindEvent()};r.fn._getEmptyTpl=function(){var e="",t="";switch(this.page){case"home":e="先搜索，再收藏";t="前往搜索详情页，点击收藏!";break;case"list":e="轻松点击收藏";t="收藏后比价更方便!";break}return'<div class="fav_empty">'+'<div class="empty_logo"></div>'+'<p class="msg_main">'+e+"</p>"+'<p class="msg_tip">'+t+"</p>"+"</div>"};r.fn.openPanel=function(){this._processCookie();this._loadData(true)};r.fn._processCookie=function(){var e=this,t=CookieUtil.get("_t")!=undefined&&CookieUtil.get("_q")!=undefined,n;if(t){n=StorageUtil.getList("favoriteItems",true);if(n.length){$jex.ajax(this.API.addUrl,{source_track:"favorites",userId:CookieUtil.get("_q").substring(2),favoriteItems:n},function(t){if(t.ret==="true"){StorageUtil.removeList("favoriteItems");$jex.ajax(this.API.getUrl,{source_track:"favorites",userId:CookieUtil.get("_q").substring(2),need_flight_detail:"1",need_av_detail:"1",need_read_cached_data:"1"},function(t){if(t.ret==="true"){e.cookieUploaded=true;e._processData(t.favoriteItems)}else{$jex.console.error("加载航班失败!")}},{method:"POST",contentType:"applacation/json",onerror:function(){$jex.console.error("加载航班失败!")}})}else{$jex.console.error("持久化Cookie航班失败!")}},{method:"POST",contentType:"applacation/json",onerror:function(){$jex.console.error("持久化Cookie航班失败!")}})}}};r.fn._loadData=function(e){var t=CookieUtil.get("_t")!=undefined&&CookieUtil.get("_q")!=undefined,n=this;if(t){$jex.ajax(this.API.getUrl,{source_track:"favorites",userId:CookieUtil.get("_q").substring(2),need_flight_detail:"1",need_av_detail:"1",need_read_cached_data:"1"},function(t){if(t.ret==="true"){if(e&&n.cookieUploaded)return;n._processData(t.favoriteItems)}else{$jex.console.error("加载航班失败!")}},{method:"POST",contentType:"applacation/json",onerror:function(){$jex.console.error("加载航班失败!")}})}else{var r=StorageUtil.getList("favoriteItems",true,{isValidItem:function(e){var t=e.depFlights[0],n=$jex.date.parse(t.depDate),r=(t.depTime||":").split(":");n.setHours(r[0]);n.setMinutes(r[1]);if(n.getTime()-(new Date).getTime()<4*36e5){return false}return true}});this._processData(r);this._refreshPriceAv(r)}};r.fn._refreshPriceAv=function(e){var t=this,n="/ifavorites/get";$jex.ajax(n,$jex.merge({source_track:"favorites",cookieId:CookieUtil.get("QunarGlobal"),need_flight_detail:"0",need_av_detail:"1",need_read_cached_data:"0",favoriteItems:e}),function(e){if(e.ret==="true"){var n={};$jex.each(e.favoriteItems||[],function(e,t){n[e.uniqueKey]=e});t._processData(StorageUtil.refreshList("favoriteItems",{data:n,isValidItem:function(e){var t=e.depFlights[0],n=$jex.date.parse(t.depDate),r=(t.depTime||":").split(":");n.setHours(r[0]);n.setMinutes(r[1]);if(n.getTime()-(new Date).getTime()<4*36e5){return false}return true}}))}else{$jex.console.error("刷新航班价格失败!")}},{method:"POST",contentType:"applacation/json",onerror:function(){$jex.console.error("刷新航班价格失败!")}})};r.fn._processData=function(e){e=e||[];this.uniqueKeyMap={};this.favCt.data("favcount",e.length);t(this).trigger("getCount",[e.length]);if(e.length){this.favCt.html("");this.AddItems(e)}else{this.favCt.html(this._getEmptyTpl())}};r.fn._bindEvent=function(){var e=this;$jex.event.binding(this,"favoriteItemAdded",function(t,n){e.OnAddedItem(t,n)});$jex.event.binding(this,"favoriteItemDeleted",function(t){e.OnDeletedItem(t)})};r.fn.OnAddedItem=function(e,n){var r=this.favCt.data("favcount")||0,i=n||r+1;if(!r){this.favCt.html("")}this.favCt.data("favcount",i);t(this).trigger("getCount",[i]);this.AddItems([e],true);window.usertoolbar&&usertoolbar.showBtnBar(true)};r.fn.AddItems=function(e,r){var i=this,s=decodeURIComponent;$jex.each(e,function(e,o){var u=e.flightType==0||e.flightType==3,a=e.flightType==1||e.flightType==4||e.flightType==5,f=e.flightType==2,l=[],c=false,h=e.npr,p=e.tax,d=e.taxType,v=e.totalPrice,m=c&&v,g=e.flightStatus!==undefined?e.flightStatus:1;if(f){}else{var y=e.depFlights,b=e.retFlights;l.push({formCity:s(y[0].depCity),toCity:s(y[0].arrCity),isRoundTrip:a,routeData:[{date:$jex.date.format($jex.date.parse(y[0].depDate),"MM月dd日"),depTime:y[0].depTime,arrTime:y[0].arrTime,crossDay:e.deptCrossDay}]});if(e.flightType==3||e.flightType==5){l[0].toCity=s(y[y.length-1].arrCity);l[0].routeData[0].arrTime=y[y.length-1].arrTime}if(a){l[0].routeData.push({date:$jex.date.format($jex.date.parse(b[b.length-1].depDate),"MM月dd日"),depTime:b[b.length-1].depTime,arrTime:b[b.length-1].arrTime,crossDay:e.arriCrossDay});if(e.flightType==5){l[0].routeData[1].arrTime=b[0].arrTime}}}var w=document.createElement("div"),E="",S={1:"i_1day",2:"i_2day","-1":"i_1day_m"};w.className="f_item"+(g===0?" f_item_noav":"");E+='<a data-uniqueKey="'+e.uniqueKey+'"'+(e.uuid?' data-uuid="'+e.uuid+'"':"")+' href="javascript:;" title="取消收藏" class="btn_delFavorite"></a>';$jex.each(l,function(e,t){E+='<div class="fav_leg">'+'<div class="leg_city">'+e.formCity+'<i class="'+(a?" i_wf":"i_ow")+'"></i>'+e.toCity+"</div>";$jex.each(e.routeData,function(e,t){E+='<div class="leg_datetime">'+'<i class="index">'+(u?"单":a?["去","回"][t]:f?t:"")+"</i>"+'<span class="date">'+e.date+"</span>"+'<span class="time">'+(e.depTime+"-"+e.arrTime)+"</span>"+(e.crossDay?'<i class="'+S[e.crossDay]+'"></i>':"")+"</div>"});E+="</div>"});E+='<div class="fav_pricetax">';if(g===0){E+='<div class="no_av">售空</div>'}else if(g===2){}else{var x={NOT_CONTAINED:0,NORMAL:1,CONTAINED:2,REFERENCE:3},T={0:"未含税费",1:"税费",2:"含税总价",3:"参考税费"};E+='<div class="fav_price">'+'<em class="r_txt">'+(m?"总价":"票价")+"</em>"+'<span class="hv"><i class="rmb">¥</i><span class="dpr">'+(m?v:h)+"</span></span>"+"</div>"+'<div class="fav_tax">'+'<em class="r_txt">'+(m&&d!=x.NOT_CONTAINED?"含税费":T[d])+"</em>";var N=h&&!m&&d!=x.NOT_CONTAINED&&d!=x.CONTAINED;E+='<span class="hv'+(N?"":" hidden")+'"><i class="rmb">¥</i><span class="tax">'+p+"</span></span>"+"</div>"}E+="</div>";w.innerHTML=E;if(r&&i.favCt.data("favcount")){i.favCt.prepend(w)}else{i.favCt.append(w)}i.uniqueKeyMap[e.uniqueKey]=e;$jex.event.binding(w,"click",function(t){if(!$jex.hasClassName(w,"f_item_noav")){var n,r,i,s,o,u=decodeURIComponent;if(f){o="MultiTripFlight"}else{$jex.each(e.depFlights,function(e,t){if(t==0){n=e.depCity;i=e.depDate}r=e.arrCity});if(a){o="RoundTripFlight";s=e.retFlights[0].depDate}else{o="OnewayFlight"}}var l={from:"fi_int_fav_search",fromCity:u(n)||"",toCity:u(r)||"",fromDate:i||"",toDate:s||"",searchType:o||"",favoriteKey:e.flightKey},c="http://flight.qunar.com/twell/flight/Search.jsp?"+$jex.toQueryString(l);window.open(c)}$jex.stopEvent(t)});t(".btn_delFavorite",w).click(function(e){var t=CookieUtil.get("_t")!=undefined&&CookieUtil.get("_q")!=undefined,n,r=this.getAttribute("data-uniqueKey");if(t){n=this.getAttribute("data-uuid");$jex.ajax(i.API.delUrl,{source_track:"favorites",userId:CookieUtil.get("_q").substring(2),flightUUID:n},function(e){if(e.ret==="true"){$jex.event.trigger(i,"favoriteItemDeleted",w)}else{$jex.console.error("删除航班失败!")}},{method:"POST",contentType:"applacation/json",onerror:function(){$jex.console.error("删除航班失败!")}})}else{if(StorageUtil.removeListItem("favoriteItems",r,{isValidItem:function(e){var t=e.depFlights[0],n=$jex.date.parse(t.depDate),r=(t.depTime||":").split(":");n.setHours(r[0]);n.setMinutes(r[1]);if(n.getTime()-(new Date).getTime()<4*36e5){return false}return true}})){$jex.event.trigger(i,"favoriteItemDeleted",w)}}$jex.stopEvent(e)});if(n){t(w).hover(function(){t(this).addClass("f_item_hover")},function(){t(this).removeClass("f_item_hover")})}if("ontouchend"in document){$jex.addClassName(w,"f_item_hover")}})};r.fn.OnDeletedItem=function(e){e.parentNode.removeChild(e);var n=t(".btn_delFavorite",e).data("uniquekey");delete this.uniqueKeyMap[n];var r=Math.max((this.favCt.data("favcount")||0)-1,0);this.favCt.data("favcount",r);t(this).trigger("getCount",[r]);if(!r){this.favCt.html(this._getEmptyTpl())}};e.Favorites=r})(window,jQuery);var FlightNotification=function(){return{NoticeList:[],init:function(e){var t=this;t.load(e)},load:function(e){var t=this;var n=$.ajax({url:"//flightopdata.qunar.com/vataplan?",data:{id:41},dataType:"jsonp"});n.done(function(n){var r;if(n.key_data&&n.key_data.length>0){r=n.key_data[0];t.showTips(r,e)}})},showTips:function(e,t){var n=e[t.pageId];if(n.length){this.notice(n)}},notice:function(e){$("#js_flight_notice_box").removeClass("hide").find("#js_flight_notice").html(e)}}}();(function(){function o(){s=new FlightSearchBox;s.init("#search_box")}function u(e){$.qhistory.init({success:function(t){e.parseHistory(t.flight);window.QunarHistory.data=t;$(QunarHistory).trigger("onload")}})}function l(t){t.checkAlsoSearch(function(n){if(t===e){a=n}else{f=n}h()})}function c(e,t,n){}function h(){var n=(e.searchType=="roundtrip"||e.searchType=="lowestprice")&&a;var r=t.searchType=="roundtrip"&&f;c(n||r,$jex.$("pingxing_china"),a);c(n||r,$jex.$("pingxing_inter"),f)}function p(e){var t;e.checkAlsoSearch=function(n,r){clearTimeout(t);var i=function(){if(!e.alsoSearch||e.alsoSearch.length==0)return;var t=0,r=e.alsoSearch.length,i=function(r){if(r){n&&n(e.alsoSearch[t-1])}else{var s=e.alsoSearch[t++];if(s){s.form=e;s.toggle(i)}else{n&&n(null)}}};i(false)};if(r){i()}else{t=setTimeout(i,10)}};$jex.event.add(e,"openHotCity",function(){trackAction("QH|HCT|open")});$jex.event.add(e,"selectHotCity",function(e){trackAction("QH|HCT|select|"+encodeURIComponent(e))});$jex.event.add(e,"openDatepicker",function(){trackAction("QH|DP|open")});$jex.event.add(e,"citychange",function(t,n){l(e)});$jex.event.add(e,"pre_submit",function(t,n){var r=null;searchTrack.triggerHomeClickBtn(e);this.checkAlsoSearch(function(e){r=e},true);var i=r&&r.getAdUrl();if(i){var s=window.screen.availHeight*1;var o=window.screen.availWidth*1;var u="qunar_"+(new Date).valueOf();var a=window.open("about:blank",u,"scrollbars=yes,location=yes,menubar=yes,resizable=yes,status=yes,titlebar=yes,toolbar=yes,width="+Math.round(o)+",height="+Math.round(s));if($jex.ie==6){a.blur();a.opener.focus();a.location=i}else{$jex.stopEvent(n);t.setAttribute("target",u);setTimeout(function(){t.submit();setTimeout(function(){location.href=i},10)},10)}}});$jex.event.add(e,"switch",function(e,t){l(e)})}function d(){var e=navigator.appName;var t=navigator.appVersion;var n=t.split(";");var r=n[1].replace(/[ ]/g,"");if(e=="Microsoft Internet Explorer"&&r=="MSIE6.0"){$jex.addClassName(document.getElementsByTagName("body")[0],"jx-ie6")}if(top.location!=self.location){alert("欢迎使您来到“去哪儿”网(Qunar.com)!\n请您注意：“去哪儿”网的正确拼写是：www.qunar.com\n其他任何域名，都是非正规的来源");top.location=self.location}}function v(){AD_Manage.ip_query=function(e){QNR.ips(e)};AD_Manage.load()}function y(){initTrendFunc();$jex.$("hdivTrendFlash").innerHTML=b("main","/site/main",890,297,"");var e=setInterval(function(){if(thisMovie("main")&&thisMovie("main").day){clearInterval(e);setDays(45)}},100);$jex.element.show($jex.$("dTrendflashPanel"))}function b(e,t,n,r,i){return AC_FL_RunContent("codebase","http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0","width",n,"height",r,"src",t,"flashvars",i,"quality","high","pluginspage","http://www.macromedia.com/go/getflashplayer","align","middle","wmode","transparent","devicefont","false","id",e,"bgcolor","#FFFFFF","name",e,"allowScriptAccess","always","movie",t)}document.domain="qunar.com";window.GSERVER_TIME=null;CONSTANT.pageAddr="FH";window.QunarHistory={};var e=null;var t=null;var n=null;var r=null;var i=new ResponsiveLayoutAdapter;var s;var a,f;var m=new AlsoSearch("singepo_china",{container:"pingxing_china",getKey:function(){return this.form.toCity.getValue()},getCountry:function(){return this.form.toCity.getCountry()}});var g=new AlsoSearch("singepo_inter",{container:"pingxing_inter",getKey:function(){return this.form.toCity.getValue()},getCountry:function(){return this.form.toCity.getCountry()}});if($jex.web.parameters.startSearch){location=CONSTANT.ONEWAY_SEARCH_URL+location.search;return}$jex.event.bind(window,"load",function(){trackAction("FH|load|"+((new Date).getTime()-CLIENT_TIME.getTime())/1e3,null,true)});$(function(){o();u(s)});DomesticLowPriceHome.dealsSearch();new InterLowpr({holder:"#InterLowPriceHome",type:"ow"});new InterLowpr({holder:"#InterLowPriceHome",type:"rt"});v();$jex.event.ready(function(){trackAction("FH|domload|"+((new Date).getTime()-CLIENT_TIME.getTime())/1e3,null,true);window.setTimeout(function(){trackAction("FH|flash|"+((new Date).getTime()-CLIENT_TIME.getTime())/1e3,null,true)},500);window.setTimeout(function(){trackAction("FH|search|"+((new Date).getTime()-CLIENT_TIME.getTime())/1e3,null,true)},100)});var w=new CACTI_monitoring({url:"//bmrg.qunar.com/f",pageId:"home"});$jex.event.bind(window,"load",function(){w.send()});$("#search_box").delegate(".js_hongbao","mouseover",function(){$(this).find(".p_tips_wrap").show()}).delegate(".js_hongbao","mouseout",function(){$(this).find(".p_tips_wrap").hide()});$(document).on("usertoolbarready",function(e,t){var n=false,r=false;t.add([{id:"fav",name:"收藏",panelName:"我的收藏夹",full:true,keepOpen:true,requireLogin:false,onOpen:function(e){var t=e.find("#barFavoritesCt");if(n===false){n=true;var r=$(".scrollbars-box",e);r.off("mousewheel.usertoolbar").on("mousewheel.usertoolbar",function(e){var n=this.scrollTop,r=this.scrollHeight;if(e.deltaY<0&&n+t.height()>=r||e.deltaY>0&&n<=0){e.preventDefault()}})}if(window.FavoritesBar){FavoritesBar.openPanel();t.height($(window).height()-e.find(".panel-head").height())}}},{id:"toolbox",name:"工具",panelName:"",full:false,keepOpen:false,requireLogin:false,onOpen:function(e){if(r===false){r=true;t.fillPanel(e,"<div>"+'<ul class="e_fly_route clrfix">'+"<li>"+'<a href="http://flight.qunar.com/site/guide/onlinech.htm" target="_blank" data-track="key=101050003&val=在线值机">'+'<i class="ico_zxzj"></i>在线值机'+"</a>"+"</li>"+"</ul>"+"</div>")}}}]);var i=$(".js-usertoolbar"),s=$(".js-usertoolbar-btn",i),o=$(".js-usertoolbar-panel",i);var u=$(".btn-item.fav",s);u.append('<span class="dot"></span>');u.find(".icon").addClass("iconfont f-heart_o");var a=$(".panel-item.fav",o);a.find("h3 .icon",o).addClass("iconfont f-heart_o");t.fillPanel(a,'<div class="panel-cell"><div id="barFavoritesCt" class="fav_content scrollbars-box"></div></div>');o.find(".js-content").addClass("panel-row list-body");window.FavoritesBar=new Favorites("home");var f=u.find(".dot");$(window.FavoritesBar).on("getCount",function(e,t){if(t&&f.is(":hidden")){f.show()}else if(!t&&f.is(":visible")){f.hide()}});$(window).resize(function(){setTimeout(function(){i.show()},100)}).triggerHandler("resize",0);t.rightSide();var l=$(".unfold",i),c=$(".fold",i),h=$(".fold-contain",i);window.usertoolbar=$.extend(t,{showBtnBar:function(e){var t=parseInt(l.css("right")),n=parseInt(h.css("right"));if(e){if(!isNaN(t)&&!isNaN(n)&&t>n){l.click()}}else{if(!isNaN(t)&&!isNaN(n)&&t<n){c.click()}}}});setTimeout(function(){window.usertoolbar.showBtnBar(true)},100);$(".js-usertoolbar").on("click",".link_jgyc",function(e){var t={from:"fi_toolbar_search",searchType:"PriceTrend",pfromCity:"北京(BJS)",ptoCity:"中国香港(HKG)",pfromDate:$jex.date.add(window.SERVER_TIME||new Date,2,true)},n=QunarHistory&&QunarHistory.data&&QunarHistory.data.flight&&QunarHistory.data.flight.interFirst;if(n){t.pfromCity=n.fromCity;t.ptoCity=n.toCity;var r=window.SERVER_TIME||new Date,i=new Date(n.fromDate);if(i.getTime()<r.getTime()){t.pfromDate=$jex.date.add(r,2,true)}else{t.pfromDate=$jex.date.format(i)}}var s=t.pfromCity.match(/^(.*)\((\w+)\)$/),o=t.ptoCity.match(/^(.*)\((\w+)\)$/);var u={fromCity:s?s[1]:t.pfromCity,toCity:o?o[1]:t.ptoCity,fromDate:t.pfromDate,fromCode:s?s[2]:"",toCode:o?o[2]:"",from:t.from,isInter:true};window.open("/site/pricetrend.htm?"+$.param(u))})});var E={pageId:"home"};FlightNotification.init(E)})();(function(){function s(){$(".q_page").append(o());$(".b_side_code").delegate(".btn_close","click",function(){$(this).parent().parent(".b_side_code").hide()});u(i)}function o(e){var t=e?n+"px":(a()||n)+"px";return i.css("top",t)}function u(){r=setInterval(function(){if(e++>20||typeof closeFlash==="function"&&typeof openFlash==="function"){clearInterval(r);var n=typeof closeFlash==="function"?closeFlash:function(){},i=typeof openFlash==="function"?openFlash:function(){};closeFlash=function(){n();o(true)};openFlash=function(){i();o()};o()}if($("#home_active_couplet_left").length&&$("#home_active_couplet_left")[0].tagName.toLowerCase()==="object"){clearInterval(r);t="home_active_couplet_left";o()}},200)}function a(){var e=$("#"+t).length?$("#"+t)[0].height:0;if(e&&t==="home_active_couplet_left"){e=Number(e)+25}return e}var e=0,t="banner_dynamic_left",n=6,r;var i=$(['<div class="b_side_code">','<div class="e_side_code">','<a href="javascript:;" class="btn_close"></a>','<a href="http://app.qunar.com/" target="_blank" class="lnk_khk" ','data-track="key=101050007&val=移动客户端">','<img width="122" height="122" src="//simg1.qunarzz.com/site/images/flight/home/img_qnkhd.png" alt=""/>','<p class="f_s1">扫描或点击下载</p>','<p class="f_s2">去哪儿旅行客户端</p>',"</a>","</div>","</div>"].join(""));s();window.codeReheight=o})();$(function(){function e(e){var t=window._ba_utm_s;if(!t)return;var n=new Image;n.height=1;n.width=1;n.src="//bc.qunar.com/clk?s="+t+"&a="+e+"&t="+Math.random()}function o(){$(document.body).off("click.closeModDownload");e("close_downloadapp");r.removeClass("detail-show");setTimeout(function(){n.addClass("summary-show");t.addClass("m-download-closed")},500)}function u(){$(window).one("scroll",o);$(document.body).on("click.closeModDownload",function(e){var n=t[0],r=e.target;if(n&&!(n===r||$.contains(n,r))){o()}})}var t=$(".m-download"),n=t.find(".summary"),r=t.find(".detail"),i=t.find(".js-close-download"),s=t.find(".js-btn-expand");i.click(o);s.click(function(){setTimeout(u,400);e("expand_downloadapp");t.removeClass("m-download-closed");n.removeClass("summary-show");setTimeout(function(){r.addClass("detail-show")},300)});setTimeout(u,1e3);var a=t.find(".js-btn-download"),f="",l="";a.click(function(t){var n=$(this);e(n.data("track"));t.stopPropagation()})})